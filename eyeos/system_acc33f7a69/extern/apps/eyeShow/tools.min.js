function createImageButton(e,t,n){var r=document.createElement("img");return r.src=Slimey.imagesDir+e+".png",r.className="slimeyTool",r.title=t,r.slimeyTool=n,r.style.marginLeft="4px",r.style.marginBottom="4px",r.style.verticalAlign="middle",r.style.cursor="pointer",r.onmouseover=function(){this.slimeyTool.enabled&&this.slimeyTool.toggled!=this&&(this.src=Slimey.imagesDir+e+"h.png")},r.onmouseout=function(){this.slimeyTool.enabled&&(this.slimeyTool.toggled==this?this.src=Slimey.imagesDir+e+"d.png":this.src=Slimey.imagesDir+e+".png")},r.onmousedown=function(){this.slimeyTool.enabled&&(this.src=Slimey.imagesDir+e+"d.png")},r.onmouseup=function(){this.slimeyTool.enabled&&(this.src=Slimey.imagesDir+e+"h.png")},r.onclick=function(){this.slimeyTool.enabled&&this.slimeyTool.execute()},r}function createImageButtonBig(e,t,n){var r=document.createElement("img");return r.src=Slimey.imagesDir+e+".png",r.className="slimeyTool",r.title=t,r.style.width="40px",r.slimeyTool=n,r.style.marginLeft="4px",r.style.marginBottom="4px",r.style.verticalAlign="middle",r.style.cursor="pointer",r.onmouseover=function(){this.slimeyTool.enabled&&!this.slimeyTool.toggled&&(this.src=Slimey.imagesDir+e+"h.png")},r.onmouseout=function(){this.slimeyTool.enabled&&(this.slimeyTool.toggled?this.src=Slimey.imagesDir+e+"d.png":this.src=Slimey.imagesDir+e+".png")},r.onmousedown=function(){this.slimeyTool.enabled&&(this.src=Slimey.imagesDir+e+"d.png")},r.onmouseup=function(){this.slimeyTool.enabled&&(this.src=Slimey.imagesDir+e+"h.png")},r.onclick=function(){this.slimeyTool.enabled&&this.slimeyTool.execute()},r}function createImageButtonText(e,t,n,r){var i=document.createElement("div");return i.innerHTML='<img class="blockbarImg" src="index.php?theme='+USERTHEME+"&amp;extern=icons/22x22/"+r+'.png"/><div class="blockbarText"><a href="#"  accesskey="n">'+t+"</a></div>",i.className="blockbarItem",i.slimeyTool=n,i.style.marginLeft="4px",i.style.marginBottom="4px",i.style.cursor="pointer",i.slimeyTool=n,i.onclick=function(){this.slimeyTool.enabled&&this.slimeyTool.execute()},i}var SlimeyTool,SlimeyInsertTool,SlimeyInsertTextTool,SlimeyInsertOrderedListTool,SlimeyInsertUnorderedListTool,SlimeyEditContentTool,SlimeyFontColorTool,SlimeyFontSizeTool,SlimeyFontFamilyTool,SlimeyDeleteTool,SlimeyUndoTool,SlimeyRedoTool,SlimeyStyleToggleTool,SlimeyStyleGroupToggleTool,SlimeySendToBackTool,SlimeyBringToFrontTool,SlimeyViewSourceTool,SlimeySaveTool,SlimeyPreviewTool,SlimeyAddSlideTool,SlimeyDeleteSlideTool,SlimeyMoveSlideDownTool,SlimeyMoveSlideUpTool,SlimeySaveToolBig,SlimeySaveToolBigAs,SlimeyOpenBig,SlimeyNewBig,SlimeyInsertImageToolBigEye,SlimeyPreviewToolBig;SlimeyTool=function(e,t,n){this.slimey=n,this.name=e,this.element=t,this.enabled=!0},SlimeyTool.prototype.getName=function(){return this.name},SlimeyTool.prototype.getElement=function(){return this.element},SlimeyTool.prototype.execute=function(){alert(lang("generic tool"))},SlimeyTool.prototype.notifySelectionChange=function(){},SlimeyInsertTool=function(e){var t=createImageButton("insert",lang("insert an element"),this);SlimeyTool.call(this,"insert",t,e)},SlimeyInsertTool.prototype=new SlimeyTool,SlimeyInsertTool.prototype.execute=function(){var e,t=prompt(lang("what element do you wish to insert?"));t&&(e=new SlimeyInsertAction(this.slimey,t),this.slimey.editor.performAction(e))},SlimeyInsertTextTool=function(e){var t=createImageButton("insertText",lang("insert text"),this);SlimeyTool.call(this,"insertText",t,e)},SlimeyInsertTextTool.prototype=new SlimeyTool,SlimeyInsertTextTool.prototype.execute=function(){var e=new SlimeyInsertAction(this.slimey,"div");this.slimey.editor.performAction(e)},SlimeyInsertOrderedListTool=function(e){var t=createImageButton("insertOList",lang("insert ordered list"),this);SlimeyTool.call(this,"insertOList",t,e)},SlimeyInsertOrderedListTool.prototype=new SlimeyTool,SlimeyInsertOrderedListTool.prototype.execute=function(){var e=new SlimeyInsertAction(this.slimey,"ol");this.slimey.editor.performAction(e)},SlimeyInsertUnorderedListTool=function(e){var t=createImageButton("insertUList",lang("insert unordered list"),this);SlimeyTool.call(this,"insertUList",t,e)},SlimeyInsertUnorderedListTool.prototype=new SlimeyTool,SlimeyInsertUnorderedListTool.prototype.execute=function(){var e=new SlimeyInsertAction(this.slimey,"ul");this.slimey.editor.performAction(e)},SlimeyEditContentTool=function(e){var t=document.createElement("textarea");t.slimeyTool=this,t.style.height="25px",t.style.width="100%",t.style.backgroundColor="lightYellow",t.style.marginBottom="4px",t.title=lang("edit the element's content"),t.onkeyup=function(){this.slimeyTool.execute()},SlimeyTool.call(this,"editContent",t,e),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.element.disabled=!0},SlimeyEditContentTool.prototype=new SlimeyTool,SlimeyEditContentTool.prototype.execute=function(){var e,t=this.element.value,n=this.slimey.editor.getSelected();n.tagName=="UL"||n.tagName=="OL"?(t="<li>"+t+"</li>",t=t.replace(/\n/g,"</li><li>")):n.tagName=="DIV"&&(t=t.replace(/\n/g,"<br>")),e=new SlimeyEditContentAction(this.slimey,t),this.slimey.editor.performAction(e)},SlimeyEditContentTool.prototype.notifySelectionChange=function(){var e,t=this.slimey.editor.getSelected();t?(e=t.innerHTML,t.tagName=="UL"||t.tagName=="OL"?(e=e.replace(/<\/li><li>/gi,"\n"),e=e.replace(/<li>|<\/li>/gi,"")):t.tagName=="DIV"&&(e=e.replace(/<br>/gi,"\n")),e!=this.element.value&&(this.element.value=e),t.editable?this.element.disabled=!1:this.element.disabled=!0):(this.element.value="",this.element.disabled=!0)},SlimeyFontColorTool=function(e){var t=createImageButton("color",lang("change font color"),this);SlimeyTool.call(this,"color",t,e),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyFontColorTool.prototype=new SlimeyTool,SlimeyFontColorTool.prototype.execute=function(){chooseColor(this.colorChosen,this,this.element)},SlimeyFontColorTool.prototype.colorChosen=function(e){var t;e&&(t=new SlimeyEditStyleAction(this.slimey,"color",e),this.slimey.editor.performAction(t))},SlimeyFontColorTool.prototype.notifySelectionChange=function(){var e=this.slimey.editor.getSelected();e&&e.editable?(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"):(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default")},SlimeyFontSizeTool=function(e){var t=document.createElement("select");t.style.height="20px",t.style.width="80px",t.style.marginLeft="4px",t.title=lang("change font size");var n=document.createElement("option");n.value=n.style.fontSize="",n.appendChild(document.createTextNode("-- "+lang("Size")+" --")),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontSize="80%",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontSize="100%",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontSize="120%",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontSize="140%",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontSize="160%",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontSize="200%",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontSize="300%",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontSize="400%",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),t.slimeyTool=this,t.onchange=function(){this.slimeyTool.execute()},SlimeyTool.call(this,"fontsize",t,e),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.element.disabled=!0},SlimeyFontSizeTool.prototype=new SlimeyTool,SlimeyFontSizeTool.prototype.execute=function(){var e=new SlimeyEditStyleAction(this.slimey,"fontSize",this.element.value);this.slimey.editor.performAction(e)},SlimeyFontSizeTool.prototype.notifySelectionChange=function(){var e=this.slimey.editor.getSelected();e&&e.style.fontSize&&e.editable?(this.element.value=e.style.fontSize,this.element.disabled=!1):e&&e.editable?(this.element.value="",this.element.disabled=!1):this.element.disabled=!0},SlimeyFontSizeTool.prototype.notifyActionPerformed=SlimeyFontSizeTool.prototype.notifySelectionChange,SlimeyFontFamilyTool=function(e){var t=document.createElement("select");t.style.height="20px",t.style.width="140px",t.style.marginLeft="4px",t.title=lang("change font family");var n=document.createElement("option");n.value=n.style.fontFamily="",n.appendChild(document.createTextNode("-- "+lang("font family")+" --")),t.appendChild(n);var r=document.createElement("optgroup");r.setAttribute("label",lang("generic fonts")),t.appendChild(r),n=document.createElement("option"),n.value=n.style.fontFamily="serif",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontFamily="sans-serif",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontFamily="cursive",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontFamily="fantasy",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontFamily="monospace",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),r=document.createElement("optgroup"),r.setAttribute("label",lang("specific fonts")),t.appendChild(r),n=document.createElement("option"),n.value=n.style.fontFamily="Arial",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontFamily="Book Antigua",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontFamily="Comic Sans",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontFamily="Courier New",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontFamily="Tahoma",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontFamily="Times New Roman",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),n=document.createElement("option"),n.value=n.style.fontFamily="Verdana",n.appendChild(document.createTextNode(n.value)),t.appendChild(n),t.slimeyTool=this,t.onchange=function(){this.slimeyTool.execute()},SlimeyTool.call(this,"fontfamily",t,e),this.element.disabled=!0,this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this)},SlimeyFontFamilyTool.prototype=new SlimeyTool,SlimeyFontFamilyTool.prototype.execute=function(){var e=new SlimeyEditStyleAction(this.slimey,"fontFamily",this.element.value);this.slimey.editor.performAction(e)},SlimeyFontFamilyTool.prototype.notifySelectionChange=function(){var e=this.slimey.editor.getSelected();e&&e.style.fontFamily&&e.editable?(this.element.value=e.style.fontFamily,this.element.disabled=!1):e&&e.editable?(this.element.value="",this.element.disabled=!1):this.element.disabled=!0},SlimeyFontFamilyTool.prototype.notifyActionPerformed=SlimeyFontFamilyTool.prototype.notifySelectionChange,SlimeyDeleteTool=function(e){var t=createImageButton("delete",lang("delete element"),this);SlimeyTool.call(this,"delete",t,e),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.enabled=!1,t.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyDeleteTool.prototype=new SlimeyTool,SlimeyDeleteTool.prototype.execute=function(){var e,t=this.slimey.editor.getSelected();t&&(e=new SlimeyDeleteAction(this.slimey),this.slimey.editor.performAction(e))},SlimeyDeleteTool.prototype.notifySelectionChange=function(){var e=this.slimey.editor.getSelected();e?(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"):(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default")},SlimeyUndoTool=function(e){var t=createImageButton("undo",lang("undo"),this);SlimeyTool.call(this,"undo",t,e),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyUndoTool.prototype=new SlimeyTool,SlimeyUndoTool.prototype.execute=function(){this.slimey.editor.undo()},SlimeyUndoTool.prototype.notifyActionPerformed=function(){this.slimey.editor.undoStack.isEmpty()?(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"):(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer")},SlimeyRedoTool=function(e){var t=createImageButton("redo",lang("redo"),this);SlimeyTool.call(this,"redo",t,e),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyRedoTool.prototype=new SlimeyTool,SlimeyRedoTool.prototype.execute=function(){this.slimey.editor.redo()},SlimeyRedoTool.prototype.notifyActionPerformed=function(){this.slimey.editor.redoStack.isEmpty()?(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"):(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer")},SlimeyStyleToggleTool=function(e,t,n,r,i,s){var o=createImageButton(t,n,this);this.property=r,this.value1=i,this.value2=s,SlimeyTool.call(this,t,o,e),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyStyleToggleTool.prototype=new SlimeyTool,SlimeyStyleToggleTool.prototype.execute=function(){var e,t=this.slimey.editor.getSelected();t&&(t.style[this.property]==this.value1?(e=new SlimeyEditStyleAction(this.slimey,this.property,this.value2),this.toggled=!1,this.element.src=Slimey.imagesDir+this.name+".png"):(e=new SlimeyEditStyleAction(this.slimey,this.property,this.value1),this.toggled=this.element,this.element.src=Slimey.imagesDir+this.name+"d.png"),this.slimey.editor.performAction(e))},SlimeyStyleToggleTool.prototype.notifySelectionChange=function(){var e=this.slimey.editor.getSelected();e&&e.editable?(this.enabled=!0,e.style[this.property]==this.value1?(this.toggled=this.element,this.element.src=Slimey.imagesDir+this.name+"d.png"):(this.toggled=!1,this.element.src=Slimey.imagesDir+this.name+".png"),this.element.style.cursor="pointer"):(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default")},SlimeyStyleToggleTool.prototype.notifyActionPerformed=SlimeyStyleToggleTool.prototype.notifySelectionChange,SlimeyStyleGroupToggleTool=function(e,t,n,r){window.options=r;var i=document.createElement("span");for(var s=0;s<r.length;s++)r[s].img=createImageButton(r[s].name,r[s].title,this),r[s].img.option=r[s],r[s].img.onclick=function(){this.slimeyTool.enabled&&(this.slimeyTool.toggled=this,this.slimeyTool.execute())},i.appendChild(r[s].img);this.options=r,this.property=n,SlimeyTool.call(this,t,i,e),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.enable(!1)},SlimeyStyleGroupToggleTool.prototype=new SlimeyTool,SlimeyStyleGroupToggleTool.prototype.enable=function(e){var t;this.enabled=e;for(t=0;t<this.options.length;t++)e?(this.options[t].img.src=Slimey.imagesDir+this.options[t].name+".png",this.options[t].img.style.cursor="pointer"):(this.options[t].img.src=Slimey.imagesDir+this.options[t].name+"x.png",this.options[t].img.style.cursor="default");e&&this.toggled&&(this.toggled.src=Slimey.imagesDir+this.toggled.option.name+"d.png",this.toggled.style.cursor="pointer")},SlimeyStyleGroupToggleTool.prototype.execute=function(){var e,t,n=this.slimey.editor.getSelected();n&&this.toggled&&(e=this.toggled,n.style[this.property]!=e.option.value&&(t=new SlimeyEditStyleAction(this.slimey,this.property,e.option.value),this.enable(!0),this.slimey.editor.performAction(t),this.toggled=e))},SlimeyStyleGroupToggleTool.prototype.notifySelectionChange=function(){var e,t,n=this.slimey.editor.getSelected();if(n){e=n.style[this.property];for(t=0;t<this.options.length;t++)this.options[t].value==e&&(this.toggled=this.options[t].img)}this.enable(n&&n.editable)},SlimeyStyleGroupToggleTool.prototype.notifyActionPerformed=SlimeyStyleToggleTool.prototype.notifySelectionChange,SlimeySendToBackTool=function(e){var t=createImageButton("sendToBack",lang("send element to the back"),this);SlimeyTool.call(this,"sendToBack",t,e),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeySendToBackTool.prototype=new SlimeyTool,SlimeySendToBackTool.prototype.execute=function(){var e,t=this.slimey.editor.getSelected();t&&(e=new SlimeySendToBackAction(this.slimey),this.slimey.editor.performAction(e))},SlimeySendToBackTool.prototype.notifySelectionChange=function(){var e=this.slimey.editor.getSelected();e?(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"):(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default")},SlimeyBringToFrontTool=function(e){var t=createImageButton("bringToFront",lang("bring element to the front"),this);SlimeyTool.call(this,"bringToFront",t,e),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyBringToFrontTool.prototype=new SlimeyTool,SlimeyBringToFrontTool.prototype.execute=function(){var e,t=this.slimey.editor.getSelected();t&&(e=new SlimeyBringToFrontAction(this.slimey),this.slimey.editor.performAction(e))},SlimeyBringToFrontTool.prototype.notifySelectionChange=function(){var e=this.slimey.editor.getSelected();e?(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"):(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default")},SlimeyViewSourceTool=function(e){var t=createImageButton("viewSource",lang("view source code"),this);SlimeyTool.call(this,"viewSource",t,e),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this)},SlimeyViewSourceTool.prototype=new SlimeyTool,SlimeyViewSourceTool.prototype.execute=function(){var e,t,n=this.slimey.editor.getHTML();this.ta||(this.ta=document.createElement("textarea"),this.ta.style.border="4px solid deepskyblue",this.ta.style.position="absolute",this.ta.style.zIndex="100000",this.ta.style.visibility="hidden",this.ta.slimeyTool=this,this.ta.onkeyup=function(e){e||(e=event,e.which=e.keyCode),e.which==27&&(this.style.visibility="hidden",this.slimeyTool.toggled=!1,this.slimeyTool.element.src=Slimey.imagesDir+this.slimeyTool.name+".png",this.blur())},document.body.appendChild(this.ta)),this.toggled?(this.ta.style.visibility="hidden",this.toggled=!1,this.element.src=Slimey.imagesDir+this.name+".png",this.ta.blur()):(e=this.slimey.editor.getContainer(),t=getOffsetPosition(e),this.ta.style.left=t.x+"px",this.ta.style.top=t.y+"px",this.ta.style.width=e.offsetWidth+"px",this.ta.style.height=e.offsetHeight+"px",this.ta.value=n,this.ta.style.visibility="visible",this.toggled=this.element,this.element.src=Slimey.imagesDir+this.name+"d.png",this.ta.focus())},SlimeySaveTool=function(e){var t=createImageButton("save",lang("save slideshow"),this);SlimeyTool.call(this,"save",t,e),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer",this.element.style.visibility="hidden"},SlimeySaveTool.prototype=new SlimeyTool,SlimeySaveTool.prototype.execute=function(){var e=this.slimey.filename;e?this.filenameChosen(e):getInput("Enter a filename:",this.filenameChosen,this,this.element)},SlimeySaveTool.prototype.filenameChosen=function(e){var t;this.slimey.filename=e,t=this.slimey.navigation.getSLIMContent(),this.slimey.slimContent=escapeSLIM(t),this.slimey.submitFile()},SlimeySaveTool.prototype.notifyActionPerformed=function(){this.slimey.editor.undoStack.isEmpty()?(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default",this.element.style.visibility="hidden"):(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer",this.element.style.visibility="hidden")},SlimeyPreviewTool=function(e){var t=createImageButton("preview",lang("preview slideshow"),this);SlimeyTool.call(this,"preview",t,e),this.element.style.visibility="hidden"},SlimeyPreviewTool.prototype=new SlimeyTool,SlimeyPreviewTool.prototype.execute=function(){var e=screen.height*.1,t=screen.width*.1,n=screen.width*.8,r=screen.height*.8;window.slimContent=this.slimey.navigation.getSLIMContent(),window.open(Slimey.rootDir+"slime.html","slimePreview","top="+e+",left="+t+",width="+n+",height="+r+",status=no,menubar=no,location=no,toolbar=no,scrollbars=no,directories=no,resizable=yes")},SlimeyAddSlideTool=function(e){var t=createImageButton("addslide",lang("add a new slide after the selected one"),this);SlimeyTool.call(this,"addslide",t,e)},SlimeyAddSlideTool.prototype=new SlimeyTool,SlimeyAddSlideTool.prototype.execute=function(){this.slimey.navigation.addNewSlide()},SlimeyDeleteSlideTool=function(e){var t=createImageButton("delslide",lang("delete the selected slide"),this);SlimeyTool.call(this,"delslide",t,e)},SlimeyDeleteSlideTool.prototype=new SlimeyTool,SlimeyDeleteSlideTool.prototype.execute=function(){this.slimey.navigation.deleteCurrentSlide()},SlimeyMoveSlideDownTool=function(e){var t=createImageButton("slidedown",lang("move the selected slide down one place"),this);SlimeyTool.call(this,"slidedown",t,e)},SlimeyMoveSlideDownTool.prototype=new SlimeyTool,SlimeyMoveSlideDownTool.prototype.execute=function(){this.slimey.navigation.moveSlideDown()},SlimeyMoveSlideUpTool=function(e){var t=createImageButton("slideup",lang("move the selected slide up one place"),this);SlimeyTool.call(this,"slideup",t,e)},SlimeyMoveSlideUpTool.prototype=new SlimeyTool,SlimeyMoveSlideUpTool.prototype.execute=function(){this.slimey.navigation.moveSlideUp()},Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,r,i,s,o,u,a="",f=0;e=Base64._utf8_encode(e);while(f<e.length)t=e.charCodeAt(f++),n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=t>>2,s=(t&3)<<4|n>>4,o=(n&15)<<2|r>>6,u=r&63,isNaN(n)?o=u=64:isNaN(r)&&(u=64),a=a+this._keyStr.charAt(i)+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u);return a},decode:function(e){var t,n,r,i,s,o,u,a="",f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)i=this._keyStr.indexOf(e.charAt(f++)),s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),t=i<<2|s>>4,n=(s&15)<<4|o>>2,r=(o&3)<<6|u,a+=String.fromCharCode(t),o!=64&&(a+=String.fromCharCode(n)),u!=64&&(a+=String.fromCharCode(r));return a=Base64._utf8_decode(a),a},_utf8_encode:function(e){var t,n,r;e=e.replace(/\r\n/g,"\n"),t="";for(n=0;n<e.length;n++)r=e.charCodeAt(n),r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128));return t},_utf8_decode:function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}},SlimeySaveToolBig=function(e){var t=createImageButtonText("save",lang("Save"),this,"filesave");SlimeyTool.call(this,"save",t,e),this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"},SlimeySaveToolBig.prototype=new SlimeyTool,SlimeySaveToolBig.prototype.execute=function(){var e=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"Save","<arg1>"+Base64.encode(e)+"</arg1>")},SlimeySaveToolBigAs=function(e){var t=createImageButtonText("save",lang("Save as"),this,"filesaveas");SlimeyTool.call(this,"save",t,e),this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"},SlimeySaveToolBigAs.prototype=new SlimeyTool,SlimeySaveToolBigAs.prototype.execute=function(){var e=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"SaveAs","<arg1>"+Base64.encode(e)+"</arg1>")},SlimeyOpenBig=function(e){var t=createImageButtonText("open",lang("Open"),this,"fileopen");SlimeyTool.call(this,"open",t,e),this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"},SlimeyOpenBig.prototype=new SlimeyTool,SlimeyOpenBig.prototype.execute=function(){var e=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"openFile","")},SlimeyNewBig=function(e){var t=createImageButtonText("new",lang("New"),this,"filenew");SlimeyTool.call(this,"new",t,e),this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"},SlimeyNewBig.prototype=new SlimeyTool,SlimeyNewBig.prototype.execute=function(){var e=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"NewFile","")},SlimeyInsertImageToolBigEye=function(e){var t=createImageButtonText("open",lang("My Images"),this,"image");SlimeyTool.call(this,"insertImage",t,e)},SlimeyInsertImageToolBigEye.prototype=new SlimeyTool,SlimeyInsertImageToolBigEye.prototype.execute=function(){chooseImageEye(this.imageChosen,this,this.element)},SlimeyInsertImageToolBigEye.prototype.imageChosen=function(e,t,n){var r;e&&(r=new SlimeyInsertAction(this.slimey,"img"),r.getElement().src=e,r.getElement().style.width=t,r.getElement().style.height=n,this.slimey.editor.performAction(r))},SlimeyPreviewToolBig=function(e){var t=createImageButtonText("open",lang("Slideshow"),this,"eyePresentation");SlimeyTool.call(this,"preview",t,e)},SlimeyPreviewToolBig.prototype=new SlimeyTool,SlimeyPreviewToolBig.prototype.execute=function(){var e=screen.height*.1,t=screen.width*.1,n=screen.width*.8,r=screen.height*.8;window.slimContent=this.slimey.navigation.getSLIMContent(),window.open(Slimey.rootDir+"slime.html","slimePreview","top="+e+",left="+t+",width="+n+",height="+r+",status=no,menubar=no,location=no,toolbar=no,scrollbars=no,directories=no,resizable=yes")};