var eyeCatch={Holes:[],Enemies:[],Infos:[],AddHole:function(e,t,n,r,i,s,o){var u,a;a=document.createElement("div"),a.className=t,a.id=e+"_hole"+eyeCatch.Holes[e].length,a.style.left=r+"px",a.style.top=i+"px",a.style.width=s+"px",a.style.height=o+"px",document.getElementById(e+"_holes").appendChild(a),u=[],u.id=e+"_hole"+eyeCatch.Holes[e].length,u.message=n,eyeCatch.Holes[e].push(u)},AddEnemy:function(e,t,n,r,i,s,o,u,a){var f,l;l=document.createElement("div"),l.className=t,l.id=e+"_enemy"+eyeCatch.Enemies[e].length,l.style.left=r+"px",l.style.top=i+"px",l.style.width=s+"px",l.style.height=o+"px",document.getElementById(e+"_field").appendChild(l),f=[],f.id=e+"_enemy"+eyeCatch.Enemies[e].length,f.message=n,f.movex=u,f.movey=a,eyeCatch.Enemies[e].push(f)},CreateField:function(id,father,messageBox,className,speed,left,top,width,height){var fieldDiv,holesDiv;eyeCatch.Holes[id]=[],eyeCatch.Enemies[id]=[],eyeCatch.Infos[id]=[],eyeCatch.Infos[id].messageBox=messageBox,eyeCatch.Infos[id].round=0,eyeCatch.Infos[id].speed=[],eyeCatch.Infos[id].speed.current=0,eyeCatch.Infos[id].speed.increase=eval(speed),eyeCatch.Infos[id].starttime=0,fieldDiv=document.createElement("div"),fieldDiv.className=className,fieldDiv.id=id+"_field",fieldDiv.style.left=left+"px",fieldDiv.style.top=top+"px",fieldDiv.style.width=width+"px",fieldDiv.style.height=height+"px",document.getElementById(father).appendChild(fieldDiv),holesDiv=document.createElement("div"),holesDiv.id=id+"_holes",document.getElementById(id+"_field").appendChild(holesDiv)},CreatePlayer:function(e,t,n,r,i,s){var o;eyeCatch.Infos[e].left=n,eyeCatch.Infos[e].top=r,eyeCatch.Infos[e].width=i,eyeCatch.Infos[e].height=s,o=document.createElement("div"),o.className=t,o.id=e+"_player",o.style.left=n+"px",o.style.top=r+"px",o.style.width=i+"px",o.style.height=s+"px",document.getElementById(e+"_field").appendChild(o),xEnableDrag(e+"_player",function(){eyeCatch.Start(e)},function(t,n,r){eyeCatch.OnDrag(e,n,r)})},HasPoint:function(e,t,n,r,i){var s,o,u,a;return s=xLeft(e),o=xTop(e),u=xWidth(e),a=xHeight(e),t<s||t>s+u||n<o||n>o+a?t<s||t>s+u||n+i<o||n+i>o+a?t+r<s||t+r>s+u||n<o||n>o+a?t+r<s||t+r>s+u||n+i<o||n+i>o+a?!1:!0:!0:!0:!0},MoveEnemies:function(e,t){var n,r,i;if(eyeCatch.Infos[e].round||t){for(n=eyeCatch.Enemies[e].length-1;n>-1;n-=1)eyeCatch.MoveEnemy(e,n);eyeCatch.Infos[e].speed.increase[eyeCatch.Infos[e].round]?(i=Number(eyeCatch.Infos[e].speed.increase[eyeCatch.Infos[e].round][0]),eyeCatch.Infos[e].speed.current=i):i=eyeCatch.Infos[e].speed.current,eyeCatch.Infos[e].round+=1,r=document.getElementById(e+"_player");if(r)for(n=eyeCatch.Enemies[e].length-1;n>-1;n-=1)eyeCatch.HasPoint(eyeCatch.Enemies[e][n].id,eyeCatch.Infos[e].left,eyeCatch.Infos[e].top,eyeCatch.Infos[e].width,eyeCatch.Infos[e].height)&&(xDisableDrag(r),r.parentNode.removeChild(r),document.getElementById(eyeCatch.Infos[e].messageBox).innerHTML=eyeCatch.Enemies[e][n].message.replace(/%s/g,(new Date.getTime-eyeCatch.Infos[e].starttime)/1e3));setTimeout(function(){eyeCatch.MoveEnemies(e,0)},i)}},MoveEnemy:function(e,t){var n,r,i,s,o;n=document.getElementById(eyeCatch.Enemies[e][t].id);if(n){i=xLeft(n),s=xTop(n),o=xWidth(n),r=xHeight(n);if(i>=xWidth(e+"_field")-o||i<=0)eyeCatch.Enemies[e][t].movex*=-1;if(s>=xHeight(e+"_field")-r||s<=0)eyeCatch.Enemies[e][t].movey*=-1;n.style.left=eyeCatch.Enemies[e][t].movex+i+"px",n.style.top=eyeCatch.Enemies[e][t].movey+s+"px"}},OnDrag:function(e,t,n){var r,i,s,o;s=document.getElementById(e+"_player");if(s){eyeCatch.Infos[e].left+=t,eyeCatch.Infos[e].top+=n,eyeCatch.Infos[e].left<0&&(eyeCatch.Infos[e].left=0),o=xWidth(e+"_field")-eyeCatch.Infos[e].width,eyeCatch.Infos[e].left>o&&(eyeCatch.Infos[e].left=o),eyeCatch.Infos[e].top<0&&(eyeCatch.Infos[e].top=0),r=xHeight(e+"_field")-eyeCatch.Infos[e].height,eyeCatch.Infos[e].top>r&&(eyeCatch.Infos[e].top=r),s.style.left=eyeCatch.Infos[e].left+"px",s.style.top=eyeCatch.Infos[e].top+"px";for(i=eyeCatch.Holes[e].length-1;i>-1;i-=1)eyeCatch.HasPoint(eyeCatch.Holes[e][i].id,eyeCatch.Infos[e].left,eyeCatch.Infos[e].top,eyeCatch.Infos[e].width,eyeCatch.Infos[e].height)&&(xDisableDrag(s),s.parentNode.removeChild(s),document.getElementById(eyeCatch.Infos[e].messageBox).innerHTML=eyeCatch.Holes[e][i].message.replace(/%s/g,(new Date.getTime-eyeCatch.Infos[e].starttime)/1e3))}},Remove:function(e){eyeCatch.Holes[e]=[],eyeCatch.Enemies[e]=[],eyeCatch.Infos[e]=[];var t=document.getElementById(e+"_field");t&&t.parentNode.removeChild(t)},Start:function(e){eyeCatch.Infos[e].round||(eyeCatch.Infos[e].starttime=(new Date).getTime(),eyeCatch.MoveEnemies(e,1))}};