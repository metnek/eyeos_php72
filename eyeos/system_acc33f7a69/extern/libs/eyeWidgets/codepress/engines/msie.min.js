CodePress={scrolling:!1,autocomplete:!0,initialize:function(){if(typeof editor=="undefined"&&!arguments[0])return;chars="|32|46|62|",cc=" ",editor=document.getElementsByTagName("pre")[0],editor.contentEditable="true",document.getElementsByTagName("body")[0].onfocus=function(){editor.focus()},document.attachEvent("onkeydown",this.metaHandler),document.attachEvent("onkeypress",this.keyHandler),window.attachEvent("onscroll",function(){CodePress.scrolling||setTimeout(function(){CodePress.syntaxHighlight("scroll")},1)}),completeChars=this.getCompleteChars(),completeEndingChars=this.getCompleteEndingChars(),setTimeout(function(){window.scroll(0,0)},50)},keyHandler:function(e){charCode=e.keyCode,fromChar=String.fromCharCode(charCode),completeEndingChars.indexOf("|"+fromChar+"|")==-1&&completeChars.indexOf("|"+fromChar+"|")==-1||!CodePress.autocomplete?(chars.indexOf("|"+charCode+"|")!=-1||charCode==13)&&CodePress.syntaxHighlight("generic"):CodePress.completeEnding(fromChar)||CodePress.complete(fromChar)},metaHandler:function(e){keyCode=e.keyCode,keyCode==9||e.tabKey?CodePress.snippets():keyCode!=122&&keyCode!=121&&keyCode!=90||!e.ctrlKey?keyCode==34||keyCode==33?(self.scrollBy(0,keyCode==34?200:-200),e.returnValue=!1):keyCode==46||keyCode==8?CodePress.actions.history[CodePress.actions.next()]=editor.innerHTML:(e.ctrlKey||e.metaKey)&&e.shiftKey&&keyCode!=90?(CodePress.shortcuts(keyCode),e.returnValue=!1):keyCode==86&&e.ctrlKey&&(window.clipboardData.setData("Text",window.clipboardData.getData("Text").replace(/\t/g," ")),top.setTimeout(function(){CodePress.syntaxHighlight("paste")},10)):(keyCode==121||e.shiftKey?CodePress.actions.redo():CodePress.actions.undo(),e.returnValue=!1)},findString:function(){range=self.document.body.createTextRange(),range.findText(cc)&&(range.select(),range.text="")},split:function(e,t){return t=="scroll"?(this.scrolling=!0,e):(this.scrolling=!1,mid=e.indexOf(cc),mid-2e3<0?(ini=0,end=4e3):mid+2e3>e.length?(ini=e.length-4e3,end=e.length):(ini=mid-2e3,end=mid+2e3),e=e.substring(ini,end),e.substring(e.indexOf("<P>"),e.lastIndexOf("</P>")+4))},syntaxHighlight:function(e){e!="init"&&(document.selection.createRange().text=cc),o=editor.innerHTML,e=="paste"&&(o=o.replace(/<BR>/g,"\r\n"),o=o.replace(/\u2008/g,"	")),o=o.replace(/<P>/g,"\n"),o=o.replace(/<\/P>/g,"\r"),o=o.replace(/<.*?>/g,""),o=o.replace(/&nbsp;/g,""),o="<PRE><P>"+o+"</P></PRE>",o=o.replace(/\n\r/g,"<P></P>"),o=o.replace(/\n/g,"<P>"),o=o.replace(/\r/g,"</P>"),o=o.replace(/<P>(<P>)+/,"<P>"),o=o.replace(/<\/P>(<\/P>)+/,"</P>"),o=o.replace(/<P><\/P>/g,"<P><BR/></P>"),x=z=this.split(o,e),arguments[1]&&arguments[2]&&(x=x.replace(arguments[1],arguments[2]));for(i=0;i<Language.syntax.length;i++)x=x.replace(Language.syntax[i].input,Language.syntax[i].output);editor.innerHTML=this.actions.history[this.actions.next()]=e=="scroll"?x:o.replace(z,x),e!="init"&&this.findString()},snippets:function(){var e,t,n,r=Language.snippets,i=this.getLastWord();for(e=0;e<r.length;e++)r[e].input==i&&(t=r[e].output.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t.indexOf("$0")<0?t+=cc:t=t.replace(/\$0/,cc),t=t.replace(/\n/g,"</P><P>"),n=RegExp(i+cc,"gi"),this.syntaxHighlight("snippets",n,t))},readOnly:function(){editor.contentEditable=arguments[0]?"false":"true"},complete:function(e){var t,n,r,i=Language.complete;for(t=0;t<i.length;t++)i[t].input==e&&(n=RegExp("\\"+e+cc),r=i[t].output.replace(/\$0/g,cc),setTimeout(function(){CodePress.syntaxHighlight("complete",n,r)},0))},getCompleteChars:function(){var e,t="";for(e=0;e<Language.complete.length;e++)t+="|"+Language.complete[e].input;return t+"|"},getCompleteEndingChars:function(){var e,t="";for(e=0;e<Language.complete.length;e++)t+="|"+Language.complete[e].output.charAt(Language.complete[e].output.length-1);return t+"|"},completeEnding:function(e){var t,n=document.selection.createRange();try{n.moveEnd("character",1)}catch(r){return!1}return t=n.text,n.moveEnd("character",-1),t!=e?!1:(n.moveEnd("character",1),n.text="",!0)},shortcuts:function(){var e,t=arguments[0];t==13?t="[enter]":t==32?t="[space]":t="["+String.fromCharCode(keyCode).toLowerCase()+"]";for(e=0;e<Language.shortcuts.length;e++)Language.shortcuts[e].input==t&&this.insertCode(Language.shortcuts[e].output,!1)},getLastWord:function(){var e=CodePress.getRangeAndCaret();return words=e[0].substring(e[1]-40,e[1]),words=words.replace(/[\s\n\r\);\W]/g,"\n").split("\n"),words[words.length-1].replace(/[\W]/gi,"").toLowerCase()},getRangeAndCaret:function(){var e=document.selection.createRange(),t=Math.abs(e.moveStart("character",-1e6)+1);return e=this.getCode(),e=e.replace(/\n\r/gi,"  "),e=e.replace(/\n/gi,""),[e+"",t]},insertCode:function(e,t){var n,r="",i="";t?i=e:r=e,typeof document.selection!="undefined"&&(n=document.selection.createRange(),n.text=r+i,n=document.selection.createRange(),n.move("character",-i.length),n.select())},getCode:function(){var e=editor.innerHTML;return e=e.replace(/<br>/g,"\n"),e=e.replace(/<\/p>/gi,"\r"),e=e.replace(/<p>/i,""),e=e.replace(/<p>/gi,"\n"),e=e.replace(/&nbsp;/gi,""),e=e.replace(/\u2009/g,""),e=e.replace(/<.*?>/g,""),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&amp;/gi,"&"),e},setCode:function(){var e=arguments[0];e=e.replace(/\u2009/gi,""),e=e.replace(/&/gi,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),editor.innerHTML="<pre>"+e+"</pre>"},actions:{pos:-1,history:[],undo:function(){editor.innerHTML.indexOf(cc)==-1&&(document.selection.createRange().text=cc,this.history[this.pos]=editor.innerHTML),this.pos--,typeof this.history[this.pos]=="undefined"&&this.pos++,editor.innerHTML=this.history[this.pos],CodePress.findString()},redo:function(){this.pos++,typeof this.history[this.pos]=="undefined"&&this.pos--,editor.innerHTML=this.history[this.pos],CodePress.findString()},next:function(){return this.pos>20&&(this.history[this.pos-21]=undefined),++this.pos}}},Language={},window.attachEvent("onload",function(){CodePress.initialize("new")});