(function(){var e=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(t){function r(t){var n=[];return e(t.split(/,/),function(e){n.push({title:"advlist."+(e=="default"?"def":e.replace(/-/g,"_")),styles:{listStyleType:e=="default"?"":e}})}),n}var n=this;n.editor=t,n.numlist=t.getParam("advlist_number_styles")||r("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"),n.bullist=t.getParam("advlist_bullet_styles")||r("default,circle,disc,square"),tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)&&(n.isIE7=!0)},createControl:function(t,n){var r,i,s=this,o=s.editor;if(t=="numlist"||t=="bullist"){s[t][0].title=="advlist.def"&&(i=s[t][0]);function u(t,n){var r=!0;return e(n.styles,function(e,n){if(o.dom.getStyle(t,n)!=e)return r=!1,!1}),r}function a(){var e=o.dom,n=o.selection,r=e.getParent(n.getNode(),"ol,ul");(!r||r.nodeName==(t=="bullist"?"OL":"UL")||u(r,i))&&o.execCommand(t=="bullist"?"InsertUnorderedList":"InsertOrderedList"),i&&(r=e.getParent(n.getNode(),"ol,ul"),r&&(e.setStyles(r,i.styles),r.removeAttribute("data-mce-style"))),o.focus()}return r=n.createSplitButton(t,{title:"advanced."+t+"_desc","class":"mce_"+t,onclick:function(){a()}}),r.onRenderMenu.add(function(n,r){r.onHideMenu.add(function(){s.bookmark&&(o.selection.moveToBookmark(s.bookmark),s.bookmark=0)}),r.onShowMenu.add(function(){var n,a=o.dom,f=a.getParent(o.selection.getNode(),"ol,ul");if(f||i)n=s[t],e(r.items,function(t){var r=!0;t.setSelected(0),f&&!t.isDisabled()&&(e(n,function(e){if(e.id==t.id&&!u(f,e))return r=!1,!1}),r&&t.setSelected(1))}),f||r.items[i.id].setSelected(1);o.focus(),tinymce.isIE&&(s.bookmark=o.selection.getBookmark(1))}),r.add({id:o.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:!0}).setDisabled(1),e(s[t],function(e){if(s.isIE7&&e.styles.listStyleType=="lower-greek")return;e.id=o.dom.uniqueId(),r.add({id:e.id,title:e.title,onclick:function(){i=e,a()}})})}),r}},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)})();