(function(){var e=tinymce.DOM,t=tinymce.dom.Event,n=tinymce.each,r=tinymce.explode;tinymce.create("tinymce.plugins.TabFocusPlugin",{init:function(i){function s(e,n){if(n.keyCode===9)return t.cancel(n)}function o(i,s){function l(t){function r(e){return e.nodeName==="BODY"||e.type!="hidden"&&e.style.display!="none"&&e.style.visibility!="hidden"&&r(e.parentNode)}function s(e){return e.attributes.tabIndex.specified||e.nodeName=="INPUT"||e.nodeName=="TEXTAREA"}function f(){return tinymce.isIE6||tinymce.isIE7}function l(e){return(!f()||s(e))&&e.getAttribute("tabindex")!="-1"&&r(e)}a=e.select(":input:enabled,*[tabindex]"),n(a,function(e,t){if(e.id==i.id)return o=t,!1});if(t>0){for(u=o+1;u<a.length;u++)if(l(a[u]))return a[u]}else for(u=o-1;u>=0;u--)if(l(a[u]))return a[u];return null}var o,u,a,f;if(s.keyCode===9){f=r(i.getParam("tab_focus",i.getParam("tabfocus_elements",":prev,:next"))),f.length==1&&(f[1]=f[0],f[0]=":prev"),s.shiftKey?f[0]==":prev"?a=l(-1):a=e.get(f[0]):f[1]==":next"?a=l(1):a=e.get(f[1]);if(a)return a.id&&(i=tinymce.get(a.id||a.name))?i.focus():window.setTimeout(function(){tinymce.isWebKit||window.focus(),a.focus()},10),t.cancel(s)}}i.onKeyUp.add(s),tinymce.isGecko?(i.onKeyPress.add(o),i.onKeyDown.add(s)):i.onKeyDown.add(o)},getInfo:function(){return{longname:"Tabfocus",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/tabfocus",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("tabfocus",tinymce.plugins.TabFocusPlugin)})();