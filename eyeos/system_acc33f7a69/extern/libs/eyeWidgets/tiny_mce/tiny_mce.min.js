function smoothScale(e,t,n){var r=document.getElementById(t),i=xWidth(r);e<n?i>e?(i-=50,i<e&&(i=e),r.style.width=i+"px",setTimeout("smoothScale("+e+",'"+t+"',"+n+");",100)):enableShadow(t):i<e?(i+=50,i>e&&(i=e),r.style.width=i+"px",setTimeout("smoothScale("+e+",'"+t+"',"+n+");",100)):enableShadow(t)}function disableEdShadow(e){document.getElementById(e+"_shadowleft").parentNode.removeChild(document.getElementById(e+"_shadowleft")),document.getElementById(e+"_shadowright").parentNode.removeChild(document.getElementById(e+"_shadowright")),document.getElementById(e+"_shadowleftcorner").parentNode.removeChild(document.getElementById(e+"_shadowleftcorner")),document.getElementById(e+"_shadowrightcorner").parentNode.removeChild(document.getElementById(e+"_shadowrightcorner")),document.getElementById(e+"_shadowtop").parentNode.removeChild(document.getElementById(e+"_shadowtop"))}function enableShadow(e){var t,n,r,i,s,o;if(document.getElementById(e+"_shadowleft"))return;t=document.createElement("div"),n=document.getElementById(e).parentNode.parentNode.parentNode.parentNode,r=document.getElementById(e),t.style.width="8px",t.style.backgroundImage="url(index.php?extern=libs/eyeWidgets/tiny_mce/themes/advanced/img/left_sh.png)",t.style.height=xHeight(r)-6+"px",t.style.top="109px",t.style.position="absolute",t.setAttribute("id",e+"_shadowleft"),i=xWidth(r.parentNode),i-=xWidth(r),i/=2,t.style.left=i-8+"px",n.appendChild(t),s=document.createElement("div"),s.style.width="14px",s.style.height="14px",s.setAttribute("id",e+"_shadowleftcorner"),s.style.backgroundImage="url(index.php?extern=libs/eyeWidgets/tiny_mce/themes/advanced/img/cornerleft_sh.png)",s.style.position="absolute",s.style.top="95px",s.style.left=i-8+"px",n.appendChild(s),t=document.createElement("div"),t.style.width="8px",t.style.backgroundImage="url(index.php?extern=libs/eyeWidgets/tiny_mce/themes/advanced/img/right_sh.png)",t.style.height=xHeight(r)-6+"px",t.style.top="109px",t.style.position="absolute",t.setAttribute("id",e+"_shadowright"),i=xWidth(r.parentNode),i-=xWidth(r),i/=2,t.style.left=i+xWidth(r)+"px",n.appendChild(t),s=document.createElement("div"),s.style.width="14px",s.style.height="14px",s.style.backgroundImage="url(index.php?extern=libs/eyeWidgets/tiny_mce/themes/advanced/img/cornerright_sh.png)",s.style.position="absolute",s.setAttribute("id",e+"_shadowrightcorner"),s.style.top="95px",s.style.left=i+xWidth(r)-6+"px",n.appendChild(s),o=document.createElement("div"),o.style.width=xWidth(r)-12+"px",o.style.left=i+6+"px",o.style.top="95px",o.style.height="8px",o.style.position="absolute",o.setAttribute("id",e+"_shadowtop"),o.style.backgroundImage="url(index.php?extern=libs/eyeWidgets/tiny_mce/themes/advanced/img/top_sh.png)",n.appendChild(o)}function disableShadow(){}(function(e){var t,n=/^\s*|\s*$/g,r="B".replace(/A(.)|B/,"$1")==="$1",i={majorVersion:"3",minorVersion:"4.9",releaseDate:"2012-02-23",_init:function(){function c(e){return e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(t.suffix="_src"),(f=e.src.indexOf("?"))!=-1&&(t.query=e.src.substring(f+1)),t.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),a&&t.baseURL.indexOf("://")==-1&&t.baseURL.indexOf("/")!==0&&(t.baseURL=a+t.baseURL),t.baseURL):null}var t=this,n=document,r=navigator,i=r.userAgent,s,o,u,a,f,l;t.isOpera=e.opera&&opera.buildNumber,t.isWebKit=/WebKit/.test(i),t.isIE=!t.isWebKit&&!t.isOpera&&/MSIE/gi.test(i)&&/Explorer/gi.test(r.appName),t.isIE6=t.isIE&&/MSIE [56]/.test(i),t.isIE7=t.isIE&&/MSIE [7]/.test(i),t.isIE8=t.isIE&&/MSIE [8]/.test(i),t.isIE9=t.isIE&&/MSIE [9]/.test(i),t.isGecko=!t.isWebKit&&/Gecko/.test(i),t.isMac=i.indexOf("Mac")!=-1,t.isAir=/adobeair/i.test(i),t.isIDevice=/(iPad|iPhone)/.test(i),t.isIOS5=t.isIDevice&&i.match(/AppleWebKit\/(\d*)/)[1]>=534;if(e.tinyMCEPreInit){t.suffix=tinyMCEPreInit.suffix,t.baseURL=tinyMCEPreInit.base,t.query=tinyMCEPreInit.query;return}t.suffix="",o=n.getElementsByTagName("base");for(s=0;s<o.length;s++)if(l=o[s].href)/^https?:\/\/[^\/]+$/.test(l)&&(l+="/"),a=l?l.match(/.*\//)[0]:"";o=n.getElementsByTagName("script");for(s=0;s<o.length;s++)if(c(o[s]))return;u=n.getElementsByTagName("head")[0];if(u){o=u.getElementsByTagName("script");for(s=0;s<o.length;s++)if(c(o[s]))return}return},is:function(e,n){return n?n=="array"&&e.hasOwnProperty&&e instanceof Array?!0:typeof e==n:e!==t},makeMap:function(e,t,n){var r;e=e||[],t=t||",",typeof e=="string"&&(e=e.split(t)),n=n||{},r=e.length;while(r--)n[e[r]]={};return n},each:function(e,n,r){var i,s;if(!e)return 0;r=r||e;if(e.length!==t){for(i=0,s=e.length;i<s;i++)if(n.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return 0;return 1},map:function(e,t){var n=[];return i.each(e,function(e){n.push(t(e))}),n},grep:function(e,t){var n=[];return i.each(e,function(e){(!t||t(e))&&n.push(e)}),n},inArray:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},extend:function(e,n){var r,s,o=arguments;for(r=1,s=o.length;r<s;r++)n=o[r],i.each(n,function(n,r){n!==t&&(e[r]=n)});return e},trim:function(e){return(e?""+e:"").replace(n,"")},create:function(e,t,n){var r=this,i,s,o,u,a,f=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],s=r.createNS(e[3].replace(/\.\w+$/,""),n);if(s[o])return;if(e[2]=="static"){s[o]=t,this.onCreate&&this.onCreate(e[2],e[3],s[o]);return}t[o]||(t[o]=function(){},f=1),s[o]=t[o],r.extend(s[o].prototype,t),e[5]&&(i=r.resolve(e[5]).prototype,u=e[5].match(/\.(\w+)$/i)[1],a=s[o],f?s[o]=function(){return i[u].apply(this,arguments)}:s[o]=function(){return this.parent=i[u],a.apply(this,arguments)},s[o].prototype[o]=s[o],r.each(i,function(e,t){s[o].prototype[t]=i[t]}),r.each(t,function(e,t){i[t]?s[o].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=o&&(s[o].prototype[t]=e)})),r.each(t["static"],function(e,t){s[o][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],s[o].prototype)},walk:function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),i.each(e,function(e,o){if(t.call(r,e,o,n)===!1)return!1;i.walk(e,t,n,r)}))},createNS:function(t,n){var r,i;n=n||e,t=t.split(".");for(r=0;r<t.length;r++)i=t[r],n[i]||(n[i]={}),n=n[i];return n},resolve:function(t,n){var r,i;n=n||e,t=t.split(".");for(r=0,i=t.length;r<i;r++){n=n[t[r]];if(!n)break}return n},addUnload:function(t,n){var r=this;t={func:t,scope:n||this};if(!r.unloads){function i(){var t=r.unloads,n,o;if(t){for(o in t)n=t[o],n&&n.func&&n.func.call(n.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",s),e.detachEvent("onunload",i)):e.removeEventListener&&e.removeEventListener("unload",i,!1),r.unloads=n=t=w=i=0,e.CollectGarbage&&CollectGarbage()}}function s(){var t=document;if(t.readyState=="interactive"){function n(){t.detachEvent("onstop",n),i&&i(),t=0}t&&t.attachEvent("onstop",n),e.setTimeout(function(){t&&t.detachEvent("onstop",n)},0)}}e.attachEvent?(e.attachEvent("onunload",i),e.attachEvent("onbeforeunload",s)):e.addEventListener&&e.addEventListener("unload",i,!1),r.unloads=[t]}else r.unloads.push(t);return t},removeUnload:function(e){var t=this.unloads,n=null;return i.each(t,function(r,i){if(r&&r.func==e)return t.splice(i,1),n=e,!1}),n},explode:function(e,t){return e?i.map(e.split(t||","),i.trim):e},_addVer:function(e){var t;return this.query?(t=(e.indexOf("?")==-1?"?":"&")+this.query,e.indexOf("#")==-1?e+t:e.replace("#",t+"#")):e},_replace:function(e,n,i){return r?i.replace(e,function(){var e=n,r=arguments,i;for(i=0;i<r.length-2;i++)r[i]===t?e=e.replace(RegExp("\\$"+i,"g"),""):e=e.replace(RegExp("\\$"+i,"g"),r[i]);return e}):i.replace(e,n)}};i._init(),e.tinymce=e.tinyMCE=i})(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){return this.listeners.unshift({cb:e,scope:t||this.scope}),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,function(r,i){if(e==r.cb)return n=e,t.splice(i,1),!1}),n},dispatch:function(){var e,t,n,r=arguments,i=this.listeners;for(t=0;t<i.length;t++){n=i[t],e=n.cb.apply(n.scope,r.length>0?r:[n.scope]);if(e===!1)break}return e}}),function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var r,i,s=this;t=tinymce.trim(t),n=s.settings=n||{};if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){s.source=t;return}t.indexOf("/")===0&&t.indexOf("//")!==0&&(t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t),/^[\w-]*:?\/\//.test(t)||(i=n.base_uri?n.base_uri.path:(new tinymce.util.URI(location.href)).directory,t=(n.base_uri&&n.base_uri.protocol||"http")+"://mce_host"+s.toAbsPath(i,t)),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var r=t[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),s[e]=r});if(r=n.base_uri){s.protocol||(s.protocol=r.protocol),s.userInfo||(s.userInfo=r.userInfo),!s.port&&s.host=="mce_host"&&(s.port=r.port);if(!s.host||s.host=="mce_host")s.host=r.host;s.source=""}},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;return e==="./"?e:(e=new tinymce.util.URI(e,{base_uri:n}),e.host!="mce_host"&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol?e.getURI():(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t))},toAbsolute:function(e){return e.indexOf(tinymce.baseURL)===0?e:tinymce.baseURL+"/"+e},toAbsolute_:function(e,t){var e=new tinymce.util.URI(e,{base_uri:this});return e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,r,i,s=0,o="";e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/");if(e.length>=n.length)for(r=0,i=e.length;r<i;r++)if(r>=n.length||e[r]!=n[r]){s=r+1;break}if(e.length<n.length)for(r=0,i=n.length;r<i;r++)if(r>=e.length||e[r]!=n[r]){s=r+1;break}if(s==1)return t;for(r=0,i=e.length-(s-1);r<i;r++)o+="../";for(r=s-1,i=n.length;r<i;r++)r!=s-1?o+="/"+n[r]:o+=n[r];return o},toAbsPath:function(t,n){var r,i,s=0,o=[],u=/\/$/.test(n)?"/":"";t=t.split("/"),n=n.split("/"),e(t,function(e){e&&o.push(e)}),t=o;for(r=n.length-1,o=[];r>=0;r--){if(n[r].length==0||n[r]==".")continue;if(n[r]==".."){s++;continue}if(s>0){s--;continue}o.push(n[r])}return r=t.length-s,r>0?i=t.slice(0,r).join("/")+"/"+o.reverse().join("/"):i=o.reverse().join("/"),i.indexOf("/")!==0&&(i="/"+i),u&&i.lastIndexOf("/")!==i.length-1&&(i+=u),i},getURI:function(e){var t,n=this;if(!n.source||e)t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t;return n.source}})}(),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n,r=this.get(t);return r&&e(r.split("&"),function(e){e=e.split("="),n=n||{},n[unescape(e[0])]=unescape(e[1])}),n},setHash:function(t,n,r,i,s,o){var u="";e(n,function(e,t){u+=(u?"&":"")+escape(t)+"="+escape(e)}),this.set(t,u,r,i,s,o)},get:function(e){var t,n,r=document.cookie,i=e+"=";if(!r)return;n=r.indexOf("; "+i);if(n==-1){n=r.indexOf(i);if(n!=0)return null}else n+=2;return t=r.indexOf(";",n),t==-1&&(t=r.length),unescape(r.substring(n+i.length,t))},set:function(e,t,n,r,i,s){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(r?"; path="+escape(r):"")+(i?"; domain="+i:"")+(s?"; secure":"")},remove:function(e,t){var n=new Date;n.setTime(n.getTime()-1e3),this.set(e,"",n,t,n)}})}(),function(){function serialize(e,t){var n,r,i;t=t||'"';if(e==null)return"null";i=typeof e;if(i=="string")return r="\bb	t\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return t==='"'&&e==="'"?e:(n=r.indexOf(i),n+1?"\\"+r.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+t;if(i=="object"){if(e.hasOwnProperty&&e instanceof Array){for(n=0,r="[";n<e.length;n++)r+=(n>0?",":"")+serialize(e[n],t);return r+"]"}r="{";for(n in e)e.hasOwnProperty(n)&&(r+=typeof e[n]!="function"?(r.length>1?","+t:t)+n+t+":"+serialize(e[n],t):"");return r+"}"}return""+e}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(e){function s(e){t=0;try{t=new ActiveXObject(e)}catch(n){}return t}var t,n,r=window,i=0;e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",t=r.XMLHttpRequest?new XMLHttpRequest:s("Microsoft.XMLHTTP")||s("Msxml2.XMLHTTP");if(t){t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(e.data);function o(){!e.async||t.readyState==4||i++>1e4?(e.success&&i<1e4&&t.status==200?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,i>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):r.setTimeout(o,10)}if(!e.async)return o();n=r.setTimeout(o,10)}}}),function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t),this.count=0},send:function(r){var i=r.error,s=r.success;r=e(this.settings,r),r.success=function(e,n){e=t.parse(e),typeof e=="undefined"&&(e={error:"JSON Parse error."}),e.error?i.call(r.error_scope||r.scope,e.error,n):s.call(r.success_scope||r.scope,e.result)},r.error=function(e,t){i&&i.call(r.error_scope||r.scope,e,t)},r.data=t.serialize({id:r.id||"c"+this.count++,method:r.method,params:r.params}),r.content_type="application/json",n.send(r)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(e){e.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey}}}(tinymce),function(e){function i(i){var s=i.dom,o=i.selection;i.onKeyDown.add(function(i,u){var a,f,l,c,h=u.keyCode==r;if((h||u.keyCode==n)&&!t.modifierPressed(u)){u.preventDefault(),a=o.getRng(),f=s.getParent(a.startContainer,s.isBlock),h&&(f=s.getNext(f,s.isBlock));if(f){l=f.firstChild;while(l&&l.nodeType==3&&l.nodeValue.length==0)l=l.nextSibling;l&&l.nodeName==="SPAN"&&(c=l.cloneNode(!1))}i.getDoc().execCommand(h?"ForwardDelete":"Delete",!1,null),f=s.getParent(a.startContainer,s.isBlock),e.each(s.select("span.Apple-style-span,font.Apple-style-span",f),function(e){var t=o.getBookmark();c?s.replace(c.cloneNode(!1),e,!0):s.remove(e,!0),o.moveToBookmark(t)})}})}function s(e){function t(t){var n=e.dom.create("body"),r=t.cloneContents();return n.appendChild(r),e.selection.serializer.serialize(n,{format:"html"})}function i(n){var r,i=t(n),s=e.dom.createRng();return s.selectNode(e.getBody()),r=t(s),i===r}e.onKeyDown.addToTop(function(e,t){var s,o=t.keyCode;if(o==r||o==n)s=e.selection.getRng(!0),!s.collapsed&&i(s)&&(e.setContent("",{format:"raw"}),e.nodeChanged(),t.preventDefault())})}function o(e){e.dom.bind(e.getDoc(),"focusin",function(){e.selection.setRng(e.selection.getRng())})}function u(t){t.onKeyDown.add(function(t,r){var i,s;r.keyCode===n&&t.selection.isCollapsed()&&t.selection.getRng(!0).startOffset===0&&(i=t.selection.getNode(),s=i.previousSibling,s&&s.nodeName&&s.nodeName.toLowerCase()==="hr"&&(t.dom.remove(s),e.dom.Event.cancel(r)))})}function a(e){Range.prototype.getClientRects||e.onMouseDown.add(function(e,t){var n;t.target.nodeName==="HTML"&&(n=e.getBody(),n.blur(),setTimeout(function(){n.focus()},0))})}function f(e){e.onClick.add(function(e,t){t=t.target,/^(IMG|HR)$/.test(t.nodeName)&&e.selection.getSel().setBaseAndExtent(t,0,t,1),t.nodeName=="A"&&e.dom.hasClass(t,"mceItemAnchor")&&e.selection.select(t),e.nodeChanged()})}function l(e){e.onKeyDown.add(function(e,n){function r(e){var t=e.selection.getNode(),n="h1,h2,h3,h4,h5,h6";return e.dom.is(t,n)||e.dom.getParent(t,n)!==null}n.keyCode===t.ENTER&&!t.modifierPressed(n)&&r(e)&&setTimeout(function(){var t=e.selection.getNode();e.dom.is(t,"p")&&(e.dom.setAttrib(t,"style",null),e.execCommand("mceCleanup"))},0)})}function c(t){var n,r;t.dom.bind(t.getDoc(),"selectionchange",function(){r&&(clearTimeout(r),r=0),r=window.setTimeout(function(){var r=t.selection.getRng();if(!n||!e.dom.RangeUtils.compareRanges(r,n))t.nodeChanged(),n=r},50)})}function h(){document.body.setAttribute("role","application")}var t=e.VK,n=t.BACKSPACE,r=t.DELETE;e.create("tinymce.util.Quirks",{Quirks:function(t){e.isWebKit&&(i(t),s(t),o(t),f(t),e.isIDevice&&c(t)),e.isIE&&(u(t),s(t),h(t),l(t)),e.isGecko&&(u(t),a(t))}})}(tinymce),function(e){function f(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||e}function l(e,t){var n,r,i,s={};if(e){e=e.split(","),t=t||10;for(n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),u[r]||(i="&"+e[n+1]+";",s[r]=i,s[i]=r);return s}}var t,n=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/[<>&\"\']/g,s=/&(#x|#)?([\w]+);/g,o={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},u={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},a={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};t=l("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e.html=e.html||{},e.html.Entities={encodeRaw:function(e,t){return e.replace(t?n:r,function(e){return u[e]||e})},encodeAllRaw:function(e){return(""+e).replace(i,function(e){return u[e]||e})},encodeNumeric:function(e,t){return e.replace(t?n:r,function(e){return e.length>1?"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";":u[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,i,s){return s=s||t,e.replace(i?n:r,function(e){return u[e]||s[e]||e})},getEncodeFunc:function(i,s){function a(e,t){return e.replace(t?n:r,function(e){return u[e]||s[e]||"&#"+e.charCodeAt(0)+";"||e})}function f(e,t){return o.encodeNamed(e,t,s)}var o=e.html.Entities;return s=l(s)||t,i=e.makeMap(i.replace(/\+/g,",")),i.named&&i.numeric?a:i.named?s?f:o.encodeNamed:i.numeric?o.encodeNumeric:o.encodeRaw},decode:function(e){return e.replace(s,function(e,n,r){return n?(r=parseInt(r,n.length===2?16:10),r>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(r&1023))):o[r]||String.fromCharCode(r)):a[e]||t[e]||f(e)})}}}(tinymce),tinymce.html.Styles=function(e,t){function c(e,t,n,r){function i(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var n,r,i,s=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,u=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,f=/rgb/,l={};e=e||{},i="\\\" \\' \\; \\: ; : ﻿".split(" ");for(r=0;r<i.length;r++)l[i[r]]="﻿"+r,l["﻿"+r]=i[r];return{toHex:function(e){return e.replace(s,c)},parse:function(t){function v(e,t){var n,r,i,s=h[e+"-top"+t];if(!s)return;n=h[e+"-right"+t];if(s!=n)return;r=h[e+"-bottom"+t];if(n!=r)return;i=h[e+"-left"+t];if(r!=i)return;h[e+t]=i,delete h[e+"-top"+t],delete h[e+"-right"+t],delete h[e+"-bottom"+t],delete h[e+"-left"+t]}function m(e){var t,n=h[e];if(!n||n.indexOf(" ")<0)return;n=n.split(" "),t=n.length;while(t--)if(n[t]!==n[0])return!1;return h[e]=n[0],!0}function g(e,t,n,r){if(!m(t))return;if(!m(n))return;if(!m(r))return;h[e]=h[t]+" "+h[n]+" "+h[r],delete h[t],delete h[n],delete h[r]}function y(e){return f=!0,l[e]}function b(e,t){return f&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return l[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}var n,r,i,f,h={},p=e.url_converter,d=e.url_converter_scope||this;if(t){t=t.replace(/\\[\"\';:\uFEFF]/g,y).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,y)});while(n=u.exec(t)){r=n[1].replace(a,"").toLowerCase(),i=n[2].replace(a,"");if(r&&i.length>0){if(r==="font-weight"&&i==="700")i="bold";else if(r==="color"||r==="background-color")i=i.toLowerCase();i=i.replace(s,c),i=i.replace(o,function(e,t,n,r,i,s){return i=i||s,i?(i=b(i),"'"+i.replace(/\'/g,"\\'")+"'"):(t=b(t||n||r),p&&(t=p.call(d,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}),h[r]=f?b(i,!0):i}u.lastIndex=n.index+n[0].length}v("border",""),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),g("border","border-width","border-style","border-color"),h.border==="medium none"&&delete h.border}return h},serialize:function(e,r){function u(r){var i,s,u,a=t.styles[r];if(a)for(i=0,s=a.length;i<s;i++)r=a[i],u=e[r],u!==n&&u.length>0&&(o+=(o.length>0?" ":"")+r+": "+u+";")}var i,s,o="";if(r&&t&&t.styles)u("*"),u(r);else for(i in e)s=e[i],s!==n&&s.length>0&&(o+=(o.length>0?" ":"")+i+": "+s+";");return o}}},function(e){function c(e,t){return e.split(t||",")}function h(e,t){function i(t){return t.replace(/[A-Z]+/g,function(t){return i(e[t])})}var n,r={};for(n in e)e.hasOwnProperty(n)&&(e[n]=i(e[n]));return i(t).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,t,n,i){n=c(n,"|"),r[t]={attributes:f(n),attributesOrder:n,children:f(i,"|",{"#comment":{}})}}),r}var t,n,r,i,s,o,u={},a={},f=e.makeMap,l=e.each;n="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",n=f(n,",",f(n.toUpperCase())),u=h({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),t=f("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),r=f("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),i=e.extend(f("td,th,iframe,video,audio,object"),r),s=f("pre,script,style,textarea"),o=f("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),e.html.Schema=function(h){function b(e){return RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function w(t){var n,r,i,s,o,u,a,l,h,p,d,v,g,w,E,S,x,T,N,C=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,k=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,L=/[*?+]/;if(t){t=c(t),m["@"]&&(S=m["@"].attributes,x=m["@"].attributesOrder);for(n=0,r=t.length;n<r;n++){o=C.exec(t[n]);if(o){w=o[1],h=o[2],E=o[3],l=o[4],v={},g=[],u={attributes:v,attributesOrder:g},w==="#"&&(u.paddEmpty=!0),w==="-"&&(u.removeEmpty=!0);if(S){for(T in S)v[T]=S[T];g.push.apply(g,x)}if(l){l=c(l,"|");for(i=0,s=l.length;i<s;i++){o=k.exec(l[i]);if(o){a={},d=o[1],p=o[2].replace(/::/g,":"),w=o[3],N=o[4],d==="!"&&(u.attributesRequired=u.attributesRequired||[],u.attributesRequired.push(p),a.required=!0);if(d==="-"){delete v[p],g.splice(e.inArray(g,p),1);continue}w&&(w==="="&&(u.attributesDefault=u.attributesDefault||[],u.attributesDefault.push({name:p,value:N}),a.defaultValue=N),w===":"&&(u.attributesForced=u.attributesForced||[],u.attributesForced.push({name:p,value:N}),a.forcedValue=N),w==="<"&&(a.validValues=f(N,"?"))),L.test(p)?(u.attributePatterns=u.attributePatterns||[],a.pattern=b(p),u.attributePatterns.push(a)):(v[p]||g.push(p),v[p]=a)}}}!S&&h=="@"&&(S=v,x=g),E&&(u.outputName=h,m[E]=u),L.test(h)?(u.pattern=b(h),y.push(u)):m[h]=u}}}}function E(e){m={},y=[],w(e),l(u,function(e,t){g[t]=e.children})}function S(e){var t=/^(~)?(.+)$/;e&&l(c(e),function(e){var r=t.exec(e),i=r[1]==="~",s=i?"span":"div",o=r[2];g[o]=g[s],a[o]=s,i||(n[o]={}),l(g,function(e){e[s]&&(e[o]=e[s])})})}function x(e){var t=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&l(c(e),function(e){var n,r,i=t.exec(e);i&&(r=i[1],r?n=g[i[2]]:n=g[i[2]]={"#comment":{}},n=g[i[2]],l(c(i[3],"|"),function(e){r==="-"?delete n[e]:n[e]={}}))})}function T(e){var t,n=m[e];if(n)return n;t=y.length;while(t--){n=y[t];if(n.pattern.test(e))return n}}var p,d,v=this,m={},g={},y=[];h=h||{},h.verify_html===!1&&(h.valid_elements="*[*]"),h.valid_styles&&(p={},l(h.valid_styles,function(t,n){p[n]=e.explode(t)})),d=h.whitespace_elements?f(h.whitespace_elements):s,h.valid_elements?E(h.valid_elements):(l(u,function(e,t){m[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},g[t]=e.children}),l(c("strong/b,em/i"),function(e){e=c(e,"/"),m[e[1]].outputName=e[0]}),m.img.attributesDefault=[{name:"alt",value:""}],l(c("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(e){m[e].removeEmpty=!0}),l(c("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){m[e].paddEmpty=!0})),S(h.custom_elements),x(h.valid_children),w(h.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),T("span")||w("span[!data-mce-type|*]"),h.invalid_elements&&e.each(e.explode(h.invalid_elements),function(e){m[e]&&delete m[e]}),v.children=g,v.styles=p,v.getBoolAttrs=function(){return t},v.getBlockElements=function(){return n},v.getShortEndedElements=function(){return r},v.getSelfClosingElements=function(){return o},v.getNonEmptyElements=function(){return i},v.getWhiteSpaceElements=function(){return d},v.isValidChild=function(e,t){var n=g[e];return!!n&&!!n[t]},v.getElementRule=T,v.getCustomElements=function(){return a},v.addValidElements=w,v.setValidElements=E,v.addCustomElements=S,v.addValidChildren=x},e.html.Schema.boolAttrMap=t,e.html.Schema.blockElementsMap=n}(tinymce),function(e){e.html.SaxParser=function(t,n){var r=this,i=function(){};t=t||{},r.schema=n=n||new e.html.Schema,t.fix_self_closing!==!1&&(t.fix_self_closing=!0),e.each("comment cdata text start end pi doctype".split(" "),function(e){e&&(r[e]=t[e]||i)}),r.parse=function(r){function I(e){var t,n=B.length;while(n--)if(B[n].name===e)break;if(n>=0){for(t=B.length-1;t>=n;t--)e=B[t],e.valid&&P.end(e.name);B.length=n}}var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P=this,H=0,B=[],j=0,F=e.html.Entities.decode;L=RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g"),A=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,O={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},p=n.getShortEndedElements(),k=n.getSelfClosingElements(),d=n.getBoolAttrs(),m=t.validate,h=t.remove_internals,_=t.fix_self_closing,D=e.isIE,E=/^:/;while(i=L.exec(r)){H<i.index&&P.text(F(r.substr(H,i.index-H)));if(s=i[6])s=s.toLowerCase(),D&&E.test(s)&&(s=s.substr(1)),I(s);else if(s=i[7]){s=s.toLowerCase(),D&&E.test(s)&&(s=s.substr(1)),v=s in p,_&&k[s]&&B.length>0&&B[B.length-1].name===s&&I(s);if(!m||(g=n.getElementRule(s))){y=!0,m&&(S=g.attributes,x=g.attributePatterns),(w=i[8])?(c=w.indexOf("data-mce-type")!==-1,c&&h&&(y=!1),u=[],u.map={},w.replace
(A,function(e,t,n,r,i){var s,o;t=t.toLowerCase(),n=t in d?t:F(n||r||i||"");if(m&&!c&&t.indexOf("data-")!==0){s=S[t];if(!s&&x){o=x.length;while(o--){s=x[o];if(s.pattern.test(t))break}o===-1&&(s=null)}if(!s)return;if(s.validValues&&!(n in s.validValues))return}u.map[t]=n,u.push({name:t,value:n})})):(u=[],u.map={});if(m&&!c){T=g.attributesRequired,N=g.attributesDefault,C=g.attributesForced;if(C){a=C.length;while(a--)b=C[a],l=b.name,M=b.value,M==="{$uid}"&&(M="mce_"+j++),u.map[l]=M,u.push({name:l,value:M})}if(N){a=N.length;while(a--)b=N[a],l=b.name,l in u.map||(M=b.value,M==="{$uid}"&&(M="mce_"+j++),u.map[l]=M,u.push({name:l,value:M}))}if(T){a=T.length;while(a--)if(T[a]in u.map)break;a===-1&&(y=!1)}u.map["data-mce-bogus"]&&(y=!1)}y&&P.start(s,u,v)}else y=!1;if(o=O[s]){o.lastIndex=H=i.index+i[0].length,(i=o.exec(r))?(y&&(f=r.substr(H,i.index-H)),H=i.index+i[0].length):(f=r.substr(H),H=r.length),y&&f.length>0&&P.text(f,!0),y&&P.end(s),L.lastIndex=H;continue}v||(!w||w.indexOf("/")!=w.length-1?B.push({name:s,valid:y}):y&&P.end(s))}else(s=i[1])?P.comment(s):(s=i[2])?P.cdata(s):(s=i[3])?P.doctype(s):(s=i[4])&&P.pi(s,i[5]);H=i.index+i[0].length}H<r.length&&P.text(F(r.substr(H)));for(a=B.length-1;a>=0;a--)s=B[a],s.valid&&P.end(s.name)}}}(tinymce),function(e){function r(e,t,n){var r,i,s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){r=e[o];if(r)return r;for(i=e.parent;i&&i!==t;i=i.parent){r=i[o];if(r)return r}}}function i(e,t){this.name=e,this.type=t,t===1&&(this.attributes=[],this.attributes.map={})}var t=/^[ \t\r\n]*$/,n={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(i.prototype,{replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,r,i,s=this;if(typeof e!="string"){for(r in e)s.attr(r,e[r]);return s}if(n=s.attributes){if(t!==i){if(t===null){if(e in n.map){delete n.map[e],r=n.length;while(r--)if(n[r].name===e)return n=n.splice(r,1),s}return s}if(e in n.map){r=n.length;while(r--)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,s}return n.map[e]}},clone:function(){var e,t,n,r,s,o=this,u=new i(o.name,o.type);if(n=o.attributes){s=[],s.map={};for(e=0,t=n.length;e<t;e++)r=n[e],r.name!=="id"&&(s[s.length]={name:r.name,value:r.value},s.map[r.name]=r.value);u.attributes=s}return u.value=o.value,u.shortEnded=o.shortEnded,u},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(e){var t,n=this,i=[];for(t=n.firstChild;t;t=r(t,n))t.name===e&&i.push(t);return i},empty:function(){var e,t,n,i=this;if(i.firstChild){e=[];for(n=i.firstChild;n;n=r(n,i))e.push(n);t=e.length;while(t--)n=e[t],n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}return i.firstChild=i.lastChild=null,i},isEmpty:function(e){var n,i,s=this,o=s.firstChild;if(o)do{if(o.type===1){if(o.attributes.map["data-mce-bogus"])continue;if(e[o.name])return!1;n=o.attributes.length;while(n--){i=o.attributes[n].name;if(i==="name"||i.indexOf("data-")===0)return!1}}if(o.type===8)return!1;if(o.type===3&&!t.test(o.value))return!1}while(o=r(o,s));return!0},walk:function(e){return r(this,null,e)}}),e.extend(i,{create:function(e,t){var r,s=new i(e,n[e]||1);if(t)for(r in t)s.attr(r,t[r]);return s}}),e.html.Node=i}(tinymce),function(e){var t=e.html.Node;e.html.DomParser=function(n,r){function f(n){var s,o,u,a,f,l,c,h,p,d,v,m=e.makeMap("tr,td,th,tbody,thead,tfoot,table"),g=r.getNonEmptyElements();for(s=0;s<n.length;s++){o=n[s];if(!o.parent)continue;a=[o];for(u=o.parent;u&&!r.isValidChild(u.name,o.name)&&!m[u.name];u=u.parent)a.push(u);if(u&&a.length>1){a.reverse(),f=l=i.filterNode(a[0].clone());for(p=0;p<a.length-1;p++){r.isValidChild(l.name,a[p].name)?(c=i.filterNode(a[p].clone()),l.append(c)):c=l;for(h=a[p].firstChild;h&&h!=a[p+1];)v=h.next,c.append(h),h=v;l=c}f.isEmpty(g)?u.insert(o,a[0],!0):(u.insert(f,a[0],!0),u.insert(o,f)),u=a[0],(u.isEmpty(g)||u.firstChild===u.lastChild&&u.firstChild.name==="br")&&u.empty().remove()}else if(o.parent){if(o.name==="li"){d=o.prev;if(!d||d.name!=="ul"&&d.name!=="ul"){d=o.next;if(!d||d.name!=="ul"&&d.name!=="ul"){o.wrap(i.filterNode(new t("ul",1)));continue}d.insert(o,d.firstChild,!0);continue}d.append(o);continue}r.isValidChild(o.parent.name,"div")&&r.isValidChild("div",o.name)?o.wrap(i.filterNode(new t("div",1))):o.name==="style"||o.name==="script"?o.empty().remove():o.unwrap()}}}var i=this,s={},o=[],u={},a={};n=n||{},n.validate="validate"in n?n.validate:!0,n.root_name=n.root_name||"body",i.schema=r=r||new e.html.Schema,i.filterNode=function(e){var t,n,r;n in s&&(r=u[n],r?r.push(e):u[n]=[e]),t=o.length;while(t--)n=o[t].name,n in e.attributes.map&&(r=a[n],r?r.push(e):a[n]=[e]);return e},i.addNodeFilter=function(t,n){e.each(e.explode(t),function(e){var t=s[e];t||(s[e]=t=[]),t.push(n)})},i.addAttributeFilter=function(t,n){e.each(e.explode(t),function(e){var t;for(t=0;t<o.length;t++)if(o[t].name===e){o[t].callbacks.push(n);return}o.push({name:e,callbacks:[n]})})},i.parse=function(i,l){function M(){var e,t,n=h.firstChild;while(n)e=n.next,n.type==3||n.type==1&&n.name!=="p"&&!S[n.name]&&!n.attr("data-mce-type")?t?t.append(n):(t=_(A,1),h.insert(t,n),t.append(n)):t=null,n=e}function _(e,n){var r,i=new t(e,n);return e in s&&(r=u[e],r?r.push(i):u[e]=[i]),i}function D(e){var t,n,r;for(t=e.prev;t&&t.type===3;)n=t.value.replace(T,""),n.length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}var c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O=[];l=l||{},u={},a={},S=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),r.getBlockElements()),L=r.getNonEmptyElements(),k=r.children,E=n.validate,A="forced_root_block"in l?l.forced_root_block:n.forced_root_block,C=r.getWhiteSpaceElements(),x=/^[ \t\r\n]+/,T=/[ \t\r\n]+$/,N=/[ \t\r\n]+/g,c=new e.html.SaxParser({validate:E,fix_self_closing:!E,cdata:function(e){p.append(_("#cdata",4)).value=e},text:function(e,t){var n;C[p.name]||(e=e.replace(N," "),p.lastChild&&S[p.lastChild.name]&&(e=e.replace(x,""))),e.length!==0&&(n=_("#text",3),n.raw=!!t,p.append(n).value=e)},comment:function(e){p.append(_("#comment",8)).value=e},pi:function(e,t){p.append(_(e,7)).value=t,D(p)},doctype:function(e){var t=p.append(_("#doctype",10));t.value=e,D(p)},start:function(e,t,n){var i,s,u,f,l=E?r.getElementRule(e):{};if(l){i=_(l.outputName||e,1),i.attributes=t,i.shortEnded=n,p.append(i),f=k[p.name],f&&k[i.name]&&!f[i.name]&&O.push(i),s=o.length;while(s--)u=o[s].name,u in t.map&&(b=a[u],b?b.push(i):a[u]=[i]);S[e]&&D(i),n||(p=i)}},end:function(e){var n,i,s,o,u=E?r.getElementRule(e):{};if(u){if(S[e]){if(!C[p.name]){for(n=p.firstChild;n&&n.type===3;)i=n.value.replace(x,""),i.length>0?(n.value=i,n=n.next):(s=n.next,n.remove(),n=s);for(n=p.lastChild;n&&n.type===3;)i=n.value.replace(T,""),i.length>0?(n.value=i,n=n.prev):(s=n.prev,n.remove(),n=s)}n=p.prev,n&&n.type===3&&(i=n.value.replace(x,""),i.length>0?n.value=i:n.remove())}if(u.removeEmpty||u.paddEmpty)if(p.isEmpty(L))if(u.paddEmpty)p.empty().append(new t("#text","3")).value=" ";else if(!p.attributes.map.name){o=p.parent,p.empty().remove(),p=o;return}p=p.parent}}},r),h=p=new t(l.context||n.root_name,11),c.parse(i),E&&O.length&&(l.context?l.invalid=!0:f(O)),A&&h.name=="body"&&M();if(!l.invalid){for(w in u){b=s[w],d=u[w],g=d.length;while(g--)d[g].parent||d.splice(g,1);for(v=0,m=b.length;v<m;v++)b[v](d,w,l)}for(v=0,m=o.length;v<m;v++){b=o[v];if(b.name in a){d=a[b.name],g=d.length;while(g--)d[g].parent||d.splice(g,1);for(g=0,y=b.callbacks.length;g<y;g++)b.callbacks[g](d,b.name,l)}}}return h},n.remove_trailing_brs&&i.addNodeFilter("br",function(t){var n,i,s,o,u,a=t.length,f=r.getBlockElements(),l=r.getNonEmptyElements();f.body=1;for(n=0;n<a;n++){i=t[n],s=i.parent;if(f[i.parent.name]&&i===s.lastChild){o=i.prev;while(o){u=o.name;if(u!=="span"||o.attr("data-mce-type")!=="bookmark"){if(u!=="br")break;if(u==="br"){i=null;break}}o=o.prev}i&&(i.remove(),s.isEmpty(l)&&(elementRule=r.getElementRule(s.name),elementRule&&(elementRule.removeEmpty?s.remove():elementRule.paddEmpty&&(s.empty().append(new e.html.Node("#text",3)).value=" "))))}}})}}(tinymce),tinymce.html.Writer=function(e){var t,n,r,i,s,o=[];return e=e||{},t=e.indent,n=tinymce.makeMap(e.indent_before||""),r=tinymce.makeMap(e.indent_after||""),i=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities),s=e.element_format=="html",{start:function(e,u,a){var f,l,c,h;t&&n[e]&&o.length>0&&(h=o[o.length-1],h.length>0&&h!=="\n"&&o.push("\n")),o.push("<",e);if(u)for(f=0,l=u.length;f<l;f++)c=u[f],o.push(" ",c.name,'="',i(c.value,!0),'"');!a||s?o[o.length]=">":o[o.length]=" />",a&&t&&r[e]&&o.length>0&&(h=o[o.length-1],h.length>0&&h!=="\n"&&o.push("\n"))},end:function(e){var n;o.push("</",e,">"),t&&r[e]&&o.length>0&&(n=o[o.length-1],n.length>0&&n!=="\n"&&o.push("\n"))},text:function(e,t){e.length>0&&(o[o.length]=t?e:i(e))},cdata:function(e){o.push("<![CDATA[",e,"]]>")},comment:function(e){o.push("<!--",e,"-->")},pi:function(e,n){n?o.push("<?",e," ",n,"?>"):o.push("<?",e,"?>"),t&&o.push("\n")},doctype:function(e){o.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){o.length=0},getContent:function(){return o.join("").replace(/\n$/,"")}}},function(e){e.html.Serializer=function(t,n){var r=this,i=new e.html.Writer(t);t=t||{},t.validate="validate"in t?t.validate:!0,r.schema=n=n||new e.html.Schema,r.writer=i,r.serialize=function(e){function o(e){var t,u,a,f,l,c,h,p,d,v=s[e.type];if(!v){t=e.name,u=e.shortEnded,a=e.attributes;if(r&&a&&a.length>1){c=[],c.map={},d=n.getElementRule(e.name);for(h=0,p=d.attributesOrder.length;h<p;h++)f=d.attributesOrder[h],f in a.map&&(l=a.map[f],c.map[f]=l,c.push({name:f,value:l}));for(h=0,p=a.length;h<p;h++)f=a[h].name,f in c.map||(l=a.map[f],c.map[f]=l,c.push({name:f,value:l}));a=c}i.start(e.name,a,u);if(!u){if(e=e.firstChild)do o(e);while(e=e.next);i.end(t)}}else v(e)}var r=t.validate,s={3:function(e){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild)do o(e);while(e=e.next)}};return i.reset(),e.type==1&&!t.inner?o(e):s[11](e),i.getContent()}}}(tinymce),function(e){var t=e.each,n=e.is,r=e.isWebKit,i=e.isIE,s=e.html.Entities,o=/^([a-z0-9],?)+$/i,u=e.html.Schema.blockElementsMap,a=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,n){var r,s=this;s.doc=t,s.win=window,s.files={},s.cssFlicker=!1,s.counter=0,s.stdMode=!e.isIE||t.documentMode>=8,s.boxModel=!e.isIE||t.compatMode=="CSS1Compat"||s.stdMode,s.hasOuterHTML="outerHTML"in t.createElement("a"),s.settings=n=e.extend({keep_values:!1,hex_colors:1},n),s.schema=n.schema,s.styles=new e.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema);if(e.isIE6)try{t.execCommand("BackgroundImageCache",!1,!0)}catch(o){s.cssFlicker=!0}if(i&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(e){t.createElement(e)});for(r in n.schema.getCustomElements())t.createElement(r)}e.addUnload(s.destroy,s)},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,r=this;return e=r.get(e),t=r.getPos(e),n=r.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,r=this;return e=r.get(e),t=r.getStyle(e,"width"),n=r.getStyle(e,"height"),t.indexOf("px")===-1&&(t=0),n.indexOf("px")===-1&&(n=0),{w:parseInt(t)||e.offsetWidth||e.clientWidth,h:parseInt(n)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,r,i){var s,o=this,u=o.settings,a=[];e=o.get(e),i=i===undefined,u.strict_root&&(r=r||o.getRoot()),n(t,"string")&&(s=t,t==="*"?t=function(e){return e.nodeType==1}:t=function(e){return o.is(e,s)});while(e){if(e==r||!e.nodeType||e.nodeType===9)break;if(!t||t(e)){if(!i)return e;a.push(e)}e=e.parentNode}return i?a:null},get:function(e){var t;if(e&&this.doc&&typeof e=="string"){t=e,e=this.doc.getElementById(e);if(e&&e.id!==t)return this.doc.getElementsByName(t)[1]}return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e.dom.Sizzle(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(t,n){var r;if(t.length===undefined){if(n==="*")return t.nodeType==1;if(o.test(n)){n=n.toLowerCase().split(/,/),t=t.nodeName.toLowerCase();for(r=n.length-1;r>=0;r--)if(n[r]==t)return!0;return!1}}return e.dom.Sizzle.matches(n,t.nodeType?[t]:t).length>0},add:function(e,t,r,i,s){var o=this;return this.run(e,function(e){var u=n(t,"string")?o.doc.createElement(t):t;return o.setAttribs(u,r),i&&(i.nodeType?u.appendChild(i):o.setHTML(u,i)),s?u:e.appendChild(u)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r,i="",s=this;i+="<"+e;for(r in t)t.hasOwnProperty(r)&&(i+=" "+r+'="'+s.encode(t[r])+'"');return typeof n!="undefined"?i+">"+n+"</"+e+">":i+" />"},remove:function(t,n){return this.run(t,function(t){var r,i=t.parentNode;if(!i)return null;if(n)while(r=t.firstChild)!e.isIE||r.nodeType!==3||r.nodeValue?i.insertBefore(r,t):t.removeChild(r);return i.removeChild(t)})},setStyle:function(t,n,r){var s=this;return s.run(t,function(o){var u=o.style;n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),s.pixelStyles.test(n)&&(e.is(r,"number")||/^[\-0-9\.]+$/.test(r))&&(r+="px");switch(n){case"opacity":if(i){u.filter=r===""?"":"alpha(opacity="+r*100+")";if(!t.currentStyle||!t.currentStyle.hasLayout)u.display="inline-block"}u[n]=u["-moz-opacity"]=u["-khtml-opacity"]=r||"";break;case"float":i?u.styleFloat=r:u.cssFloat=r;break;default:u[n]=r||""}s.settings.update_styles&&s.setAttrib(o,"data-mce-style")})},getStyle:function(e,t,n){e=this.get(e);if(!e)return;if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(r){return null}}return t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),t=="float"&&(t=i?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style?e.style[t]:undefined},setStyles:function(e,n){var r=this,i=r.settings,s=i.update_styles;i.update_styles=0,t(n,function(t,n){r.setStyle(e,n,t)}),i.update_styles=s,i.update_styles&&r.setAttrib(e,i.cssText)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,r,i){var s=this;if(!e||!r)return;return s.settings.strict&&(r=r.toLowerCase()),this.run(e,function(e){var o,u=s.settings,a=e.getAttribute(r);if(i!==null)switch(r){case"style":if(!n(i,"string")){t(i,function(t,n){s.setStyle(e,n,t)});return}u.keep_values&&(i&&!s._isRes(i)?e.setAttribute("data-mce-style",i,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=i;break;case"class":e.className=i||"";break;case"src":case"href":u.keep_values&&(u.url_converter&&(i=u.url_converter.call(u.url_converter_scope||s,i,r,e)),s.setAttrib(e,"data-mce-"+r,i,2));break;case"shape":e.setAttribute("data-mce-style",i)}n(i)&&i!==null&&i.length!==0?e.setAttribute(r,""+i,2):e.removeAttribute(r,2),tinyMCE.activeEditor&&a!=i&&(o=tinyMCE.activeEditor,o.onSetAttrib.dispatch(o,e,r,i))})},setAttribs:function(e,n){var r=this;return this.run(e,function(e){t(n,function(t,n){r.setAttrib(e,n,t)})})},getAttrib:function(t,s,o){var u,a,f=this;t=f.get(t);if(!t||t.nodeType!==1)return o===a?!1:o;n(o)||(o="");if(/^(src|href|style|coords|shape)$/.test(s)){u=t.getAttribute("data-mce-"+s);if(u)return u}i&&f.props[s]&&(u=t[f.props[s]],u=u&&u.nodeValue?u.nodeValue:u),u||(u=t.getAttribute(s,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(s))return t[f.props[s]]===!0&&u===""?s:u?s:"";if(t.nodeName==="FORM"&&t.getAttributeNode(s))return t.getAttributeNode(s).nodeValue;s==="style"&&(u=u||t.style.cssText,u&&(u=f.serializeStyle(f.parseStyle(u),t.nodeName),f.settings.keep_values&&!f._isRes(u)&&t.setAttribute("data-mce-style",u))),r&&s==="class"&&u&&(u=u.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(i)switch(s){case"rowspan":case"colspan":u===1&&(u="");break;case"size":if(u==="+0"||u===20||u===0)u="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":u===0&&(u="");break;case"hspace":u===-1&&(u="");break;case"maxlength":case"tabindex":if(u===32768||u===2147483647||u==="32768")u="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(u===65535)return s;return o;case"shape":u=u.toLowerCase();break;default:s.indexOf("on")===0&&u&&(u=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+u))}return u!==a&&u!==null&&u!==""?""+u:o},getPos:function(e,t){var n,r,i=this,s=0,o=0,u=i.doc;e=i.get(e),t=t||u.body;if(e){if(e.getBoundingClientRect)return e=e.getBoundingClientRect(),n=i.boxModel?u.documentElement:u.body,s=e.left+(u.documentElement.scrollLeft||u.body.scrollLeft)-n.clientTop,o=e.top+(u.documentElement.scrollTop||u.body.scrollTop)-n.clientLeft,{x:s,y:o};r=e;while(r&&r!=t&&r.nodeType)s+=r.offsetLeft||0,o+=r.offsetTop||0,r=r.offsetParent;r=e.parentNode;while(r&&r!=t&&r.nodeType)s-=r.scrollLeft||0,o-=r.scrollTop||0,r=r.parentNode}return{x:s,y:o}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},loadCSS:function(n){var r,s=this,o=s.doc;n||(n=""),r=s.select("head")[0],t(n.split(","),function(t){var n;if(s.files[t])return;s.files[t]=!0,n=s.create("link",{rel:"stylesheet",href:e._addVer(t)}),i&&o.documentMode&&o.recalc&&(n.onload=function(){o.recalc&&o.recalc(),n.onload=null}),r.appendChild(n)})},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(n!=""?n+" ":"")+t):0})},removeClass:function(t,n){var r,i=this;return i.run(t,function(t){var s;return i.hasClass(t,n)?(r||(r=RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),s=t.className.replace(r," "),s=e.trim(s!=" "?s:""),t.className=s,s||(t.removeAttribute("class"),t.removeAttribute("className")),s):t.className})},hasClass:function(e,t){return e=this.get(e),!e||!t?!1:(" "+e.className+" ").indexOf(" "+t+" ")!==-1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||e.style.display=="none"||this.getStyle(e,"display")=="none"},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,n){var r=this;return r.run(e,function(e){if(i){while(e.firstChild)e.removeChild(e.firstChild);try{e.innerHTML="<br />"+n,e.removeChild(e.firstChild)}catch(s){e=r.create("div"),e.innerHTML="<br />"+n,t(e.childNodes,function(t,n){n&&e.appendChild(t)})}}else e.innerHTML=n;return n})},getOuterHTML:function(e){var t,n=this;return e=n.get(e),e?e.nodeType===1&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){function s(e,t,n){var i,s=n.createElement("body");s.innerHTML=t,i=s.lastChild;while(i)r.insertAfter(i.cloneNode(!0),e),i=i.previousSibling;r.remove(e)}var r=this;return this.run(e,function(e){e=r.get(e);if(e.nodeType==1){n=n||e.ownerDocument||r.doc;if(i)try{i&&e.nodeType==1?e.outerHTML=t:s(e,t,n)}catch(o){s(e,t,n)}else s(e,t,n)}})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n=t.parentNode,r=t.nextSibling;return r?n.insertBefore(e,r):n.appendChild(e),e})},isBlock:function(e){var t=e.nodeType;return t?t===1&&!!u[e.nodeName]:!!u[e]},replace:function(r,i,s){var o=this;return n(i,"array")&&(r=r.cloneNode(!0)),o.run(i,function(n){return s&&t(e.grep(n.childNodes),function(e){r.appendChild(e)}),n.parentNode.replaceChild(r,n)})},rename:function(e,n){var r,i=this;return e.nodeName!=n.toUpperCase()&&(r=i.create(n),t(i.getAttribs(e),function(t){i.setAttrib(r,t.nodeName,i.getAttrib(e,t.nodeName))}),i.replace(r,e,1)),r||e},findCommonAncestor:function(e,t){var n,r=e;while(r){n=t;while(n&&r!=n)n=n.parentNode;if(r==n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){function n(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}var t=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return t?(e="#"+n(t[1])+n(t[2])+n(t[3]),e):e},getClasses:function(){function u(r){t(r.imports,function(e){u(e)}),t(r.cssRules||r.rules,function(r){switch(r.type||1){case 1:r.selectorText&&t(r.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(t)||!/\.[\w\-]+$/.test(t))return;n=t,t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t);if(o&&!(t=o(t,n)))return;s[t]||(i.push({"class":t}),s[t]=1)});break;case 3:u(r.styleSheet)}})}var n,r=this,i=[],s={},o=r.settings.class_filter;if(r.classes)return r.classes;try{t(r.doc.styleSheets,u)}catch(a){}return i.length>0&&(r.classes=i),i},run:function(e,n,r){var i,s=this;return s.doc&&typeof e=="string"&&(e=s.get(e)),e?(r=r||this,!e.nodeType&&(e.length||e.length===0)?(i=[],t(e,function(e,t){e&&(typeof e=="string"&&(e=s.doc.getElementById(e)),i.push(n.call(r,e,t)))}),i):n.call(r,e)):!1},getAttribs:function(e){var t;return e=this.get(e),e?i?(t=[],e.nodeName=="OBJECT"?e.attributes:(e.nodeName==="OPTION"&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t)):e.attributes:[]},isEmpty:function(t,n){var r,i,s,o,u,f,l=this;t=t.firstChild;if(t){o=new e.dom.TreeWalker(t),n=n||l.schema?l.schema.getNonEmptyElements():null;do{s=t.nodeType;if(s===1){if(t.getAttribute("data-mce-bogus"))continue;u=t.nodeName.toLowerCase();if(n&&n[u]){f=t.parentNode;if(u==="br"&&l.isBlock(f)&&f.firstChild===t&&f.lastChild===t)continue;return!1}i=l.getAttribs(t),r=t.attributes.length;while(r--){u=t.attributes[r].nodeName;if(u==="name"||u==="data-mce-bookmark")return!1}}if(s==8)return!1;if(s===3&&!a.test(t.nodeValue))return!1}while(t=o.next())}return!0},destroy:function(t){var n=this;n.events&&n.events.destroy(),n.win=n.doc=n.root=n.events=null,t||e.removeUnload(n.destroy)},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n,r,i,s=0;if(e)for(n=e.nodeType,e=e.previousSibling,r=e;e;e=e.previousSibling){i=e.nodeType;if(t&&i==3)if(i==n||!e.nodeValue.length)continue;s++,n=i}return s},split:function(t,n,r){function f(t){function o(e){var t=e.previousSibling&&e.previousSibling.nodeName=="SPAN",n=e.nextSibling&&e.nextSibling.nodeName=="SPAN";return t&&n}var n,r,i=t.childNodes,s=t.nodeType;if(s==1&&t.getAttribute("data-mce-type")=="bookmark")return;for(n=i.length-1;n>=0;n--)f(i[n]);if(s!=9){if(s==3&&t.nodeValue.length>0){r=e.trim(t.nodeValue).length;if(!u.isBlock(t.parentNode)||r>0||r==0&&o(t))return}else if(s==1){i=t.childNodes,i.length==1&&i[0]&&i[0].nodeType==1&&i[0].getAttribute("data-mce-type")=="bookmark"&&t.parentNode.insertBefore(i[0],t);if(i.length||/^(br|hr|input|img)$/i.test(t.nodeName))return}u.remove(t)}return t}var i,s,o,u=this,a=u.createRng();if(t&&n)return a.setStart(t.parentNode,u.nodeIndex(t)),a.setEnd(n.parentNode,u.nodeIndex(n)),i=a.extractContents(),a=u.createRng(),a.setStart(n.parentNode,u.nodeIndex(n)+1),a.setEnd(t.parentNode,u.nodeIndex(t)+1),s=a.extractContents(),o=t.parentNode,o.insertBefore(f(i),t),r?o.replaceChild(r,n):o.insertBefore(n,t),o.insertBefore(f(s),t),u.remove(t),r||n},bind:function(t,n,r,i){var s=this;return s.events||(s.events=new e.dom.EventUtils),s.events.add(t,n,r,i||this)},unbind:function(t,n,r){var i=this;return i.events||(i.events=new e.dom.EventUtils),i.events.remove(t,n,r)},_findSib:function(e,t,r){var i=this,s=t;if(e){n(s,"string")&&(s=function(e){return i.is(e,t)});for(e=e[r];e;e=e[r])if(s(e))return e}return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),e.DOM=new e.dom.DOMUtils(document,{process_html:0})}(tinymce),function(e){function t(e){function v(e,t){P(u,e,t)}function m(e,t){P(a,e,t)}function g(e){v(e.parentNode,d(e))}function y(e){v(e.parentNode,d(e)+1)}function b(e){m(e.parentNode,d(e))}function w(e){m(e.parentNode,d(e)+1)}function E(e){e?(n[c]=n[l],n[h]=n[f]):(n[l]=n[c],n[f]=n[h]),n.collapsed=u}function S(e){g(e),w(e)}function x(e){v(e,0),m(e,e.nodeType===1?e.childNodes.length:e.nodeValue.length)}function T(e,t){var r=n[l],i=n[f],s=n[c],o=n[h],u=t.startContainer,a=t.startOffset,p=t.endContainer,d=t.endOffset;if(e===0)return D(r,i,u,a);if(e===1)return D(s,o,u,a);if(e===2)return D(s,o,p,d);if(e===3)return D(r,i,p,d)}function N(){H(o)}function C(){return H(i)}function k(){return H(s)}function L(t){var n,r,i=this[l],s=this[f];i.nodeType!==3&&i.nodeType!==4||!i.nodeValue?(i.childNodes.length>0&&(r=i.childNodes[s]),r?i.insertBefore(t,r):i.appendChild(t)):s?s<i.nodeValue.length?(n=i.splitText(s),i.parentNode.insertBefore(t,n)):e.insertAfter(t,i):i.parentNode.insertBefore(t,i)}function A(e){var t=n.extractContents();n.insertNode(e),e.appendChild(t),n.selectNode(e)}function O(){return p(new t(e),{startContainer:n[l],startOffset:n[f],endContainer:n[c],endOffset:n[h],collapsed:n.collapsed,commonAncestorContainer:n.commonAncestorContainer})}function M(e,t){var n;if(e.nodeType==3)return e;if(t<0)return e;n=e.firstChild;while(n&&t>0)--t,n=n.nextSibling;return n?n:e}function _(){return n[l]==n[c]&&n[f]==n[h]}function D(t,n,r,i){var s,o,u,a,f,l;if(t==r)return n==i?0:n<i?-1:1;s=r;while(s&&s.parentNode!=t)s=s.parentNode;if(s){o=0,u=t.firstChild;while(u!=s&&o<n)o++,u=u.nextSibling;return n>o?1:-1}s=t;while(s&&s.parentNode!=r)s=s.parentNode;if(s){o=0,u=r.firstChild;while(u!=s&&o<i)o++,u=u.nextSibling;return o<i?-1:1}a=e.findCommonAncestor(t,r),f=t;while(f&&f.parentNode!=a)f=f.parentNode;f||(f=a),l=r;while(l&&l.parentNode!=a)l=l.parentNode;l||(l=a);if(f==l)return 0;u=a.firstChild;while(u){if(u==f)return-1;if(u==l)return 1;u=u.nextSibling}}function P(t,r,i){var s,o;t?(n[l]=r,n[f]=i):(n[c]=r,n[h]=i),s=n[c];while(s.parentNode)s=s.parentNode;o=n[l];while(o.parentNode)o=o.parentNode;o==s?D(n[l],n[f],n[c],n[h])>0&&n.collapse(t):n.collapse(t),n.collapsed=_(),n.commonAncestorContainer=e.findCommonAncestor(n[l],n[c])}function H(e){var t,r,i,s,o,u,a,f=0,h=0;if(n[l]==n[c])return B(e);for(t=n[c],r=t.parentNode;r;t=r,r=r.parentNode){if(r==n[l])return j(t,e);++f}for(t=n[l],r=t.parentNode;r;t=r,r=r.parentNode){if(r==n[c])return F(t,e);++h}i=h-f,s=n[l];while(i>0)s=s.parentNode,i--;o=n[c];while(i<0)o=o.parentNode,i++;for(u=s.parentNode,a=o.parentNode;u!=a;u=u.parentNode,a=a.parentNode)s=u,o=a;return I(s,o,e)}function B(e){var t,i,a,c,p,d,v;e!=o&&(t=r.createDocumentFragment());if(n[f]==n[h])return t;if(n[l].nodeType==3){i=n[l].nodeValue,a=i.substring(n[f],n[h]),e!=s&&(n[l].deleteData(n[f],n[h]-n[f]),n.collapse(u));if(e==o)return;return t.appendChild(r.createTextNode(a)),t}c=M(n[l],n[f]),p=n[h]-n[f];while(p>0)d=c.nextSibling,v=z(c,e),t&&t.appendChild(v),--p,c=d;return e!=s&&n.collapse(u),t}function j(e,t){var i,u,l,c,h,p;t!=o&&(i=r.createDocumentFragment()),u=q(e,t),i&&i.appendChild(u),l=d(e),c=l-n[f];if(c>0){u=e.previousSibling;while(c>0)h=u.previousSibling,p=z(u,t),i&&i.insertBefore(p,i.firstChild),--c,u=h;return t!=s&&(n.setEndBefore(e),n.collapse(a)),i}return t!=s&&(n.setEndBefore(e),n.collapse(a)),i}function F(e,t){var i,a,f,l,c,p;t!=o&&(i=r.createDocumentFragment()),f=R(e,t),i&&i.appendChild(f),a=d(e),++a,l=n[h]-a,f=e.nextSibling;while(l>0)c=f.nextSibling,p=z(f,t),i&&i.appendChild(p),--l,f=c;return t!=s&&(n.setStartAfter(e),n.collapse(u)),i}function I(e,t,i){var a,f,l,c,h,p,v,m;i!=o&&(f=r.createDocumentFragment()),a=R(e,i),f&&f.appendChild(a),l=e.parentNode,c=d(e),h=d(t),++c,p=h-c,v=e.nextSibling;while(p>0)m=v.nextSibling,a=z(v,i),f&&f.appendChild(a),v=m,--p;return a=q(t,i),f&&f.appendChild(a),i!=s&&(n.setStartAfter(e),n.collapse(u)),f}function q(e,t){var r,i,s,f,l,p=M(n[c],n[h]-1),d=p!=n[c];if(p==e)return U(p,d,a,t);r=p.parentNode,i=U(r,a,a,t);while(r){while(p)s=p.previousSibling,f=U(p,d,a,t),t!=o&&i.insertBefore(f,i.firstChild),d=u,p=s;if(r==e)return i;p=r.previousSibling,r=r.parentNode,l=U(r,a,a,t),t!=o&&l.appendChild(i),i=l}}function R(e,t){var r,i,s,c,h,p=M(n[l],n[f]),d=p!=n[l];if(p==e)return U(p,d,u,t);r=p.parentNode,i=U(r,a,u,t);while(r){while(p)s=p.nextSibling,c=U(p,d,u,t),t!=o&&i.appendChild(c),d=u,p=s;if(r==e)return i;p=r.nextSibling,r=r.parentNode,h=U(r,a,u,t),t!=o&&h.appendChild(i),i=h}}function U(e,t,r,i){var u,l,c,p,d;if(t)return z(e,i);if(e.nodeType==3){u=e.nodeValue,r?(p=n[f],l=u.substring(p),c=u.substring(0,p)):(p=n[h],l=u.substring(0,p),c=u.substring(p)),i!=s&&(e.nodeValue=c);if(i==o)return;return d=e.cloneNode(a),d.nodeValue=l,d}if(i==o)return;return e.cloneNode(a)}function z(e,t){if(t!=o)return t==s?e.cloneNode(u):e;e.parentNode.removeChild(e)}var n=this,r=e.doc,i=0,s=1,o=2,u=!0,a=!1,f="startOffset",l="startContainer",c="endContainer",h="endOffset",p=tinymce.extend,d=e.nodeIndex;p(n,{startContainer:r,startOffset:0,endContainer:r,endOffset:0,collapsed:u,commonAncestorContainer:r,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:v,setEnd:m,setStartBefore:g,setStartAfter:y,setEndBefore:b,setEndAfter:w,collapse:E,selectNode:S,selectNodeContents:x,compareBoundaryPoints:T,deleteContents:N,extractContents:C,cloneContents:k,insertNode:L,surroundContents:A,cloneRange:O})}e.Range=t}(tinymce.dom),function(){function e(e){function s(t,n){var r,i,s,o,u,a,f,l=0,c=-1,h=t.duplicate();h.collapse(n),f=h.parentElement();if(f.ownerDocument!==e.dom.doc)return;while(f.contentEditable==="false")f=f.parentNode;if(!f.hasChildNodes())return{node:f,inside:1};s=f.children,r=s.length-1;while(l<=r){a=Math.floor((l+r)/2),o=s[a],h.moveToElementText(o),c=h.compareEndPoints(n?"StartToStart":"EndToEnd",t);if(c>0)r=a-1;else{if(c>=0)return{node:o};l=a+1}}if(c<0){o?h.collapse(!1):(h.moveToElementText(f),h.collapse(!0),o=f,i=!0),h.setEndPoint(n?"EndToStart":"EndToEnd",t);if(h.compareEndPoints(n?"StartToStart":"StartToEnd",t)>0){h=t.duplicate(),h.collapse(n),u=-1;while(f==h.parentElement()){if(h.move("character",-1)==0)break;u++}}u=u||h.text.replace("\r\n"," ").length}else h.collapse(!0),h.setEndPoint(n?"StartToStart":"StartToEnd",t),u=h.text.replace("\r\n"," ").length;return{node:o,position:c,offset:u,inside:i}}function o(){function c(e){var t,n,r,i=s(a,e),o=0,u=i.node,l=i.offset;if(i.inside&&!u.hasChildNodes()){f[e?"setStart":"setEnd"](u,0);return}if(l===n){f[e?"setStartBefore":"setEndAfter"](u);return}if(i.position<0){t=i.inside?u.firstChild:u.nextSibling;if(!t){f[e?"setStartAfter":"setEndAfter"](u);return}if(!l){t.nodeType==3?f[e?"setStart":"setEnd"](t,0):f[e?"setStartBefore":"setEndBefore"](t);return}while(t){r=t.nodeValue,o+=r.length;if(o>=l){u=t,o-=l,o=r.length-o;break}t=t.nextSibling}}else{t=u.previousSibling;if(!t)return f[e?"setStartBefore":"setEndBefore"](u);if(!l){u.nodeType==3?f[e?"setStart":"setEnd"](t,u.nodeValue.length):f[e?"setStartAfter":"setEndAfter"](t);return}while(t){o+=t.nodeValue.length;if(o>=l){u=t,o-=l;break}t=t.previousSibling}}f[e?"setStart":"setEnd"](u,o)}var r,i,o,u,a=e.getRng(),f=n.createRng(),l=a.item?a.item(0):a.parentElement();if(l.ownerDocument!=n.doc)return f;r=e.isCollapsed();if(a.item)return f.setStart(l.
parentNode,n.nodeIndex(l)),f.setEnd(f.startContainer,f.startOffset+1),f;try{c(!0),r||c()}catch(h){if(h.number!=-2147024809)throw h;u=t.getBookmark(2),i=a.duplicate(),i.collapse(!0),l=i.parentElement(),r||(i=a.duplicate(),i.collapse(!1),o=i.parentElement(),o.innerHTML=o.innerHTML),l.innerHTML=l.innerHTML,t.moveToBookmark(u),a=e.getRng(),c(!0),r||c()}return f}var t=this,n=e.dom,r=!0,i=!1;this.getBookmark=function(t){function o(e){var e,t,r,i=[],s=e.parentNode,o=n.getRoot().parentNode;while(s!=o&&s.nodeType!==9){t=s.children,r=t.length;while(r--)if(e===t[r]){i.push(r);break}e=s,s=s.parentNode}return i}function u(e){var t=s(r,e);if(t)return{position:t.position,offset:t.offset,indexes:o(t.node),inside:t.inside}}var r=e.getRng(),i={};return t===2&&(r.item?i.start={ctrl:!0,indexes:o(r.item(0))}:(i.start=u(!0),e.isCollapsed()||(i.end=u()))),i},this.moveToBookmark=function(e){function i(e){var t,r,i,s=n.getRoot();for(t=e.length-1;t>=0;t--)i=s.children,r=e[t],r<=i.length-1&&(s=i[r]);return s}function s(n){var s,o,u,a=e[n?"start":"end"];a&&(s=a.position>0,o=r.createTextRange(),o.moveToElementText(i(a.indexes)),offset=a.offset,offset!==u?(o.collapse(a.inside||s),o.moveStart("character",s?-offset:offset)):o.collapse(n),t.setEndPoint(n?"StartToStart":"EndToStart",o),n&&t.collapse(!0))}var t,r=n.doc.body;e.start&&(e.start.ctrl?(t=r.createControlRange(),t.addElement(i(e.start.indexes)),t.select()):(t=r.createTextRange(),s(!0),s(),t.select()))},this.addRange=function(t){function h(e){var t,s=n.create("a"),h=e?o:a,p=e?u:f,d=i.duplicate();if(h==l||h==l.documentElement)h=c,p=0;h.nodeType==3?(h.parentNode.insertBefore(s,h),d.moveToElementText(s),d.moveStart("character",p),n.remove(s),i.setEndPoint(e?"StartToStart":"EndToEnd",d)):(t=h.childNodes,t.length?(p<t.length?h.insertBefore(s,t[p]):n.insertAfter(s,t[t.length-1]),d.moveToElementText(s)):(s=l.createTextNode("﻿"),h.appendChild(s),d.moveToElementText(s.parentNode),d.collapse(r)),i.setEndPoint(e?"StartToStart":"EndToEnd",d),n.remove(s))}var i,s,o,u,a,f,l=e.dom.doc,c=l.body;o=t.startContainer,u=t.startOffset,a=t.endContainer,f=t.endOffset,i=c.createTextRange();if(o==a&&o.nodeType==1&&u==f-1&&u==f-1)try{s=c.createControlRange(),s.addElement(o.childNodes[u]),s.select();return}catch(p){}h(!0),h(),i.select()},this.getRangeAt=o}tinymce.dom.TridentSelection=e}(),function(){function d(e,t,n,r,i,s){var o,u,a,f;for(o=0,u=r.length;o<u;o++){a=r[o];if(a){a=a[e],f=!1;while(a){if(a.sizcache===n){f=r[a.sizset];break}a.nodeType===1&&!s&&(a.sizcache=n,a.sizset=o);if(a.nodeName.toLowerCase()===t){f=a;break}a=a[e]}r[o]=f}}}function v(t,n,r,i,s,o){var u,a,f,l;for(u=0,a=i.length;u<a;u++){f=i[u];if(f){f=f[t],l=!1;while(f){if(f.sizcache===r){l=i[f.sizset];break}if(f.nodeType===1){o||(f.sizcache=r,f.sizset=u);if(typeof n!="string"){if(f===n){l=!0;break}}else if(e.filter(n,[f]).length>0){l=f;break}}f=f[t]}i[u]=l}}}var e,t,n,r,i,s,o,u,a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,f=0,l=Object.prototype.toString,c=!1,h=!0;[0,0].sort(function(){return h=!1,0}),e=function(r,i,o,f){o=o||[],i=i||document;var c=i;if(i.nodeType!==1&&i.nodeType!==9)return[];if(!r||typeof r!="string")return o;var h=[],p,d,v,m,g=!0,y=e.isXML(i),b=r,w,E,S,x;do{a.exec(""),p=a.exec(b);if(p){b=p[3],h.push(p[1]);if(p[2]){m=p[3];break}}}while(p);if(h.length>1&&n.exec(r))if(h.length===2&&t.relative[h[0]])d=u(h[0]+h[1],i);else{d=t.relative[h[0]]?[i]:e(h.shift(),i);while(h.length)r=h.shift(),t.relative[r]&&(r+=h.shift()),d=u(r,d)}else{!f&&h.length>1&&i.nodeType===9&&!y&&t.match.ID.test(h[0])&&!t.match.ID.test(h[h.length-1])&&(w=e.find(h.shift(),i,y),i=w.expr?e.filter(w.expr,w.set)[0]:w.set[0]);if(i){w=f?{expr:h.pop(),set:s(f)}:e.find(h.pop(),h.length!==1||h[0]!=="~"&&h[0]!=="+"||!i.parentNode?i:i.parentNode,y),d=w.expr?e.filter(w.expr,w.set):w.set,h.length>0?v=s(d):g=!1;while(h.length)E=h.pop(),S=E,t.relative[E]?S=h.pop():E="",S==null&&(S=i),t.relative[E](v,S,y)}else v=h=[]}v||(v=d),v||e.error(E||r);if(l.call(v)==="[object Array]")if(!g)o.push.apply(o,v);else if(i&&i.nodeType===1)for(x=0;v[x]!=null;x++)v[x]&&(v[x]===!0||v[x].nodeType===1&&e.contains(i,v[x]))&&o.push(d[x]);else for(x=0;v[x]!=null;x++)v[x]&&v[x].nodeType===1&&o.push(d[x]);else s(v,o);return m&&(e(m,c,o,f),e.uniqueSort(o)),o},e.uniqueSort=function(e){var t;if(o){c=h,e.sort(o);if(c)for(t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},e.matches=function(t,n){return e(t,null,null,n)},e.find=function(e,n,r){var i,s,o,u,a,f;if(!e)return[];for(s=0,o=t.order.length;s<o;s++){u=t.order[s];if(a=t.leftMatch[u].exec(e)){f=a[1],a.splice(1,1);if(f.substr(f.length-1)!=="\\"){a[1]=(a[1]||"").replace(/\\/g,""),i=t.find[u](a,n,r);if(i!=null){e=e.replace(t.match[u],"");break}}}}return i||(i=n.getElementsByTagName("*")),{set:i,expr:e}},e.filter=function(n,r,i,s){var o,u,a,f,l,c,h,p,d,v=n,m=[],g=r,y=r&&r[0]&&e.isXML(r[0]);while(n&&r.length){for(a in t.filter)if((o=t.leftMatch[a].exec(n))!=null&&o[2]){f=t.filter[a],h=o[1],u=!1,o.splice(1,1);if(h.substr(h.length-1)==="\\")continue;g===m&&(m=[]);if(t.preFilter[a]){o=t.preFilter[a](o,g,i,m,s,y);if(!o)u=l=!0;else if(o===!0)continue}if(o)for(p=0;(c=g[p])!=null;p++)c&&(l=f(c,o,p,g),d=s^!!l,i&&l!=null?d?u=!0:g[p]=!1:d&&(m.push(c),u=!0));if(l!==undefined){i||(g=m),n=n.replace(t.match[a],"");if(!u)return[];break}}if(n===v){if(u!=null)break;e.error(n)}v=n}return g},e.error=function(e){throw"Syntax error, unrecognized expression: "+e},t=e.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(t,n){var r=typeof n=="string",i=r&&!/\W/.test(n),s=r&&!i;i&&(n=n.toLowerCase());for(var o=0,u=t.length,a;o<u;o++)if(a=t[o]){while((a=a.previousSibling)&&a.nodeType!==1);t[o]=s||a&&a.nodeName.toLowerCase()===n?a||!1:a===n}s&&e.filter(n,t,!0)},">":function(t,n){var r=typeof n=="string",i,s=0,o=t.length;if(r&&!/\W/.test(n)){n=n.toLowerCase();for(;s<o;s++){i=t[s];if(i){var u=i.parentNode;t[s]=u.nodeName.toLowerCase()===n?u:!1}}}else{for(;s<o;s++)i=t[s],i&&(t[s]=r?i.parentNode:i.parentNode===n);r&&e.filter(n,t,!0)}},"":function(e,t,n){var r=f++,i=v,s;typeof t=="string"&&!/\W/.test(t)&&(t=t.toLowerCase(),s=t,i=d),i("parentNode",t,r,e,s,n)},"~":function(e,t,n){var r=f++,i=v,s;typeof t=="string"&&!/\W/.test(t)&&(t=t.toLowerCase(),s=t,i=d),i("previousSibling",t,r,e,s,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(/\\/g,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(e,t){return e[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}return e[0]=f++,e},ATTR:function(e,n,r,i,s,o){var u=e[1].replace(/\\/g,"");return!o&&t.attrMap[u]&&(e[1]=t.attrMap[u]),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(n,r,i,s,o){if(n[1]==="not"){if((a.exec(n[3])||"").length<=1&&!/^\w/.test(n[3])){var u=e.filter(n[3],r,i,!0^o);return i||s.push.apply(s,u),!1}n[3]=e(n[3],null,null,r)}else if(t.match.POS.test(n[0])||t.match.CHILD.test(n[0]))return!0;return n},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(t,n,r){return!!e(r[3],t).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(n,r,i,s){var o=r[1],u=t.filters[o];if(u)return u(n,i,r,s);if(o==="contains")return(n.textContent||n.innerText||e.getText([n])||"").indexOf(r[3])>=0;if(o==="not"){var a=r[3];for(var f=0,l=a.length;f<l;f++)if(a[f]===n)return!1;return!0}e.error("Syntax error, unrecognized expression: "+o)},CHILD:function(e,t){var n=t[1],r=e;switch(n){case"only":case"first":while(r=r.previousSibling)if(r.nodeType===1)return!1;if(n==="first")return!0;r=e;case"last":while(r=r.nextSibling)if(r.nodeType===1)return!1;return!0;case"nth":var i=t[2],s=t[3];if(i===1&&s===0)return!0;var o=t[0],u=e.parentNode;if(u&&(u.sizcache!==o||!e.nodeIndex)){var a=0;for(r=u.firstChild;r;r=r.nextSibling)r.nodeType===1&&(r.nodeIndex=++a);u.sizcache=o}var f=e.nodeIndex-s;return i===0?f===0:f%i===0&&f/i>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,n){var r=n[1],i=t.attrHandle[r]?t.attrHandle[r](e):e[r]!=null?e[r]:e.getAttribute(r),s=i+"",o=n[2],u=n[4];return i==null?o==="!=":o==="="?s===u:o==="*="?s.indexOf(u)>=0:o==="~="?(" "+s+" ").indexOf(u)>=0:u?o==="!="?s!==u:o==="^="?s.indexOf(u)===0:o==="$="?s.substr(s.length-u.length)===u:o==="|="?s===u||s.substr(0,u.length+1)===u+"-":!1:s&&i!==!1},POS:function(e,n,r,i){var s=n[2],o=t.setFilters[s];if(o)return o(e,r,n,i)}}},n=t.match.POS,r=function(e,t){return"\\"+(t-0+1)};for(i in t.match)t.match[i]=RegExp(t.match[i].source+/(?![^\[]*\])(?![^\(]*\))/.source),t.leftMatch[i]=RegExp(/(^(?:.|\r|\n)*?)/.source+t.match[i].source.replace(/\\(\d+)/g,r));s=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(p){s=function(e,t){var n,r=t||[],i=0;if(l.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(n=e.length;i<n;i++)r.push(e[i]);else for(;e[i];i++)r.push(e[i]);return r}}document.documentElement.compareDocumentPosition?o=function(e,t){var n;return!e.compareDocumentPosition||!t.compareDocumentPosition?(e==t&&(c=!0),e.compareDocumentPosition?-1:1):(n=e.compareDocumentPosition(t)&4?-1:e===t?0:1,n===0&&(c=!0),n)}:"sourceIndex"in document.documentElement?o=function(e,t){var n;return!e.sourceIndex||!t.sourceIndex?(e==t&&(c=!0),e.sourceIndex?-1:1):(n=e.sourceIndex-t.sourceIndex,n===0&&(c=!0),n)}:document.createRange&&(o=function(e,t){var n,r,i;return!e.ownerDocument||!t.ownerDocument?(e==t&&(c=!0),e.ownerDocument?-1:1):(n=e.ownerDocument.createRange(),r=t.ownerDocument.createRange(),n.setStart(e,0),n.setEnd(e,0),r.setStart(t,0),r.setEnd(t,0),i=n.compareBoundaryPoints(Range.START_TO_END,r),i===0&&(c=!0),i)}),e.getText=function(t){var n,r,i="";for(r=0;t[r];r++)n=t[r],n.nodeType===3||n.nodeType===4?i+=n.nodeValue:n.nodeType!==8&&(i+=e.getText(n.childNodes));return i},function(){var e,n=document.createElement("div"),r="script"+(new Date).getTime();n.innerHTML="<a name='"+r+"'/>",e=document.documentElement,e.insertBefore(n,e.firstChild),document.getElementById(r)&&(t.find.ID=function(e,t,n){var r;if(typeof t.getElementById!="undefined"&&!n)return r=t.getElementById(e[1]),r?r.id===e[1]||typeof r.getAttributeNode!="undefined"&&r.getAttributeNode("id").nodeValue===e[1]?[r]:undefined:[]},t.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),e.removeChild(n),e=n=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),e.getElementsByTagName("*").length>0&&(t.find.TAG=function(e,t){var n,r,i=t.getElementsByTagName(e[1]);if(e[1]==="*"){n=[];for(r=0;i[r];r++)i[r].nodeType===1&&n.push(i[r]);i=n}return i}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(t.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var t,n=e,r=document.createElement("div");r.innerHTML="<p class='TEST'></p>";if(r.querySelectorAll&&r.querySelectorAll(".TEST").length===0)return;e=function(t,r,i,o){r=r||document;if(!o&&r.nodeType===9&&!e.isXML(r))try{return s(r.querySelectorAll(t),i)}catch(u){}return n(t,r,i,o)};for(t in n)e[t]=n[t];r=null}(),function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;t.order.splice(1,0,"CLASS"),t.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),e.contains=document.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:function(e,t){return e!==t&&(e.contains?e.contains(t):!0)},e.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1},u=function(n,r){var i=[],s="",o,u=r.nodeType?[r]:r;while(o=t.match.PSEUDO.exec(n))s+=o[0],n=n.replace(t.match.PSEUDO,"");n=t.relative[n]?n+"*":n;for(var a=0,f=u.length;a<f;a++)e(n,u[a],i);return e.filter(s,i)},window.tinymce.dom.Sizzle=e}(),function(e){var t,n=e.each,r=e.DOM,i=e.isIE,s=e.isWebKit;e.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(t,s,o,u){var a,f,l=this,c=l.events;if(s instanceof Array)return f=[],n(s,function(e){f.push(l.add(t,e,o,u))}),f;if(t&&t.hasOwnProperty&&t instanceof Array)return f=[],n(t,function(e){e=r.get(e),f.push(l.add(e,s,o,u))}),f;t=r.get(t);if(!t)return;return a=function(t){if(l.disabled)return;return t=t||window.event,t&&i&&(t.target||(t.target=t.srcElement),e.extend(t,l._stoppers)),u?o.call(u,t):o(t)},s=="unload"?(e.unloads.unshift({func:a}),a):s=="init"?(l.domLoaded?a():l.inits.push(a),a):(c.push({obj:t,name:s,func:o,cfunc:a,scope:u}),l._add(t,s,a),o)},remove:function(e,t,i){var s,o=this,u=o.events,a=!1;return e&&e.hasOwnProperty&&e instanceof Array?(s=[],n(e,function(e){e=r.get(e),s.push(o.remove(e,t,i))}),s):(e=r.get(e),n(u,function(n,r){if(n.obj==e&&n.name==t&&(!i||n.func==i||n.cfunc==i))return u.splice(r,1),o._remove(e,t,n.cfunc),a=!0,!1}),a)},clear:function(e){var t,n,i=this,s=i.events;if(e){e=r.get(e);for(t=s.length-1;t>=0;t--)n=s[t],n.obj===e&&(i._remove(n.obj,n.name,n.cfunc),n.obj=n.cfunc=null,s.splice(t,1))}},cancel:function(e){return e?(this.stop(e),this.prevent(e)):!1},stop:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1},prevent:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},destroy:function(){var e=this;n(e.events,function(t){e._remove(t.obj,t.name,t.cfunc),t.obj=t.cfunc=null}),e.events=[],e=null},_add:function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!1):e["on"+t]=n},_remove:function(e,t,n){if(e)try{e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!1):e["on"+t]=null}catch(r){}},_pageInit:function(){var e=this;if(e.domLoaded)return;e.domLoaded=!0,n(e.inits,function(e){e()}),e.inits=[]},_wait:function(e){var t=this,n=e.document;if(e.tinyMCE_GZ&&tinyMCE_GZ.loaded){t.domLoaded=1;return}if(n.readyState==="complete"){t._pageInit(e);return}n.attachEvent?(n.attachEvent("onreadystatechange",function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",arguments.callee),t._pageInit(e))}),n.documentElement.doScroll&&e==e.top&&function(){if(t.domLoaded)return;try{n.documentElement.doScroll("left")}catch(r){setTimeout(arguments.callee,0);return}t._pageInit(e)}()):n.addEventListener&&t._add(e,"DOMContentLoaded",function(){t._pageInit(e)}),t._add(e,"load",function(){t._pageInit(e)})},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),t=e.dom.Event=new e.dom.EventUtils,t._wait(window),e.addUnload(function(){t.destroy()})}(tinymce),function(e){e.dom.Element=function(t,n){var r,i,s=this;s.settings=n=n||{},s.id=t,s.dom=r=n.dom||e.DOM,e.isIE||(i=r.get(s.id)),e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(e){s[e]=function(){var n,i=[t];for(n=0;n<arguments.length;n++)i.push(arguments[n]);return i=r[e].apply(r,i),s.update(e),i}}),e.extend(s,{on:function(t,n,r){return e.dom.Event.add(s.id,t,n,r)},getXY:function(){return{x:parseInt(s.getStyle("left")),y:parseInt(s.getStyle("top"))}},getSize:function(){var e=r.get(s.id);return{w:parseInt(s.getStyle("width")||e.clientWidth),h:parseInt(s.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){s.setStyles({left:e,top:t})},moveBy:function(e,t){var n=s.getXY();s.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){s.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=s.getSize();s.resizeTo(n.w+e,n.h+t)},update:function(t){var i;if(e.isIE6&&n.blocker){t=t||"";if(t.indexOf("get")===0||t.indexOf("has")===0||t.indexOf("is")===0)return;if(t=="remove"){r.remove(s.blocker);return}s.blocker?i=r.get(s.blocker):(s.blocker=r.uniqueId(),i=r.add(n.container||r.getRoot(),"iframe",{id:s.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),r.setStyle(i,"opacity",0)),r.setStyles(i,{left:s.getStyle("left",1),top:s.getStyle("top",1),width:s.getStyle("width",1),height:s.getStyle("height",1),display:s.getStyle("display",1),zIndex:parseInt(s.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(e){var t=e.is,n=e.isIE,r=e.each;e.create("tinymce.dom.Selection",{Selection:function(t,n,i){var s=this;s.dom=t,s.win=n,s.serializer=i,r(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(t){s[t]=new e.util.Dispatcher(s)}),s.win.getSelection||(s.tridentSel=new e.dom.TridentSelection(s)),e.isIE&&t.boxModel&&this._fixIESelection(),e.addUnload(s.destroy,s)},setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)},getContent:function(e){var n,r,i,s=this,o=s.getRng(),u=s.dom.create("body"),a=s.getSel();return e=e||{},n=r="",e.get=!0,e.format=e.format||"html",e.forced_root_block="",s.onBeforeGetContent.dispatch(s,e),e.format=="text"?s.isCollapsed()?"":o.text||(a.toString?a+"":""):(o.cloneContents?(i=o.cloneContents(),i&&u.appendChild(i)):t(o.item)||t(o.htmlText)?(u.innerHTML="<br>"+(o.item?o.item(0).outerHTML:o.htmlText),u.removeChild(u.firstChild)):u.innerHTML=o+"",/^\s/.test(u.innerHTML)&&(n=" "),/\s+$/.test(u.innerHTML)&&(r=" "),e.getInner=!0,e.content=s.isCollapsed()?"":n+s.serializer.serialize(u,e)+r,s.onGetContent.dispatch(s,e),e.content)},setContent:function(e,t){var n,r,i,s=this,o=s.getRng(),u=s.win.document;t=t||{format:"html"},t.set=!0,e=t.content=e,t.no_events||s.onBeforeSetContent.dispatch(s,t),e=t.content;if(o.insertNode){e+='<span id="__caret">_</span>',o.startContainer==u&&o.endContainer==u?u.body.innerHTML=e:(o.deleteContents(),u.body.childNodes.length==0?u.body.innerHTML=e:o.createContextualFragment?o.insertNode(o.createContextualFragment(e)):(r=u.createDocumentFragment(),i=u.createElement("div"),r.appendChild(i),i.outerHTML=e,o.insertNode(r))),n=s.dom.get("__caret"),o=u.createRange(),o.setStartBefore(n),o.setEndBefore(n),s.setRng(o),s.dom.remove("__caret");try{s.setRng(o)}catch(a){}}else o.item&&(u.execCommand("Delete",!1,null),o=s.getRng()),/^\s+/.test(e)?(o.pasteHTML('<span id="__mce_tmp">_</span>'+e),s.dom.remove("__mce_tmp")):o.pasteHTML(e);t.no_events||s.onSetContent.dispatch(s,t)},getStart:function(){var e,t,n,r,i=this.getRng();if(i.duplicate||i.item){if(i.item)return i.item(0);n=i.duplicate(),n.collapse(1),e=n.parentElement(),t=r=i.parentElement();while(r=r.parentNode)if(r==e){e=t;break}return e}return e=i.startContainer,e.nodeType==1&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,i.startOffset)]),e&&e.nodeType==3?e.parentNode:e},getEnd:function(){var e,t,n=this,r=n.getRng();return r.duplicate||r.item?r.item?r.item(0):(r=r.duplicate(),r.collapse(0),e=r.parentElement(),e&&e.nodeName=="BODY"?e.lastChild||e:e):(e=r.endContainer,t=r.endOffset,e.nodeType==1&&e.hasChildNodes()&&(e=e.childNodes[t>0?t-1:t]),e&&e.nodeType==3?e.parentNode:e)},getBookmark:function(e,t){function p(e,t){var n=0;return r(c.select(e),function(e,r){e==t&&(n=r)}),n}var n,i,s,o,u,a,f,l=this,c=l.dom,h="﻿";if(e==2){function d(){function i(e,r){var i,s,o=e[r?"startContainer":"endContainer"],u=e[r?"startOffset":"endOffset"],a=[],f=0;if(o.nodeType==3){if(t)for(i=o.previousSibling;i&&i.nodeType==3;i=i.previousSibling)u+=i.nodeValue.length;a.push(u)}else s=o.childNodes,u>=s.length&&s.length&&(f=1,u=Math.max(0,s.length-1)),a.push(l.dom.nodeIndex(s[u],t)+f);for(;o&&o!=n;o=o.parentNode)a.push(l.dom.nodeIndex(o,t));return a}var e=l.getRng(!0),n=c.getRoot(),r={};return r.start=i(e,!0),l.isCollapsed()||(r.end=i(e)),r}return l.tridentSel?l.tridentSel.getBookmark(e):d()}if(e)return{rng:l.getRng()};n=l.getRng(),s=c.uniqueId(),o=tinyMCE.activeEditor.selection.isCollapsed(),f="overflow:hidden;line-height:0px";if(n.duplicate||n.item){if(!!n.item)return a=n.item(0),u=a.nodeName,{name:u,index:p(u,a)};i=n.duplicate();try{n.collapse(),n.pasteHTML('<span data-mce-type="bookmark" id="'+s+'_start" style="'+f+'">'+h+"</span>"),o||(i.collapse(!1),n.moveToElementText(i.parentElement()),n.compareEndPoints("StartToEnd",i)==0&&i.move("character",-1),i.pasteHTML('<span data-mce-type="bookmark" id="'+s+'_end" style="'+f+'">'+h+"</span>"))}catch(v){return null}}else{a=l.getNode(),u=a.nodeName;if(u=="IMG")return{name:u,index:p(u,a)};i=n.cloneRange(),o||(i.collapse(!1),i.insertNode(c.create("span",{"data-mce-type":"bookmark",id:s+"_end",style:f},h))),n.collapse(!0),n.insertNode(c.create("span",{"data-mce-type":"bookmark",id:s+"_start",style:f},h))}return l.moveToBookmark({id:s,keep:1}),{id:s}},moveToBookmark:function(t){var i,s,o,u,a,f,l=this,c=l.dom;if(t)if(t.start){i=c.createRng(),s=c.getRoot();function h(e){var n,r,o,u,a=t[e?"start":"end"];if(a){o=a[0];for(r=s,n=a.length-1;n>=1;n--){u=r.childNodes;if(a[n]>u.length-1)return;r=u[a[n]]}r.nodeType===3&&(o=Math.min(a[0],r.nodeValue.length)),r.nodeType===1&&(o=Math.min(a[0],r.childNodes.length)),e?i.setStart(r,o):i.setEnd(r,o)}return!0}if(l.tridentSel)return l.tridentSel.moveToBookmark(t);h(!0)&&h()&&l.setRng(i)}else if(t.id){function p(n){var i,s,l,h,p=c.get(t.id+"_"+n),d=t.keep;if(p){i=p.parentNode,n=="start"?(d?(i=p.firstChild,s=1):s=c.nodeIndex(p),o=u=i,a=f=s):(d?(i=p.firstChild,s=1):s=c.nodeIndex(p),u=i,f=s);if(!d){h=p.previousSibling,l=p.nextSibling,r(e.grep(p.childNodes),function(e){e.nodeType==3&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});while(p=c.get(t.id+"_"+n))c.remove(p,1);h&&l&&h.nodeType==l.nodeType&&h.nodeType==3&&!e.isOpera&&(s=h.nodeValue.length,h.appendData(l.nodeValue),c.remove(l),n=="start"?(o=u=h,a=f=s):(u=h,f=s))}}}function d(e){return c.isBlock(e)&&!e.innerHTML&&(e.innerHTML=n?" ":'<br data-mce-bogus="1" />'),e}p("start"),p("end"),o&&(i=c.createRng(),i.setStart(d(o),a),i.setEnd(d(u),f),l.setRng(i))}else t.name?l.select(c.select(t.name)[t.index]):t.rng&&l.setRng(t.rng)},select:function(t,n){var r,i=this,s=i.dom,o=s.createRng();if(t){r=s.nodeIndex(t),o.setStart(t.parentNode,r),o.setEnd(t.parentNode,r+1);if(n){function u(t,n){var r=new e.dom.TreeWalker(t,t);do{if(t.nodeType==3&&e.trim(t.nodeValue).length!=0){n?o.setStart(t,0):o.setEnd(t,t.nodeValue.length);return}if(t.nodeName=="BR"){n?o.setStartBefore(t):o.setEndBefore(t);return}}while(t=n?r.next():r.prev())}u(t,1),u(t)}i.setRng(o)}return t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?t.compareEndPoints("StartToEnd",t)===0:!n||t.collapsed},collapse:function(e){var t,n=this,r=n.getRng();r.item&&(t=r.item(0),r=n.win.document.body.createTextRange(),r.moveToElementText(t)),r.collapse(!!e),n.setRng(r)},getSel:function(){var e=this,t=this.win;return t.getSelection?t.getSelection():t.document.selection},getRng:function(t){var n,r,i,s=this,o=s.win.document;if(t&&s.tridentSel)return s.tridentSel.getRangeAt(0);try{if(n=s.getSel())r=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():o.createRange()}catch(u){}return e.isIE&&r&&r.setStart&&o.selection.createRange().item&&(i=o.selection.createRange().item(0),r=o.createRange(),r.setStartBefore(i),r.setEndAfter(i)),r||(r=o.createRange?o.createRange():o.body.createTextRange()),s.selectedRange&&s.explicitRange&&(r.compareBoundaryPoints(r.START_TO_START,s.selectedRange)===0&&r.compareBoundaryPoints(r.END_TO_END,s.selectedRange)===0?r=s.explicitRange:(s.selectedRange=null,s.explicitRange=null)),r},setRng:function(e){var t,n=this;if(!n.tridentSel){t=n.getSel();if(t){n.explicitRange=e;try{t.removeAllRanges()}catch(r){}t.addRange(e),n.selectedRange=t.rangeCount>0?t.getRangeAt(0):null}}else{if(e.cloneRange){n.tridentSel.addRange(e);return}try{e.select()}catch(r){}}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){var e,t=this,n=t.getRng(),r=t.getSel(),i=n.startContainer,s=n.endContainer;if(!n)return t.dom.getRoot();if(n.setStart){e=n.commonAncestorContainer;if(!n.collapsed){n.startContainer==n.endContainer&&n.endOffset-n.startOffset<2&&n.startContainer.hasChildNodes()&&(e=n.startContainer.childNodes[n.startOffset]);if(i.nodeType===3&&s.nodeType===3){function o(e,t){var n=e;while(e&&e.nodeType===3&&e.length===0)e=t?e.nextSibling:e.previousSibling;return e||n}i.length===n.startOffset?i=o(i.nextSibling,!0):i=i.parentNode,n.endOffset===0?s=o(s.previousSibling,!1):s=s.parentNode;if(i&&i===s)return i}}return e&&e.nodeType==3?e.parentNode:e}return n.item?n.item(0):n.parentElement()},getSelectedBlocks:function(t,n){var r,i,s=this,o=s.dom,u=[],a=o.getParent(t||s.getStart(),o.isBlock),f=o.getParent(n||s.getEnd(),o.isBlock);a&&u.push(a);if(a&&f&&a!=f){r=a,i=new e.dom.TreeWalker(a,o.getRoot());while((r=i.next())&&r!=f)o.isBlock(r)&&u.push(r)}return f&&a!=f&&u.push(f),u},normalize:function(){function i(i){var s,o,u=r.dom,a=u.getRoot(),f=t[(i?"start":"end")+"Container"],l=t[(i?"start":"end")+"Offset"];f.nodeType===9&&(f=f.body,l=0);if(f===a&&f.hasChildNodes()){f=f.childNodes[Math.min(!i&&l>0?l-1:l,f.childNodes.length-1)],l=0;if(f.hasChildNodes()){o=f,s=new e.dom.TreeWalker(f,a);do{if(o.nodeType===3){l=i?0:o.nodeValue.length-1,f=o,n=!0;break}if(/^(BR|IMG)$/.test(o.nodeName)){l=u.nodeIndex(o),f=o.parentNode,o.nodeName=="IMG"&&!i&&l++,n=!0;break}}while(o=i?s.next():s.prev())}}n&&t["set"+(i?"Start":"End")](f,l)}var t,n,r=this;if(e.isIE)return;t=r.getRng(),i(!0),t.collapsed||i(),n&&r.setRng(t)},destroy:function(t){var n=this;n.win=null,t||e.removeUnload(n.destroy)},_fixIESelection:function(){function o(e,t){var n=s.createTextRange();try{n.moveToPoint(e,t)}catch(r){n=null}return n}function u(e){var n;e.button?(n=o(e.x,e.y),n&&(n.compareEndPoints("StartToStart",t)>0?n.setEndPoint("StartToStart",t):n.setEndPoint("EndToEnd",t),n.select())):a()}function a(){var n=i.selection.createRange();t&&!n.item&&n.compareEndPoints("StartToEnd",n)===0&&t.select(),r.unbind(i,"mouseup",a),r.unbind(i,"mousemove",u),t=e=0}var e,t,n,r=this.dom,i=r.doc,s=i.body;i.documentElement.unselectable=!0,r.bind(i,["mousedown","contextmenu"],function(s){if(s.target.nodeName==="HTML"){e&&a(),n=i.documentElement;if(n.scrollHeight>n.clientHeight)return;e=1,t=o(s.x,s.y),t&&(r.bind(i,"mouseup",a),r.bind(i,"mousemove",u),r.win.focus(),t.select())}})}})}(tinymce),function(e){e.dom.Serializer=function(t,n,r){var i,s,o,u=e.isIE,a=e.each;return t.apply_source_formatting||(t.indent=!1),n=n||e.DOM,r=r||new e.html.Schema(t),t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs="remove_trailing_brs"in t?t.remove_trailing_brs:!0,i=new e.util.Dispatcher(self),s=new e.util.Dispatcher(self),o=new e.html.DomParser(t,r),o.addAttributeFilter("src,href,style",function(e,r){var i,s,o,u=e.length,a="data-mce-"+r,f=t.url_converter,l=t.url_converter_scope;while(u--)i=e[u],s=i.attributes.map[a],s!==o?(i.attr(r,s.length>0?s:null),i.attr(a,null)):(s=i.attributes.map[r],r==="style"?s=n.serializeStyle(n.parseStyle(s),i.name):f&&(s=f.call(l,s,r,i.name)),i.attr(r,s.length>0?s:null))}),o.addAttributeFilter("class",function(e){var t,n,r=e.length;while(r--)t=e[r],n=t.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),t.attr("class",n.length>0?n:null)}),o.addAttributeFilter("data-mce-type",function(e,t,n){var r,i=e.length;while(i--)r=e[i],r.attributes.map["data-mce-type"]==="bookmark"&&!n.cleanup&&r.remove()}),o.addNodeFilter("script,style",function(e,t){function s(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}var n,r,i=e.length;while(i--)n=e[i],r=n.firstChild?n.firstChild.value:"",t==="script"?(n.attr("type",(n.attr("type")||"text/javascript").replace(/^mce\-/,"")),r.length>0&&(n.firstChild.value="// <![CDATA[\n"+s(r)+"\n// ]]>")):r.length>0&&(n.firstChild.value="<!--\n"+s(r)+"\n-->")}),o.addNodeFilter("#comment",function(e){var t,n=e.length;while(n--)t=e[n],t.value.indexOf("[CDATA[")===0?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):t.value.indexOf("mce:protected ")===0&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),o.addNodeFilter("xml:namespace,input",function(e,t){var n,r=e.length;while(r--)n=e[r],n.type===7?n.remove():n.type===1&&t==="input"&&!("type"in n.attributes.map)&&n.attr("type","text")}),t.fix_list_elements&&o.addNodeFilter("ul,ol",function(e){var t,n,r=e.length;while(r--)t=e[r],n=t.parent,(n.name==="ul"||n.name==="ol")&&t.prev&&t.prev.name==="li"&&t.prev.append(t)}),o.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,t){var n=e.length;while(n--)e[n].attr(t,null)}),{schema:r,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,onPreProcess:i,onPostProcess:s,serialize:function(f,l){var c,h,p,d,v;return u&&n.select("script,style,select,map").length>0?(v=f.innerHTML,f=f.cloneNode(!1),n.setHTML(f,v)):f=f.cloneNode(!0),c=f.ownerDocument.implementation,c.createHTMLDocument&&(h=c.createHTMLDocument(""),a(f.nodeName=="BODY"?f.childNodes:[f],function(e){h.body.appendChild(h.importNode(e,!0))}),f.nodeName!="BODY"?f=h.body.firstChild:f=h.body,p=n.doc,n.doc=h),l=l||{},l.format=l.format||"html",l.no_events||(l.node=f,i.dispatch(self,l)),d=new e.html.Serializer(t,r),l.content=d.serialize(o.parse(l.getInner?f.innerHTML:e.trim(n.getOuterHTML(f),l),l)),l.cleanup||(l.content=l.content.replace(/\uFEFF|\u200B/g,"")),l.no_events||s.dispatch(self,l),p&&(n.doc=p),l.node=null,l.content},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)}}}}(tinymce),function(e){e.dom.ScriptLoader=function(){function l(t,n){function f(){a.remove(o),r&&(r.onreadystatechange=r.onload=r=null),n()}function l(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+t)}var r,i,s,o,u=this,a=e
.DOM;o=a.uniqueId();if(e.isIE6){i=new e.util.URI(t),s=location;if(i.host==s.hostname&&i.port==s.port&&i.protocol+":"==s.protocol&&i.protocol.toLowerCase()!="file"){e.util.XHR.send({url:e._addVer(i.getURI()),success:function(e){var t=a.create("script",{type:"text/javascript"});t.text=e,document.getElementsByTagName("head")[0].appendChild(t),a.remove(t),f()},error:l});return}}r=a.create("script",{id:o,type:"text/javascript",src:e._addVer(t)}),e.isIE||(r.onload=f),r.onerror=l,e.isOpera||(r.onreadystatechange=function(){var e=r.readyState;(e=="complete"||e=="loaded")&&f()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}var t,n=0,r=1,i=2,s={},o=[],u={},a=[],f=0;this.isDone=function(e){return s[e]==i},this.markDone=function(e){s[e]=i},this.add=this.load=function(e,r,i){var a=s[e];a==t&&(o.push(e),s[e]=n),r&&(u[e]||(u[e]=[]),u[e].push({func:r,scope:i||this}))},this.loadQueue=function(e,t){this.loadScripts(o,e,t)},this.loadScripts=function(n,o,c){function p(n){e.each(u[n],function(e){e.func.call(e.scope)}),u[n]=t}var h;a.push({func:o,scope:c||this}),h=function(){var t=e.grep(n);n.length=0,e.each(t,function(e){if(s[e]==i){p(e);return}s[e]!=r&&(s[e]=r,f++,l(e,function(){s[e]=i,f--,p(e),h()}))}),f||(e.each(a,function(e){e.func.call(e.scope)}),a.length=0)},h()}},e.ScriptLoader=new e.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(e,t){function r(e,n,r,i){var s,o;if(e){if(!i&&e[n])return e[n];if(e!=t){s=e[r];if(s)return s;for(o=e.parentNode;o&&o!=t;o=o.parentNode){s=o[r];if(s)return s}}}}var n=e;this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)}},function(e){e.dom.RangeUtils=function(t){var n="﻿";this.walk=function(n,r){function v(e){var t=e[0];return t.nodeType===3&&t===l&&c>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],p===0&&e.length>0&&t===h&&t.nodeType===3&&e.splice(e.length-1,1),e}function m(e,t,n){var r=[];for(;e&&e!=n;e=e[t])r.push(e);return r}function g(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function y(e,t,n){var i=n?"nextSibling":"previousSibling";for(u=e,a=u.parentNode;u&&u!=t;u=a)a=u.parentNode,f=m(u==e?u:u[i],i),f.length&&(n||f.reverse(),r(v(f)))}var i,s,o,u,a,f,l=n.startContainer,c=n.startOffset,h=n.endContainer,p=n.endOffset,d=t.select("td.mceSelected,th.mceSelected");if(d.length>0){e.each(d,function(e){r([e])});return}l.nodeType==1&&l.hasChildNodes()&&(l=l.childNodes[c]),h.nodeType==1&&h.hasChildNodes()&&(h=h.childNodes[Math.min(p-1,h.childNodes.length-1)]);if(l==h)return r(v([l]));i=t.findCommonAncestor(l,h);for(u=l;u;u=u.parentNode){if(u===h)return y(l,i,!0);if(u===i)break}for(u=h;u;u=u.parentNode){if(u===l)return y(h,i);if(u===i)break}s=g(l,i)||l,o=g(h,i)||h,y(l,s,!0),f=m(s==l?s:s.nextSibling,"nextSibling",o==h?o.nextSibling:o),f.length&&r(v(f)),y(h,o)},this.split=function(e){function s(e,t){return e.splitText(t)}var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t==r&&t.nodeType==3?n>0&&n<t.nodeValue.length&&(r=s(t,n),t=r.previousSibling,i>n?(i-=n,t=r=s(r,i).previousSibling,i=r.nodeValue.length,n=0):i=0):(t.nodeType==3&&n>0&&n<t.nodeValue.length&&(t=s(t,n),n=0),r.nodeType==3&&i>0&&i<r.nodeValue.length&&(r=s(r,i).previousSibling,i=r.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}}},e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1}}(tinymce),function(e){var t=e.dom.Event,n=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(r,i){var s,o,u,a,f,l=this,c=r.root,h=r.items,p=r.enableUpDown,d=r.enableLeftRight||!r.enableUpDown,v=r.excludeFromTabOrder;i=i||e.DOM,s=function(e){f=e.target.id},o=function(e){i.setAttrib(e.target.id,"tabindex","-1")},a=function(){var e=i.get(f);i.setAttrib(e,"tabindex","0"),e.focus()},l.focus=function(){i.get(f).focus()},l.destroy=function(){n(h,function(e){i.unbind(i.get(e.id),"focus",s),i.unbind(i.get(e.id),"blur",o)}),i.unbind(i.get(c),"focus",a),i.unbind(i.get(c),"keydown",u),h=i=c=l.focus=s=o=u=a=null,l.destroy=function(){}},l.moveFocus=function(e,s){var o,u=-1,a=l.controls;if(!f)return;n(h,function(e,t){if(e.id===f)return u=t,!1}),u+=e,u<0?u=h.length-1:u>=h.length&&(u=0),o=h[u],i.setAttrib(f,"tabindex","-1"),i.setAttrib(o.id,"tabindex","0"),i.get(o.id).focus(),r.actOnFocus&&r.onAction(o.id),s&&t.cancel(s)},u=function(e){var n=37,i=39,s=38,o=40,u=27,a=14,c=13,h=32;switch(e.keyCode){case n:d&&l.moveFocus(-1);break;case i:d&&l.moveFocus(1);break;case s:p&&l.moveFocus(-1);break;case o:p&&l.moveFocus(1);break;case u:r.onCancel&&(r.onCancel(),t.cancel(e));break;case a:case c:case h:r.onAction&&(r.onAction(f),t.cancel(e))}},n(h,function(e,t){var n;e.id||(e.id=i.uniqueId("_mce_item_")),v?(i.bind(e.id,"blur",o),n="-1"):n=t===0?"0":"-1",i.setAttrib(e.id,"tabindex",n),i.bind(i.get(e.id),"focus",s)}),h[0]&&(f=h[0].id),i.setAttrib(c,"tabindex","-1"),i.bind(i.get(c),"focus",a),i.bind(i.get(c),"keydown",u)}})}(tinymce),function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n,r){this.id=t,this.settings=n=n||{},this.rendered=!1,this.onRender=new e.util.Dispatcher(this),this.classPrefix="",this.scope=n.scope||this,this.disabled=0,this.active=0,this.editor=r},setAriaProperty:function(e,n){var r=t.get(this.id+"_aria")||t.get(this.id);r&&t.setAttrib(r,"aria-"+e,!!n)},focus:function(){t.get(this.id).focus()},setDisabled:function(e){e!=this.disabled&&(this.setAriaProperty("disabled",e),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e,this.setAriaProperty("pressed",e))},isActive:function(){return this.active},setState:function(e,n){var r=t.get(this.id);e=this.classPrefix+e,n?t.addClass(r,e):t.removeClass(r,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e,t=this;n(t.disabled)&&(e=t.disabled,t.disabled=-1,t.setDisabled(e)),n(t.active)&&(e=t.active,t.active=-1,t.setActive(e))},remove:function(){t.remove(this.id),this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(e){var t=e.is,n=e.DOM,r=e.each,i=e.walk;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.setAriaProperty("checked",!!e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent(),t(e.selected)&&e.setSelected(e.selected)}})}(tinymce),function(e){var t=e.is,n=e.DOM,r=e.each,i=e.walk;e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var r=this;r.parent(t,n),r.items={},r.collapsed=!1,r.menuCount=0,r.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;e&&i(t,function(e){e.expand&&e.expand()},"items",t),t.collapsed=!1},collapse:function(e){var t=this;e&&i(t,function(e){e.collapse&&e.collapse()},"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(t){return t.settings||(t=new e.ui.MenuItem(t.id||n.uniqueId(),t)),this.onAddItem.dispatch(this,t),this.items[t.id]=t},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return this.menuCount!==0},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;i(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(t){var r=new e.ui.Menu(t.id||n.uniqueId(),t);return r.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),r}})}(tinymce),function(e){var t=e.is,n=e.DOM,r=e.each,i=e.dom.Event,s=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(r,i){i=i||{},i.container=i.container||n.doc.body,i.offset_x=i.offset_x||0,i.offset_y=i.offset_y||0,i.vp_offset_x=i.vp_offset_x||0,i.vp_offset_y=i.vp_offset_y||0,t(i.icons)&&!i.icons&&(i["class"]+=" mceNoIcons"),this.parent(r,i),this.onShowMenu=new e.util.Dispatcher(this),this.onHideMenu=new e.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(t){var r,i=this,s=i.settings;return t.container=t.container||s.container,t.parent=i,t.constrain=t.constrain||s.constrain,t["class"]=t["class"]||s["class"],t.vp_offset_x=t.vp_offset_x||s.vp_offset_x,t.vp_offset_y=t.vp_offset_y||s.vp_offset_y,t.keyboard_focus=s.keyboard_focus,r=new e.ui.DropMenu(t.id||n.uniqueId(),t),r.onAddItem.add(i.onAddItem.dispatch,i.onAddItem),r},focus:function(){var e=this;e.keyboardNav&&e.keyboardNav.focus()},update:function(){var e=this,t=e.settings,r=n.get("menu_"+e.id+"_tbl"),i=n.get("menu_"+e.id+"_co"),s=t.max_width?Math.min(r.clientWidth,t.max_width):r.clientWidth,o=t.max_height?Math.min(r.clientHeight,t.max_height):r.clientHeight;n.boxModel?e.element.setStyles({width:s,height:o}):e.element.setStyles({width:s+2,height:o+2}),t.max_width&&n.setStyle(i,"width",s),t.max_height&&(n.setStyle(i,"height",o),r.clientHeight<t.max_height&&n.setStyle(i,"overflow","hidden"))},showMenu:function(t,o,u){var a,f,l,c,h,p,d=this,v=d.settings,m=n.getViewPort(),g=2,y=d.classPrefix;d.collapse(1);if(d.isMenuVisible)return;d.rendered?a=n.get("menu_"+d.id):(a=n.add(d.settings.container,d.renderNode()),r(d.items,function(e){e.postRender()}),d.element=new s("menu_"+d.id,{blocker:1,container:v.container})),e.isOpera||n.setStyles(a,{left:-65535,top:-65535}),n.show(a),d.update(),t+=v.offset_x||0,o+=v.offset_y||0,m.w-=4,m.h-=4,v.constrain&&(f=a.clientWidth-g,l=a.clientHeight-g,c=m.x+m.w,h=m.y+m.h,t+v.vp_offset_x+f>c&&(t=u?u-f:Math.max(0,c-v.vp_offset_x-f)),o+v.vp_offset_y+l>h&&(o=Math.max(0,h-v.vp_offset_y-l))),n.setStyles(a,{left:t,top:o}),d.element.update(),d.isMenuVisible=1,d.mouseClickFunc=i.add(a,"click",function(e){var t;e=e.target;if(e&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,y+"ItemSub")){t=d.items[e.id];if(t.isDisabled())return;p=d;while(p)p.hideMenu&&p.hideMenu(),p=p.settings.parent;return t.settings.onclick&&t.settings.onclick(e),i.cancel(e)}}),d.hasMenus()&&(d.mouseOverFunc=i.add(a,"mouseover",function(e){var t,r;e=e.target;if(e&&(e=n.getParent(e,"tr"))){t=d.items[e.id],d.lastMenu&&d.lastMenu.collapse(1);if(t.isDisabled())return;e&&n.hasClass(e,y+"ItemSub")&&(r=n.getRect(e),t.showMenu(r.x+r.w-g,r.y-g,r.x),d.lastMenu=t,n.addClass(n.get(t.id).firstChild,y+"ItemActive"))}})),i.add(a,"keydown",d._keyHandler,d),d.onShowMenu.dispatch(d),v.keyboard_focus&&d._setupKeyboardNav()},hideMenu:function(e){var t,r=this,s=n.get("menu_"+r.id);if(!r.isMenuVisible)return;r.keyboardNav&&r.keyboardNav.destroy(),i.remove(s,"mouseover",r.mouseOverFunc),i.remove(s,"click",r.mouseClickFunc),i.remove(s,"keydown",r._keyHandler),n.hide(s),r.isMenuVisible=0,e||r.collapse(1),r.element&&r.element.hide(),(t=n.get(r.id))&&n.removeClass(t.firstChild,r.classPrefix+"ItemActive"),r.onHideMenu.dispatch(r)},add:function(e){var t,r=this;return e=r.parent(e),r.isRendered&&(t=n.get("menu_"+r.id))&&r._add(n.select("tbody",t)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return n.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);e.keyboardNav&&e.keyboardNav.destroy(),i.remove(t,"mouseover",e.mouseOverFunc),i.remove(n.select("a",t),"focus",e.mouseOverFunc),i.remove(t,"click",e.mouseClickFunc),i.remove(t,"keydown",e._keyHandler),e.element&&e.element.remove(),n.remove(t)},renderNode:function(){var e,t,i,o=this,u=o.settings,a=n.create("div",{role:"listbox",id:"menu_"+o.id,"class":u["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});return o.settings.parent&&n.setAttrib(a,"aria-parent","menu_"+o.settings.parent.id),i=n.add(a,"div",{role:"presentation",id:"menu_"+o.id+"_co","class":o.classPrefix+(u["class"]?" "+u["class"]:"")}),o.element=new s("menu_"+o.id,{blocker:1,container:u.container}),u.menu_line&&n.add(i,"span",{"class":o.classPrefix+"Line"}),e=n.add(i,"table",{role:"presentation",id:"menu_"+o.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),t=n.add(e,"tbody"),r(o.items,function(e){o._add(t,e)}),o.rendered=!0,a},_setupKeyboardNav:function(){var t=this,r=n.get("menu_"+t.id),i=n.select("a[role=option]","menu_"+t.id);i.splice(0,0,r),t.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+t.id,items:i,onCancel:function(){t.hideMenu()},enableUpDown:!0}),r.focus()},_keyHandler:function(e){var t=this;switch(e.keyCode){case 37:t.settings.parent&&(t.hideMenu(),t.settings.parent.focus(),i.cancel(e));break;case 39:t.mouseOverFunc&&t.mouseOverFunc(e)}},_add:function(e,t){var r,i,s,o,u,a=t.settings,f=this.classPrefix;if(a.separator){s=n.add(e,"tr",{id:t.id,"class":f+"ItemSeparator"}),n.add(s,"td",{"class":f+"ItemSeparator"}),(r=s.previousSibling)&&n.addClass(r,"mceLast");return}r=s=n.add(e,"tr",{id:t.id,"class":f+"Item "+f+"ItemEnabled"}),r=o=n.add(r,a.titleItem?"th":"td"),r=i=n.add(r,"a",{id:t.id+"_aria",role:a.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),a.parent&&(n.setAttrib(i,"aria-haspopup","true"),n.setAttrib(i,"aria-owns","menu_"+t.id)),n.addClass(o,a["class"]),u=n.add(r,"span",{"class":"mceIcon"+(a.icon?" mce_"+a.icon:"")}),a.icon_src&&n.add(u,"img",{src:a.icon_src}),r=n.add(r,a.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title),t.settings.style&&n.setAttrib(r,"style",t.settings.style),e.childNodes.length==1&&n.addClass(s,"mceFirst"),(r=s.previousSibling)&&n.hasClass(r,f+"ItemSeparator")&&n.addClass(s,"mceFirst"),t.collapse&&n.addClass(s,f+"ItemSub"),(r=s.previousSibling)&&n.removeClass(r,"mceLast"),n.addClass(s,"mceLast")}})}(tinymce),function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceButton"},renderHTML:function(){var e=this.classPrefix,n=this.settings,r=t.encode(n.label||""),i='<a role="button" id="'+this.id+'" href="javascript:;" class="'+e+" "+e+"Enabled "+n["class"]+(r?" "+e+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+t.encode(n.title)+'">';return n.image&&(!this.editor||!this.editor.forcedHighContrastMode)?i+='<img class="mceIcon" src="'+n.image+'" alt="'+t.encode(n.title)+'" />'+r:i+='<span class="mceIcon '+n["class"]+'"></span>'+(r?'<span class="'+e+'Label">'+r+"</span>":""),i+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+n.title+"</span>",i+="</a>",i},postRender:function(){var t,n=this,r=n.settings;e.isIE&&n.editor&&e.dom.Event.add(n.id,"mousedown",function(){var e=n.editor.selection.getNode().nodeName;t=e==="IMG"?n.editor.selection.getBookmark():null}),e.dom.Event.add(n.id,"click",function(i){if(!n.isDisabled())return e.isIE&&n.editor&&t!==null&&n.editor.selection.moveToBookmark(t),r.onclick.call(r.scope,i)}),e.dom.Event.add(n.id,"keyup",function(t){if(!n.isDisabled()&&t.keyCode==e.VK.SPACEBAR)return r.onclick.call(r.scope,t)})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.util.Dispatcher;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n,r){var s=this;s.parent(t,n,r),s.items=[],s.onChange=new i(s),s.onPostRender=new i(s),s.onAdd=new i(s),s.onRenderMenu=new e.util.Dispatcher(this),s.classPrefix="mceListBox"},select:function(e){var t,n,i=this;if(e==undefined)return i.selectByIndex(-1);e&&typeof e=="function"?n=e:n=function(t){return t==e},e!=i.selectedValue&&(r(i.items,function(e,r){if(n(e.value))return t=1,i.selectByIndex(r),!1}),t||i.selectByIndex(-1))},selectByIndex:function(e){var n,r,i,s=this;e!=s.selectedIndex&&(n=t.get(s.id+"_text"),i=t.get(s.id+"_voiceDesc"),r=s.items[e],r?(s.selectedValue=r.value,s.selectedIndex=e,t.setHTML(n,t.encode(r.title)),t.setHTML(i,s.settings.title+" - "+r.title),t.removeClass(n,"mceTitle"),t.setAttrib(s.id,"aria-valuenow",r.title)):(t.setHTML(n,t.encode(s.settings.title)),t.setHTML(i,t.encode(s.settings.title)),t.addClass(n,"mceTitle"),s.selectedValue=s.selectedIndex=null,t.setAttrib(s.id,"aria-valuenow",s.settings.title)),n=0)},add:function(t,n,r){var i=this;r=r||{},r=e.extend(r,{title:t,value:n}),i.items.push(r),i.onAdd.dispatch(i,r)},getLength:function(){return this.items.length},renderHTML:function(){var e="",n=this,r=n.settings,i=n.classPrefix;return e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+n.id+'_voiceDesc" aria-describedby="'+n.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+n.id+'" cellpadding="0" cellspacing="0" class="'+i+" "+i+"Enabled"+(r["class"]?" "+r["class"]:"")+'"><tbody><tr>',e+="<td>"+t.createHTML("span",{id:n.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},n.settings.title),e+=t.createHTML("a",{id:n.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},t.encode(n.settings.title))+"</td>",e+="<td>"+t.createHTML("a",{id:n.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",e+="</tr></tbody></table></span>",e},showMenu:function(){var i,s,o=this,u=t.get(this.id);if(o.isDisabled()||o.items.length==0)return;if(o.menu&&o.menu.isMenuVisible)return o.hideMenu();o.isMenuRendered||(o.renderMenu(),o.isMenuRendered=!0),i=t.getPos(u),s=o.menu,s.settings.offset_x=i.x,s.settings.offset_y=i.y,s.settings.keyboard_focus=!e.isOpera,o.oldID&&s.items[o.oldID].setSelected(0),r(o.items,function(e){e.value===o.selectedValue&&(s.items[e.id].setSelected(1),o.oldID=e.id)}),s.showMenu(0,u.clientHeight),n.add(t.doc,"mousedown",o.hideMenu,o),t.addClass(o.id,o.classPrefix+"Selected")},hideMenu:function(e){var r=this;if(r.menu&&r.menu.isMenuVisible){t.removeClass(r.id,r.classPrefix+"Selected");if(!(!e||e.type!="mousedown"||e.target.id!=r.id+"_text"&&e.target.id!=r.id+"_open"))return;if(!e||!t.getParent(e.target,".mceMenu"))t.removeClass(r.id,r.classPrefix+"Selected"),n.remove(t.doc,"mousedown",r.hideMenu,r),r.menu.hideMenu()}},renderMenu:function(){var e=this,n=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":e.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});n.onHideMenu.add(function(){e.hideMenu(),e.focus()}),n.add({title:e.settings.title,"class":"mceMenuItemTitle",onclick:function(){e.settings.onselect("")!==!1&&e.select("")}}),r(e.items,function(r){r.value===undefined?n.add({title:r.title,role:"option","class":"mceMenuItemTitle",onclick:function(){e.settings.onselect("")!==!1&&e.select("")}}):(r.id=t.uniqueId(),r.role="option",r.onclick=function(){e.settings.onselect(r.value)!==!1&&e.select(r.value)},n.add(r))}),e.onRenderMenu.dispatch(e,n),e.menu=n},postRender:function(){var r=this,i=r.classPrefix;n.add(r.id,"click",r.showMenu,r),n.add(r.id,"keydown",function(e){e.keyCode==32&&(r.showMenu(e),n.cancel(e))}),n.add(r.id,"focus",function(){r._focused||(r.keyDownHandler=n.add(r.id,"keydown",function(e){e.keyCode==40&&(r.showMenu(),n.cancel(e))}),r.keyPressHandler=n.add(r.id,"keypress",function(e){var t;e.keyCode==13&&(t=r.selectedValue,r.selectedValue=null,n.cancel(e),r.settings.onselect(t))})),r._focused=1}),n.add(r.id,"blur",function(){n.remove(r.id,"keydown",r.keyDownHandler),n.remove(r.id,"keypress",r.keyPressHandler),r._focused=0});if(e.isIE6||!t.boxModel)n.add(r.id,"mouseover",function(){t.hasClass(r.id,i+"Disabled")||t.addClass(r.id,i+"Hover")}),n.add(r.id,"mouseout",function(){t.hasClass(r.id,i+"Disabled")||t.removeClass(r.id,i+"Hover")});r.onPostRender.dispatch(r,t.get(r.id))},destroy:function(){this.parent(),n.clear(this.id+"_text"),n.clear(this.id+"_open")}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.util.Dispatcher;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){t.get(this.id).disabled=e,this.setAriaProperty("disabled",e)},isDisabled:function(){return t.get(this.id).disabled},select:function(e){var t,n,i=this;if(e==undefined)return i.selectByIndex(-1);e&&typeof e=="function"?n=e:n=function(t){return t==e},e!=i.selectedValue&&(r(i.items,function(e,r){if(n(e.value))return t=1,i.selectByIndex(r),!1}),t||i.selectByIndex(-1))},selectByIndex:function(e){t.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,n,r){var i,s=this;r=r||{},r.value=n,s.isRendered()&&t.add(t.get(this.id),"option",r,e),i={title:e,value:n,attribs:r},s.items.push(i),s.onAdd.dispatch(s,i)},getLength:function(){return this.items.length},renderHTML:function(){var e=this,n=t.createHTML("option",{value:""},"-- "+e.settings.title+" --");return r(e.items,function(e){n+=t.createHTML("option",{value:e.value},e.title)}),n=t.createHTML("select",{id:e.id,"class":"mceNativeListBox","aria-labelledby":e.id+"_aria"},n),n+=t.createHTML("span",{id:e.id+"_aria",style:"display: none"},e.settings.title),n},postRender:function(){function o(e){var t=i.items[e.target.selectedIndex-1];t&&(t=t.value)&&(i.onChange.dispatch(i,t),i.settings.onselect&&i.settings.onselect(t))}var r,i=this,s=!0;i.rendered=!0,n.add(i.id,"change",o),n.add(i.id,"keydown",function(t){var u;n.remove(i.id,"change",r),s=!1,u=n.add(i.id,"blur",function(){if(s)return;s=!0,n.add(i.id,"change",o),n.remove(i.id,"blur",u)});if(!(!e.isWebKit||t.keyCode!=37&&t.keyCode!=39))return n.prevent(t);if(t.keyCode==13||t.keyCode==32)return o(t),n.cancel(t)}),i.onPostRender.dispatch(i,t.get(i.id))}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each;e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,r,i){this.parent(n,r,i),this.onRenderMenu=new e.util.Dispatcher(this),r.menu_container=r.menu_container||t.doc.body},showMenu:function(){var e,r,i,s=this,o=t.get(s.id);if(s.isDisabled())return;s.isMenuRendered||(s.renderMenu(),s.isMenuRendered=!0);if(s.isMenuVisible)return s.hideMenu();e=t.getPos(s.settings.menu_container),r=t.getPos(o),i=s.menu,i.settings.offset_x=r.x,i.settings.offset_y=r.y,i.settings.vp_offset_x=r.x,i.settings.vp_offset_y=r.y,i.settings.keyboard_focus=s._focused,i.showMenu(0,o.clientHeight),n.add(t.doc,"mousedown",s.hideMenu,s),s.setState("Selected",1),s.isMenuVisible=1},renderMenu:function(){var e=this,t=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:e.settings.icons});t.onHideMenu.add(function(){e.hideMenu(),e.focus()}),e.onRenderMenu.dispatch(e,t),e.menu=t},hideMenu:function(e){var r=this;if(e&&e.type=="mousedown"&&t.getParent(e.target,function(e){return e.id===r.id||e.id===r.id+"_open"}))return;if(!e||!t.getParent(e.target,".mceMenu"))r.setState("Selected",0),n.remove(t.doc,"mousedown",r.hideMenu,r),r.menu&&r.menu.hideMenu();r.isMenuVisible=0},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each;e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n=this,r=n.settings,i="<tbody><tr>";return r.image?e=t.createHTML("img ",{src:r.image,role:"presentation","class":"mceAction "+r["class"]}):e=t.createHTML("span",{"class":"mceAction "+r["class"]},""),e+=t.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:n.id+"_voice",style:"display:none;"},r.title),i+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},e)+"</td>",e=t.createHTML("span",{"class":"mceOpen "+r["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),i+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},e)+"</td>",i+="</tr></tbody>",i=t.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+r["class"],cellpadding:"0",cellspacing:"0",title:r.title},i),t.createHTML("div",{id:n.id,role:"button",tabindex:"0","aria-labelledby":n.id+"_voice","aria-haspopup":"true"},i)},postRender:function(){var r,i=this,s=i.settings;s.onclick&&(r=function(e){i.isDisabled()||(s.onclick(i.value),n.cancel(e))},n.add(i.id+"_action","click",r),n.add(i.id,["click","keydown"],function(e){var t=32,s=14,o=13,u=38,a=40;if((e.keyCode===32||e.keyCode===13||e.keyCode===14)&&!e.altKey&&!e.ctrlKey&&!e.metaKey)r(),n.cancel(e);else if(e.type==="click"||e.keyCode===a)i.showMenu(),n.cancel(e)})),n.add(i.id+"_open","click",function(e){i.showMenu(),n.cancel(e)}),n.add([i.id,i.id+"_open"],"focus",function(){i._focused=1}),n.add([i.id,i.id+"_open"],"blur",function(){i._focused=0});if(e.isIE6||!t.boxModel)n.add(i.id,"mouseover",function(){t.hasClass(i.id,"mceSplitButtonDisabled")||t.addClass(i.id,"mceSplitButtonHover")}),n.add(i.id,"mouseout",function(){t.hasClass(i.id,"mceSplitButtonDisabled")||t.removeClass(i.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open"),n.clear(this.id)}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.is,i=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n,r){var i=this;i.parent(t,n,r),i.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},i.settings),i.onShowMenu=new e.util.Dispatcher(i),i.onHideMenu=new e.util.Dispatcher(i),i.value=n.default_color},showMenu:function(){var e,r,i=this;if(i.isDisabled())return;i.isMenuRendered||(i.renderMenu(),i.isMenuRendered=!0);if(i.isMenuVisible)return i.hideMenu();e=t.get(i.id),t.show(i.id+"_menu"),t.addClass(e,"mceSplitButtonSelected"),r=t.getPos(e),t.setStyles(i.id+"_menu",{left:r.x,top:r.y+e.clientHeight,zIndex:2e5}),e=0,n.add(t.doc,"mousedown",i.hideMenu,i),i.onShowMenu.dispatch(i),i._focused&&(i._keyHandler=n.add(i.id+"_menu","keydown",function(e){e.keyCode==27&&i.hideMenu()}),t.select("a",i.id+"_menu")[0].focus()),i.isMenuVisible=1},hideMenu:function(e){var r=this;if(r.isMenuVisible){if(e&&e.type=="mousedown"&&t.getParent(e.target,function(e){return e.id===r.id+"_open"}))return;if(!e||!t.getParent(e.target,".mceSplitButtonMenu"))t.removeClass(r.id,"mceSplitButtonSelected"),n.remove(t.doc,"mousedown",r.hideMenu,r),n.remove(r.id+"_menu","keydown",r._keyHandler),t.hide(r.id+"_menu");r.isMenuVisible=0,r.onHideMenu.dispatch()}},renderMenu:function(){var s,o,u,a,f=this,l=0,c=f.settings,h=t.add(c.menu_container,"div",{role:"listbox",id:f.id+"_menu","class":c.menu_class+" "+c["class"],style:"position:absolute;left:0;top:-1000px;"}),p=t.add(h,"div",{"class":c["class"]+" mceSplitButtonMenu"});return t.add(p,"span",{"class":"mceMenuLine"}),s=t.add(p,"table",{role:"presentation","class":"mceColorSplitMenu"}),o=t.add(s,"tbody"),l=0,i(r(c.colors,"array")?c.colors:c.colors.split(","),function(n){var r;n=n.replace(/^#/,""),l--||(u=t.add(o,"tr"),l=c.grid_width-1),s=t.add(u,"td"),r={href:"javascript:;",style:{backgroundColor:"#"+n},title:f.editor.getLang("colors."+n,n),"data-mce-color":"#"+n},e.isIE||(r.role="option"),s=t.add(s,"a",r),f.editor.forcedHighContrastMode&&(s=t.add(s,"canvas",{width:16,height:16,"aria-hidden":"true"}),s.getContext&&(a=s.getContext("2d"))?(a.fillStyle="#"+n,a.fillRect(0,0,16,16)):t.remove(s))}),c.more_colors_func&&(s=t.add(o,"tr"),s=t.add(s,"td",{colspan:c.grid_width,"class":"mceMoreColors"}),s=t.add(s,"a",{role:"option",id:f.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},c.more_colors_title),n.add(s,"click",function(e){return c.more_colors_func.call(c.more_colors_scope||this),n.cancel(e)})),t.addClass(p,"mceColorSplitMenu"),new e.ui.KeyboardNavigation({root:f.id+"_menu",items:t.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),n.add(f.id+"_menu","mousedown",function(e){return n.cancel(e)}),n.add(f.id+"_menu","click",function(e){var r;return e=t.getParent(e.target,"a",o),e&&e.nodeName.toLowerCase()=="a"&&(r=e.getAttribute("data-mce-color"))&&f.setColor(r),n.cancel(e)}),h},setColor:function(e){this.displayColor(e),this.hideMenu(),this.settings.onselect(e)},displayColor:function(e){var n=this;t.setStyle(n.id+"_preview","backgroundColor",e),n.value=e},postRender:function(){var e=this,n=e.id;e.parent(),t.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){this.parent(),n.clear(this.id+"_menu"),n.clear(this.id+"_more"),t.remove(this.id+"_menu")}})}(tinymce),function(e){var t=e.DOM,n=e.each,r=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,r=[],i=n.controls,s=e.each,o=n.settings;return r.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">'),r.push("<span role='application'>"),r.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+t.encode(o.name)+"</span>"),s(i,function(e){r.push(e.renderHTML())}),r.push("</span>"),r.push("</div>"),r.join("")},focus:function(){var e=this;t.get(e.id).focus()},postRender:function(){var r=this,i=[];n(r.controls,function(e){n(e.controls,function(e){e.id&&i.push(e)})}),r.keyNav=new e.ui.KeyboardNavigation({root:r.id,items:i,onCancel:function(){e.isWebKit&&t.get(r.editor.id+"_ifr").focus(),r.editor.focus()},excludeFromTabOrder:!r.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent(),e.keyNav.destroy(),r.clear(e.id)}})}(tinymce),function(e){var t=e.DOM,n=e.each;e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e,n,r,i,s,o=this,u="",a=o.settings,f=o.controls;for(r=0;r<f.length;r++)n=f[r],i=f[r-1],s=f[r+1],r===0&&(e="mceToolbarStart",n.Button?e+=" mceToolbarStartButton":n.SplitButton?e+=" mceToolbarStartSplitButton":n.ListBox&&(e+=" mceToolbarStartListBox"),u+=t.createHTML("td",{"class":e},t.createHTML("span",null,"<!-- IE -->"))),i&&n.ListBox&&(i.Button||i.SplitButton)&&(u+=t.createHTML("td",{"class":"mceToolbarEnd"},t.createHTML("span",null,"<!-- IE -->"))),t.stdMode?u+='<td style="position: relative">'+n.renderHTML()+"</td>":u+="<td>"+n.renderHTML()+"</td>",s&&n.ListBox&&(s.Button||s.SplitButton)&&(u+=t.createHTML("td",{"class":"mceToolbarStart"},t.createHTML("span",null,"<!-- IE -->")));return e="mceToolbarEnd",n.Button?e+=" mceToolbarEndButton":n.SplitButton?e+=" mceToolbarEndSplitButton":n.ListBox&&(e+=" mceToolbarEndListBox"),u+=t.createHTML("td",{"class":e},t.createHTML("span",null,"<!-- IE -->")),t.createHTML("table",{id:o.id,"class":"mceToolbar"+(a["class"]?" "+a["class"]:""),cellpadding:"0",cellspacing:"0",align:o.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+u+"</tr></tbody>")}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each;e.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[],e.urls={},e.lookup={},e.onAdd=new t(e)},get:function(e){return this.lookup[e]?this.lookup[e].instance:undefined},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=e.settings;n&&n.language&&n.language_load!==!1&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},this.onAdd.dispatch(this,e,t),t},createUrl:function(e,t){return typeof t=="object"?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];e.each(n,function(t){e.ScriptLoader.add
(r+"/"+t)})},load:function(t,n,r,i){function u(){var o=s.dependencies(t);e.each(o,function(e){var t=s.createUrl(n,e);s.load(t.resource,t,undefined,undefined)}),r&&(i?r.call(i):r.call(e.ScriptLoader))}var s=this,o=n;if(s.urls[t])return;typeof n=="object"&&(o=n.prefix+n.resource+n.suffix),o.indexOf("/")!=0&&o.indexOf("://")==-1&&(o=e.baseURL+"/"+o),s.urls[t]=o.substring(0,o.lastIndexOf("/")),s.lookup[t]?u():e.ScriptLoader.add(o,u,i)}}),e.PluginManager=new e.AddOnManager,e.ThemeManager=new e.AddOnManager}(tinymce),function(e){var t,n=e.each,r=e.extend,i=e.DOM,s=e.dom.Event,o=e.ThemeManager,u=e.PluginManager,a=e.explode,f=e.util.Dispatcher,l=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e.documentBaseURL)||(e.documentBaseURL+="/"),e.baseURL=(new e.util.URI(e.documentBaseURL)).toAbsolute_(e.baseURL),e.baseURI=new e.util.URI(e.baseURL),e.onBeforeUnload=new f(e),s.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)}),e.onAddEditor=new f(e),e.onRemoveEditor=new f(e),e.EditorManager=r(e,{editors:[],i18n:{},activeEditor:null,init:function(t){function p(t,n,r){var i=t[n];if(!i)return;return e.is(i,"string")&&(r=i.replace(/\.\w+$/,""),r=r?e.resolve(r):0,i=e.resolve(i)),i.apply(r||this,Array.prototype.slice.call(arguments,2))}var o,u,f=this,c=e.ScriptLoader,h=[];t=r({theme:"simple",language:"en"},t),f.settings=t,s.add(document,"init",function(){var r,s;p(t,"onpageload");switch(t.mode){case"exact":r=t.elements||"",r.length>0&&n(a(r),function(r){i.get(r)?(u=new e.Editor(r,t),h.push(u),u.render(1)):n(document.forms,function(s){n(s.elements,function(n){n.name===r&&(r="mce_editor_"+l++,i.setAttrib(n,"id",r),u=new e.Editor(r,t),h.push(u),u.render(1))})})});break;case"textareas":case"specific_textareas":function c(e,t){return t.constructor===RegExp?t.test(e.className):i.hasClass(e,t)}n(i.select("textarea"),function(n){if(t.editor_deselector&&c(n,t.editor_deselector))return;if(!t.editor_selector||c(n,t.editor_selector)){o=i.get(n.name),!n.id&&!o&&(n.id=n.name);if(!n.id||f.get(n.id))n.id=i.uniqueId();u=new e.Editor(n.id,t),h.push(u),u.render(1)}})}t.oninit&&(r=s=0,n(h,function(e){s++,e.initialized?r++:e.onInit.add(function(){r++,r==s&&p(t,"oninit")}),r==s&&p(t,"oninit")}))})},get:function(e){return e===t?this.editors:this.editors[e]},getInstanceById:function(e){return this.get(e)},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t._setActive(e),t.onAddEditor.dispatch(t,e),e},remove:function(e){var t,n=this,r=n.editors;if(!r[e.id])return null;delete r[e.id];for(t=0;t<r.length;t++)if(r[t]==e){r.splice(t,1);break}return n.activeEditor==e&&n._setActive(r[0]),e.destroy(),n.onRemoveEditor.dispatch(n,e),e},execCommand:function(t,n,r){var i,s=this,o=s.get(r);switch(t){case"mceFocus":return o.focus(),!0;case"mceAddEditor":case"mceAddControl":return s.get(r)||(new e.Editor(r,s.settings)).render(),!0;case"mceAddFrameControl":i=r.window,i.tinyMCE=tinyMCE,i.tinymce=e,e.DOM.doc=i.document,e.DOM.win=i,o=new e.Editor(r.element_id,r),o.render();if(e.isIE){function u(){o.destroy(),i.detachEvent("onunload",u),i=i.tinyMCE=i.tinymce=null}i.attachEvent("onunload",u)}return r.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return o&&o.remove(),!0;case"mceToggleEditor":if(!o)return s.execCommand("mceAddControl",0,r),!0;return o.isHidden()?o.show():o.hide(),!0}return s.activeEditor?s.activeEditor.execCommand(t,n,r):!1},execInstanceCommand:function(e,t,n,r){var i=this.get(e);return i?i.execCommand(t,n,r):!1},triggerSave:function(){n(this.editors,function(e){e.save()})},addI18n:function(t,r){var i=this.i18n;e.is(t,"string")?n(r,function(e,n){i[t+"."+n]=e}):n(t,function(e,t){n(e,function(e,r){n(e,function(e,n){r==="common"?i[t+"."+n]=e:i[t+"."+r+"."+n]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.extend,i=e.util.Dispatcher,s=e.each,o=e.isGecko,u=e.isIE,a=e.isWebKit,f=e.is,l=e.ThemeManager,c=e.PluginManager,h=e.inArray,p=e.grep,d=e.explode,v=e.VK;e.create("tinymce.Editor",{Editor:function(t,n){var o=this;o.id=o.editorId=t,o.execCommands={},o.queryStateCommands={},o.queryValueCommands={},o.isNotDirty=!1,o.plugins={},s(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(e){o[e]=new i(o)}),o.settings=n=r({id:t,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:o.convertURL,url_converter_scope:o,ie7_compat:!0},n),o.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI}),o.baseURI=e.baseURI,o.contentCSS=[],o.execCallback("setup",o)},render:function(){function a(){i.language&&i.language_load!==!1&&u.add(e.baseURL+"/langs/"+i.language+".js"),i.theme&&i.theme.charAt(0)!="-"&&!l.urls[i.theme]&&l.load(i.theme,"themes/"+i.theme+"/editor_template"+e.suffix+".js"),s(d(i.plugins),function(t){var n;if(t&&!c.urls[t])if(t.charAt(0)=="-")t=t.substr(1,t.length),n=c.dependencies(t),s(n,function(t){var n={prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"},t=c.createUrl(n,t);c.load(t.resource,t)});else{if(t=="safari")return;c.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"})}}),u.loadQueue(function(){r.removed||r.init()})}var r=this,i=r.settings,o=r.id,u=e.ScriptLoader;if(!n.domLoaded){n.add(document,"init",function(){r.render()});return}tinyMCE.settings=i;if(!r.getElement())return;if(e.isIDevice&&!e.isIOS5)return;!/TEXTAREA|INPUT/i.test(r.getElement().nodeName)&&i.hidden_input&&t.getParent(o,"form")&&t.insertAfter(t.create("input",{type:"hidden",name:o}),o),e.WindowManager&&(r.windowManager=new e.WindowManager(r)),i.encoding=="xml"&&r.onGetContent.add(function(e,n){n.save&&(n.content=t.encode(n.content))}),i.add_form_submit_trigger&&r.onSubmit.addToTop(function(){r.initialized&&(r.save(),r.isNotDirty=1)}),i.add_unload_trigger&&(r._beforeUnload=tinyMCE.onBeforeUnload.add(function(){r.initialized&&!r.destroyed&&!r.isHidden()&&r.save({format:"raw",no_events:!0})})),e.addUnload(r.destroy,r),i.submit_patch&&r.onBeforeRenderUI.add(function(){var t=r.getElement().form;if(!t)return;if(t._mceOldSubmit)return;!t.submit.nodeType&&!t.submit.length&&(r.formElement=t,t._mceOldSubmit=t.submit,t.submit=function(){return e.triggerSave(),r.isNotDirty=1,r.formElement._mceOldSubmit(r.formElement)}),t=null}),a()},init:function(){function E(t){var n,r=c.get(t),i=c.urls[t]||e.documentBaseURL.replace(/\/$/,"");r&&e.inArray(w,t)===-1&&(s(c.dependencies(t),function(e){E(e)}),n=new r(g,i),g.plugins[t]=n,n.init&&(n.init(g,i),w.push(t)))}var n,r,i,a,f,h,p,v,m,g=this,y=g.settings,b=g.getElement(),w=[];e.add(g),y.aria_label=y.aria_label||t.getAttrib(b,"aria-label",g.getLang("aria.rich_text_area")),y.theme&&(y.theme=y.theme.replace(/-/,""),a=l.get(y.theme),g.theme=new a,g.theme.init&&y.init_theme&&g.theme.init(g,l.urls[y.theme]||e.documentBaseURL.replace(/\/$/,""))),s(d(y.plugins.replace(/\-/g,"")),E),y.popup_css!==!1&&(y.popup_css?y.popup_css=g.documentBaseURI.toAbsolute(y.popup_css):y.popup_css=g.baseURI.toAbsolute("themes/"+y.theme+"/skins/"+y.skin+"/dialog.css")),y.popup_css_add&&(y.popup_css+=","+g.documentBaseURI.toAbsolute(y.popup_css_add)),g.controlManager=new e.ControlManager(g),y.custom_undo_redo&&(g.onBeforeExecCommand.add(function(e,t,n,r,i){t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&(!i||!i.skip_undo)&&g.undoManager.beforeChange()}),g.onExecCommand.add(function(e,t,n,r,i){t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&(!i||!i.skip_undo)&&g.undoManager.add()})),g.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||g.nodeChanged()});if(o){function S(e,t){(!t||!t.initial)&&g.execCommand("mceRepaint")}g.onUndo.add(S),g.onRedo.add(S),g.onSetContent.add(S)}g.onBeforeRenderUI.dispatch(g,g.controlManager),y.render_ui&&(r=y.width||b.style.width||b.offsetWidth,i=y.height||b.style.height||b.offsetHeight,g.orgDisplay=b.style.display,v=/^[0-9\.]+(|px)$/i,v.test(""+r)&&(r=Math.max(parseInt(r)+(a.deltaWidth||0),100)),v.test(""+i)&&(i=Math.max(parseInt(i)+(a.deltaHeight||0),100)),a=g.theme.renderUI({targetNode:b,width:r,height:i,deltaWidth:y.delta_width,deltaHeight:y.delta_height}),g.editorContainer=a.editorContainer),document.domain&&location.hostname!=document.domain&&(e.relaxedDomain=document.domain),t.setStyles(a.sizeContainer||a.editorContainer,{width:r,height:i}),y.content_css&&e.each(d(y.content_css),function(e){g.contentCSS.push(g.documentBaseURI.toAbsolute(e))}),i=(a.iframeHeight||i)+(typeof i=="number"?a.deltaHeight||0:""),i<100&&(i=100),g.iframeHTML=y.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',y.document_base_url!=e.documentBaseURL&&(g.iframeHTML+='<base href="'+g.documentBaseURI.getURI()+'" />'),y.ie7_compat?g.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':g.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',g.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(m=0;m<g.contentCSS.length;m++)g.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+g.contentCSS[m]+'" />';g.contentCSS=[],h=y.body_id||"tinymce",h.indexOf("=")!=-1&&(h=g.getParam("body_id","","hash"),h=h[g.id]||h),p=y.body_class||"",p.indexOf("=")!=-1&&(p=g.getParam("body_class","","hash"),p=p[g.id]||""),g.iframeHTML+='</head><body id="'+h+'" class="mceContentBody '+p+'" onload="window.parent.tinyMCE.get(\''+g.id+"').onLoad.dispatch();\"><br></body></html>",e.relaxedDomain&&(u||e.isOpera&&parseFloat(opera.version())<11)&&(f='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+g.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),n=t.add(a.iframeContainer,"iframe",{id:g.id+"_ifr",src:f||'javascript:""',frameBorder:"0",allowTransparency:"true",title:y.aria_label,style:{width:"100%",height:i,display:"block"}}),g.contentAreaContainer=a.iframeContainer,t.get(a.editorContainer).style.display=g.orgDisplay,t.get(g.id).style.display="none",t.setAttrib(g.id,"aria-hidden",!0),(!e.relaxedDomain||!f)&&g.setupIframe(),b=n=a=null},setupIframe:function(){var r,i=this,a=i.settings,f=t.get(i.id),l=i.getDoc();if(!u||!e.relaxedDomain)l.open(),l.write(i.iframeHTML),l.close(),e.relaxedDomain&&(l.domain=e.relaxedDomain);r=i.getBody(),r.disabled=!0,a.readonly||(r.contentEditable=!0),r.disabled=!1,i.schema=new e.html.Schema(a),i.dom=new e.dom.DOMUtils(i.getDoc(),{keep_values:!0,url_converter:i.convertURL,url_converter_scope:i,hex_colors:a.force_hex_style_colors,class_filter:a.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:i.schema}),i.parser=new e.html.DomParser(a,i.schema),i.settings.allow_html_in_named_anchor||i.parser.addAttributeFilter("name",function(e){var t,n,r,i,s=e.length;while(s--){i=e[s];if(i.name==="a"&&i.firstChild){r=i.parent,t=i.lastChild;do n=t.prev,r.insert(t,i),t=n;while(t)}}}),i.parser.addAttributeFilter("src,href,style",function(e,t){var n,r,s,o=e.length,u=i.dom;while(o--)n=e[o],r=n.attr(t),s="data-mce-"+t,n.attributes.map[s]||(t==="style"?n.attr(s,u.serializeStyle(u.parseStyle(r),n.name)):n.attr(s,i.convertURL(r,t,n.name)))}),i.parser.addNodeFilter("script",function(e){var t,n=e.length;while(n--)t=e[n],t.attr("type","mce-"+(t.attr("type")||"text/javascript"))}),i.parser.addNodeFilter("#cdata",function(e){var t,n=e.length;while(n--)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),i.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){var n,r=t.length,s=i.schema.getNonEmptyElements();while(r--)n=t[r],n.isEmpty(s)&&(n.empty().append(new e.html.Node("br",1)).shortEnded=!0)}),i.serializer=new e.dom.Serializer(a,i.dom,i.schema),i.selection=new e.dom.Selection(i.dom,i.getWin(),i.serializer),i.formatter=new e.Formatter(this),i.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){s(n,function(t,n){i.dom.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),s("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){i.formatter.register(e,{block:e,remove:"all"})}),i.formatter.register(i.settings.formats),i.undoManager=new e.UndoManager(i),i.undoManager.onAdd.add(function(e,t){if(e.hasUndo())return i.onChange.dispatch(i,t,e)}),i.undoManager.onUndo.add(function(e,t){return i.onUndo.dispatch(i,t,e)}),i.undoManager.onRedo.add(function(e,t){return i.onRedo.dispatch(i,t,e)}),i.forceBlocks=new e.ForceBlocks(i,{forced_root_block:a.forced_root_block}),i.editorCommands=new e.EditorCommands(i),i.serializer.onPreProcess.add(function(e,t){return i.onPreProcess.dispatch(i,t,e)}),i.serializer.onPostProcess.add(function(e,t){return i.onPostProcess.dispatch(i,t,e)}),i.onPreInit.dispatch(i),a.gecko_spellcheck||(i.getBody().spellcheck=0),a.readonly||i._addEvents(),i.controlManager.onPostRender.dispatch(i,i.controlManager),i.onPostRender.dispatch(i),i.quirks=new e.util.Quirks(this),a.directionality&&(i.getBody().dir=a.directionality),a.nowrap&&(i.getBody().style.whiteSpace="nowrap"),a.handle_node_change_callback&&i.onNodeChange.add(function(e,t,n){i.execCallback("handle_node_change_callback",i.id,n,-1,-1,!0,i.selection.isCollapsed())}),a.save_callback&&i.onSaveContent.add(function(e,t){var n=i.execCallback("save_callback",i.id,t.content,i.getBody());n&&(t.content=n)}),a.onchange_callback&&i.onChange.add(function(e,t){i.execCallback("onchange_callback",i,t)}),a.protect&&i.onBeforeSetContent.add(function(e,t){a.protect&&s(a.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),a.convert_newlines_to_brs&&i.onBeforeSetContent.add(function(e,t){t.initial&&(t.content=t.content.replace(/\r?\n/g,"<br />"))}),a.preformatted&&i.onPostProcess.add(function(e,t){t.content=t.content.replace(/^\s*<pre.*?>/,""),t.content=t.content.replace(/<\/pre>\s*$/,""),t.set&&(t.content='<pre class="mceItemHidden">'+t.content+"</pre>")}),a.verify_css_classes&&(i.serializer.attribValueFilter=function(e,t){var n,r;return e=="class"?(i.classesRE||(r=i.dom.getClasses(),r.length>0&&(n="",s(r,function(e){n+=(n?"|":"")+e["class"]}),i.classesRE=RegExp("("+n+")","gi"))),!i.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(t)||i.classesRE.test(t)?t:""):t}),a.cleanup_callback&&(i.onBeforeSetContent.add(function(e,t){t.content=i.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),i.onPreProcess.add(function(e,t){t.set&&i.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&i.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),i.onPostProcess.add(function(e,t){t.set&&(t.content=i.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=i.execCallback("cleanup_callback","get_from_editor",t.content,t))})),a.save_callback&&i.onGetContent.add(function(e,t){t.save&&(t.content=i.execCallback("save_callback",i.id,t.content,i.getBody()))}),a.handle_event_callback&&i.onEvent.add(function(e,t,r){i.execCallback("handle_event_callback",t,e,r)===!1&&n.cancel(t)}),i.onSetContent.add(function(){i.addVisual(i.getBody())}),a.padd_empty_editor&&i.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(o){function c(e){s(e.dom.select("a"),function(t){var n=t.parentNode;e.dom.isBlock(n)&&n.lastChild===t&&e.dom.add(n,"br",{"data-mce-bogus":1})})}i.onExecCommand.add(function(e,t){t==="CreateLink"&&c(e)}),i.onSetContent.add(i.selection.onSetContent.add(c))}i.load({initial:!0,format:"html"}),i.startContent=i.getContent({format:"raw"}),i.undoManager.add(),i.initialized=!0,i.onInit.dispatch(i),i.execCallback("setupcontent_callback",i.id,i.getBody(),i.getDoc()),i.execCallback("init_instance_callback",i),i.focus(!0),i.nodeChanged({initial:1}),s(i.contentCSS,function(e){i.dom.loadCSS(e)}),a.auto_focus&&setTimeout(function(){var t=e.get(a.auto_focus);t.selection.select(t.getBody(),1),t.selection.collapse(1),t.getBody().focus(),t.getWin().focus()},100),f=null},focus:function(t){var n,r,i,s=this,o=s.selection,u=s.settings.content_editable,a=s.getDoc();t||(r=o.getRng(),r.item&&(i=r.item(0)),s._refreshContentEditable(),u||s.getWin().focus(),e.isGecko&&s.getBody().focus(),i&&i.ownerDocument==a&&(r=a.body.createControlRange(),r.addElement(i),r.select())),e.activeEditor!=s&&((n=e.activeEditor)!=null&&n.onDeactivate.dispatch(n,s),s.onActivate.dispatch(s,n)),e._setActive(s)},execCallback:function(t){var n,r=this,i=r.settings[t];if(!i)return;return r.callbackLookup&&(n=r.callbackLookup[t])&&(i=n.func,n=n.scope),f(i,"string")&&(n=i.replace(/\.\w+$/,""),n=n?e.resolve(n):0,i=e.resolve(i),r.callbackLookup=r.callbackLookup||{},r.callbackLookup[t]={func:i,scope:n}),i.apply(n||r,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",r=e.i18n;return t?r[n+"."+t]||t.replace(/{\#([^}]+)\}/g,function(e,t){return r[n+"."+t]||"{#"+t+"}"}):""},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(f(n)?n:"{#"+t+"}")},getParam:function(t,n,r){var i,o=e.trim,u=f(this.settings[t])?this.settings[t]:n;return r==="hash"?(i={},f(u,"string")?s(u.indexOf("=")>0?u.split(/[;,](?![^=;,]*(?:[;,]|$))/):u.split(","),function(e){e=e.split("="),e.length>1?i[o(e[0])]=o(e[1]):i[o(e[0])]=o(e)}):i=u,i):u},nodeChanged:function(e){var t=this,n=t.selection,r=n.getStart()||t.getBody();t.initialized&&(e=e||{},r=u&&r.ownerDocument!=t.getDoc()?t.getBody():r,e.parents=[],t.dom.getParent(r,function(t){if(t.nodeName=="BODY")return!0;e.parents.push(t)}),t.onNodeChange.dispatch(t,e?e.controlManager||t.controlManager:t.controlManager,r,n.isCollapsed(),e))},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){var i,o=this;return o.settings.custom_shortcuts?(o.shortcuts=o.shortcuts||{},f(n,"string")&&(i=n,n=function(){o.execCommand(i,!1,null)}),f(n,"object")&&(i=n,n=function(){o.execCommand(i[0],i[1],i[2])}),s(d(e),function(e){var i={func:n,scope:r||this,desc:t,alt:!1,ctrl:!1,shift:!1};s(d(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":i[e]=!0;break;default:i.charCode=e.charCodeAt(0),i.keyCode=e.toUpperCase().charCodeAt(0)}}),o.shortcuts[(i.ctrl?"ctrl":"")+","+(i.alt?"alt":"")+","+(i.shift?"shift":"")+","+i.keyCode]=i}),!0):!1},execCommand:function(e,t,n,i){var o,u,a=this,f=0;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)&&(!i||!i.skip_focus)&&a.focus(),i=r({},i),a.onBeforeExecCommand.dispatch(a,e,t,n,i);if(i.terminate)return!1;if(a.execCallback("execcommand_callback",a.id,a.selection.getNode(),e,t,n))return a.onExecCommand.dispatch(a,e,t,n,i),!0;if(o=a.execCommands[e]){u=o.func.call(o.scope,t,n);if(u!==!0)return a.onExecCommand.dispatch(a,e,t,n,i),u}s(a.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,n))return a.onExecCommand.dispatch(a,e,t,n,i),f=1,!1});if(f)return!0;if(a.theme&&a.theme.execCommand&&a.theme.execCommand(e,t,n))return a.onExecCommand.dispatch(a,e,t,n,i),!0;if(a.editorCommands.execCommand(e,t,n))return a.onExecCommand.dispatch(a,e,t,n,i),!0;a.getDoc().execCommand(e,t,n),a.onExecCommand.dispatch(a,e,t,n,i)},queryCommandState:function(e){var t,n,r=this;if(r._isHidden())return;if(t=r.queryStateCommands[e]){n=t.func.call(t.scope);if(n!==!0)return n}t=r.editorCommands.queryCommandState(e);if(t!==-1)return t;try{return this.getDoc().queryCommandState(e)}catch(i){}},queryCommandValue:function(e){var t,n,r=this;if(r._isHidden())return;if(t=r.queryValueCommands[e]){n=t.func.call(t.scope);if(n!==!0)return n}t=r.editorCommands.queryCommandValue(e);if(f(t))return t;try{return this.getDoc().queryCommandValue(e)}catch(i){}},show:function(){var e=this;t.show(e.getContainer()),t.hide(e.id),e.load()},hide:function(){var e=this,n=e.getDoc();u&&n&&n.execCommand("SelectAll"),e.save(),t.hide(e.getContainer()),t.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},load:function(e){var t,n=this,r=n.getElement();if(r)return e=e||{},e.load=!0,t=n.setContent(f(r.value)?r.value:r.innerHTML,e),e.element=r,e.no_events||n.onLoadContent.dispatch(n,e),e.element=r=null,t},save:function(e){var n,r,i=this,o=i.getElement();if(!o||!i.initialized)return;return e=e||{},e.save=!0,e.no_events||(i.undoManager.typing=!1,i.undoManager.add()),e.element=o,n=e.content=i.getContent(e),e.no_events||i.onSaveContent.dispatch(i,e),n=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=n:(o.innerHTML=n,(r=t.getParent(i.id,"form"))&&s(r.elements,function(e){if(e.name==i.id)return e.value=n,!1})),e.element=o=null,n},setContent:function(t,n){var r,i=this,s=i.getBody();n=n||{},n.format=n.format||"html",n.set=!0,n.content=t,n.no_events||i.onBeforeSetContent.dispatch(i,n),t=n.content;if(!e.isIE&&(t.length===0||/^\s+$/.test(t))){r=i.settings.forced_root_block,r?t="<"+r+'><br data-mce-bogus="1"></'+r+">":t='<br data-mce-bogus="1">',s.innerHTML=t,i.selection.select(s,!0),i.selection.collapse(!0);return}return n.format!=="raw"&&(t=(new e.html.Serializer({},i.schema)).serialize(i.parser.parse(t))),n.content=e.trim(t),i.dom.setHTML(s,n.content),n.no_events||i.onSetContent.dispatch(i,n),i.selection.normalize(),n.content},getContent:function(t){var n,r=this;return t=t||{},t.format=t.format||"html",t.get=!0,t.no_events||r.onBeforeGetContent.dispatch(r,t),t.format=="raw"?n=r.getBody().innerHTML:n=r.serializer.serialize(r.getBody(),t),t.content=e.trim(n),t.no_events||r.onGetContent.dispatch(r,t),t.content},isDirty:function(){var t=this;return e.trim(t.startContent)!=e.trim(t.getContent({format:"raw",no_events:1}))&&!t.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=t.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e,n=this;return n.contentWindow||(e=t.get(n.id+"_ifr"),e&&(n.contentWindow=e.contentWindow)),n.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&n.nodeName=="LINK"||e.indexOf("file:")===0?e:i.relative_urls?r.documentBaseURI.toRelative(e):(e=r.documentBaseURI.toAbsolute(e,i.remove_script_host),e)},addVisual:function(e){var t=this,n=t.settings;e=e||t.getBody(),f(t.hasVisual)||(t.hasVisual=n.visual),s(t.dom.select("table,a",e),function(e){var r;switch(e.nodeName){case"TABLE":r=t.dom.getAttrib(e,"border");if(!r||r=="0")t.hasVisual?t.dom.addClass(e,n.visual_table_class):t.dom.removeClass(e,n.visual_table_class);return;case"A":r=t.dom.getAttrib(e,"name"),r&&(t.hasVisual?t.dom.addClass(e,"mceItemAnchor"):t.dom.removeClass(e,"mceItemAnchor"));return}}),t.onVisualAid.dispatch(t,e,t.hasVisual)},remove:function(){var n=this,r=n.getContainer();n.removed=1,n.hide(),n.execCallback("remove_instance_callback",n),n.onRemove.dispatch(n),n.onExecCommand.listeners=[],e.remove(n),t.remove(r)},destroy:function(t){var r=this;if(r.destroyed)return;t||(e.removeUnload(r.destroy),tinyMCE.onBeforeUnload.remove(r._beforeUnload),r.theme&&r.theme.destroy&&r.theme.destroy(),r.controlManager.destroy(),r.selection.destroy(),r.dom.destroy(),r.settings.content_editable||(n.clear(r.getWin()),n.clear(r.getDoc())),n.clear(r.getBody()),n.clear(r.formElement)),r.formElement&&(r.formElement.submit=r.formElement._mceOldSubmit,r.formElement._mceOldSubmit=null),r.contentAreaContainer=r.formElement=r.container=r.settings.content_element=r.bodyElement=r.contentDocument=r.contentWindow=null,r.selection&&(r.selection=r.selection.win=r.selection.dom=r.selection.dom.doc=null),r.destroyed=1},_addEvents:function(){function c(e,t){var n=e.type;if(u.removed)return;u.onEvent.dispatch(u,e,t)!==!1&&u[l[e.fakeType||e.type]].dispatch(u,e,t)}var r,i,u=this,a=u.settings,f=u.dom,l={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};s(l,function(e,n){switch(n){case"contextmenu":f.bind(u.getDoc(),n,c);break;case"paste":f.bind(u.getBody(),n,function(e){c(e)});break;case"submit":case"reset":f.bind(u.getElement().form||t.getParent(u.id,"form"),n,c);break;default:f.bind(a.content_editable?u.getBody():u.getDoc(),n,c)}}),f.bind(a.content_editable?u.getBody():o?u.getDoc():u.getWin(),"focus",function(){u.focus(!0)}),e.isGecko&&f.bind(u.getDoc(),"DOMNodeInserted",function(e){var t;e=e.target,e.nodeType===1&&e.nodeName==="IMG"&&(t=e.getAttribute("data-mce-src"))&&(e.src=u.documentBaseURI.toAbsolute(t))});if(o){function h(){var e=this,t=e.getDoc(),n=e.settings;if(o&&!n.readonly){e._refreshContentEditable();try{t.execCommand("styleWithCSS",0,!1)}catch(r){if(!e._isHidden())try{t.execCommand("useCSS",0,!0)}catch(r){}}if(!n.table_inline_editing)try{t.execCommand("enableInlineTableEditing",!1,!1)}catch(r){}if(!n.object_resizing)try{t.execCommand("enableObjectResizing",!1,!1)}catch(r){}}}u.onBeforeExecCommand.add(h),u.onMouseDown.add(h)}u.onMouseUp.add(u.nodeChanged),u.onKeyUp.add(function(t,n){var r=n.keyCode;(r>=33&&r<=36||r>=37&&r<=40||r==13||r==45||r==46||r==8||e.isMac&&(r==91||r==93)||n.ctrlKey)&&u.nodeChanged()}),u.onKeyDown.add(function(e,t){var n,r,i;if(t.keyCode!=v.BACKSPACE)return;n=e.selection.getRng();if(!n.collapsed)return;r=n.startContainer,i=n.startOffset;while(r&&r.nodeType&&r.nodeType!=1&&r.parentNode)r=r.parentNode;r&&r.parentNode&&r.parentNode.tagName==="BLOCKQUOTE"&&r.parentNode.firstChild==r&&i==0&&(e.formatter.toggle("blockquote",null,r.parentNode),n.setStart(r,0),n.setEnd(r,0),e.selection.setRng(n),e.selection.collapse(!1))}),u.onReset.add(function(){u.setContent(u.startContent,{format:"raw"})});if(a.custom_shortcuts){a.custom_undo_redo_keyboard_shortcuts&&(u.addShortcut("ctrl+z",u.getLang("undo_desc"),"Undo"),u.addShortcut("ctrl+y",u.getLang("redo_desc"),"Redo")),u.addShortcut("ctrl+b",u.getLang("bold_desc"),"Bold"),u.addShortcut("ctrl+i",u.getLang("italic_desc"),"Italic"),u.addShortcut("ctrl+u",u.getLang("underline_desc"),"Underline");for(r=1;r<=6;r++)u.addShortcut("ctrl+"+r,"",["FormatBlock",!1,"h"+r]);u.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),u.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),u.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);function p(t){var n=null;return!t.altKey&&!t.ctrlKey&&!t.metaKey?n:(s(u.shortcuts,function(r){if(e.isMac&&r.ctrl!=t.metaKey)return;if(!e.isMac&&r.ctrl!=t.ctrlKey)return;if(r.alt!=t.altKey)return;if(r.shift!=t.shiftKey)return;if(t.keyCode==r.keyCode||t.charCode&&t.charCode==r.charCode)return n=r,!1}),n)}u.onKeyUp.add(function(e,t){var r=p(t);if(r)return n.cancel(t)}),u.onKeyPress.add(function(e,t){var r=p(t);if(r)return n.cancel(t)}),u.onKeyDown.add(function(e,t){var r=p(t);if(r)return r.func.call(r.scope),n.cancel(t)})}e.isIE&&f.bind(u.getDoc(),"controlselect",function(e){var t,r=u.resizeInfo;e=e.target;if(e.nodeName!=="IMG")return;r&&f.unbind(r.node,r.ev,r.cb),f.hasClass(e,"mceItemNoResize")?(ev="resizestart",t=f.bind(e,"resizestart",n.cancel,n)):(ev="resizeend",t=f.bind(e,ev,function(e){var t;e=e.target;if(t=f.getStyle(e,"width"))f.setAttrib(e,"width",t.replace(/[^0-9%]+/g,"")),f.setStyle(e,"width","");if(t=f.getStyle(e,"height"))f.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")),f.setStyle(e,"height","")})),r=u.resizeInfo={node:e,ev:ev,cb:t}}),e.isOpera&&u.onClick.add(function(e,t){n.prevent(t)});if(a.custom_undo_redo){function d(){u.undoManager.typing=!1,u.undoManager.add()}i=e.isGecko?"blur":"focusout",f.bind(u.getDoc(),i,function(){!u.removed&&u.undoManager.typing&&d()}),u.dom.bind(u.dom.getRoot(),"dragend",function(){d()}),u.onKeyUp.add(function(e,t){var n=t.keyCode;(n>=33&&n<=36||n>=37&&n<=40||n==13||n==45||t.ctrlKey)&&d()}),u.onKeyDown.add(function(t,r){var i,s=r.keyCode;if(s==8){i=u.getDoc().selection;if(i&&i.createRange&&i.createRange().item)return u.undoManager.beforeChange(),t.dom.remove(i.createRange().item(0)),d(),n.cancel(r)}if(s>=33&&s<=36||s>=37&&s<=40||s==13||s==45){e.isIE&&s==13&&u.undoManager.beforeChange(),u.undoManager.typing&&d();return}(s<16||s>20)&&s!=224&&s!=91&&!u.undoManager.typing&&(u.undoManager.beforeChange(),u.undoManager.typing=!0,u.undoManager.add())}),u.onMouseDown.add(function(){u.undoManager.typing&&d()})}if(e.isGecko){function m(){var e=u.dom.getAttribs(u.selection.getStart().cloneNode(!1));return function(){var t=u.selection.getStart();t!==u.getBody()&&(u.dom.setAttrib(t,"style",null),s(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function g(){var e=u.selection;return!e.isCollapsed()&&e.getStart()!=e.getEnd()}u.onKeyPress.add(function(e,t){var r;if((t.keyCode==8||t.keyCode==46)&&g())return r=m(),u.getDoc().execCommand("delete",!1,null),r(),n.cancel(t)}),u.dom.bind(u.getDoc(),"cut",function(){var e;g()&&(e=m(),u.onKeyUp.addToTop(n.cancel,n),setTimeout
(function(){e(),u.onKeyUp.remove(n.cancel,n)},0))})}},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&(e=n.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return o?(e=this.selection.getSel(),!e||!e.rangeCount||e.rangeCount==0):0}})}(tinymce),function(e){var t,n=e.each,r=!0,i=!1;e.EditorCommands=function(s){function h(e,t,n){var s;return e=e.toLowerCase(),(s=f.exec[e])?(s(e,t,n),r):i}function p(e){var t;return e=e.toLowerCase(),(t=f.state[e])?t(e):-1}function d(e){var t;return e=e.toLowerCase(),(t=f.value[e])?t(e):i}function v(e,t){t=t||"exec",n(e,function(e,r){n(r.toLowerCase().split(","),function(n){f[t][n]=e})})}function m(e,n,r){return n===t&&(n=i),r===t&&(r=null),s.getDoc().execCommand(e,n,r)}function g(e){return c.match(e)}function y(e,n){c.toggle(e,n?{value:n}:t)}function b(e){o=a.getBookmark(e)}function w(){a.moveToBookmark(o)}var o,u=s.dom,a=s.selection,f={state:{},exec:{},value:{}},l=s.settings,c=s.formatter;e.extend(this,{execCommand:h,queryCommandState:p,queryCommandValue:d,addCommands:v}),v({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){s.undoManager.add()},"Cut,Copy,Paste":function(t){var n,i=s.getDoc();try{m(t)}catch(o){n=r}if(n||!i.queryCommandSupported(t))e.isGecko?s.windowManager.confirm(s.getLang("clipboard_msg"),function(e){e&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):s.windowManager.alert(s.getLang("clipboard_no_support"))},unlink:function(e){a.isCollapsed()&&a.select(a.getNode()),m(e),a.collapse(i)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);n("left,center,right,full".split(","),function(e){t!=e&&c.remove("align"+e)}),y("align"+t),h("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;m(e),t=u.getParent(a.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(b(),u.split(n,t),w()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){y(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){y(e,n)},FontSize:function(t,n,r){var i,s;r>=1&&r<=7&&(s=e.explode(l.font_size_style_values),i=e.explode(l.font_size_classes),i?r=i[r-1]||r:r=s[r-1]||r),y(t,r)},RemoveFormat:function(e){c.remove(e)},mceBlockQuote:function(){y("blockquote")},SelectZoom:function(e,t,n){id=s.id+"_ifr",disableEdShadow(id),setTimeout(function(){smoothScale(parseInt(6.5*n),id,xWidth(id))},10)},FormatBlock:function(e,t,n){return y(n||"p")},mceCleanup:function(){var e=a.getBookmark();s.setContent(s.getContent({cleanup:r}),{cleanup:r}),a.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||a.getNode();i!=s.getBody()&&(b(),s.dom.remove(i,r),w())},mceSelectNodeDepth:function(e,t,n){var r=0;u.getParent(a.getNode(),function(e){if(e.nodeType==1&&r++==n)return a.select(e),i},s.getBody())},mceSelectNode:function(e,t,n){a.select(n)},mceInsertContent:function(t,n,r){var i,o,f,l,c,h,p,d,v,m,g=s.parser,y=new e.html.Serializer({},s.schema),b='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',w={content:r,format:"html"};a.onBeforeSetContent.dispatch(a,w),r=w.content,r.indexOf("{$caret}")==-1&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,b),a.isCollapsed()||s.getDoc().execCommand("Delete",!1,null),i=a.getNode(),w={context:i.nodeName.toLowerCase()},f=g.parse(r,w),d=f.lastChild;if(d.attr("id")=="mce_marker"){l=d;for(d=d.prev;d;d=d.walk(!0))if(d.type==3||!u.isBlock(d.name)){d.parent.insert(l,d,d.name==="br");break}}if(!w.invalid)r=y.serialize(f),d=i.firstChild,v=i.lastChild,!d||d===v&&d.nodeName==="BR"?u.setHTML(i,r):a.setContent(r);else{a.setContent(b),i=s.selection.getNode(),o=s.getBody(),i.nodeType==9?i=d=o:d=i;while(d!==o)i=d,d=d.parentNode;r=i==o?o.innerHTML:u.getOuterHTML(i),r=y.serialize(g.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return y.serialize(f)}))),i==o?u.setHTML(o,r):u.setOuterHTML(i,r)}l=u.get("mce_marker"),c=u.getRect(l),h=u.getViewPort(s.getWin());if(c.y+c.h>h.y+h.h||c.y<h.y||c.x>h.x+h.w||c.x<h.x)m=e.isIE?s.getDoc().documentElement:s.getBody(),m.scrollLeft=c.x,m.scrollTop=c.y-h.h+25;p=u.createRng(),d=l.previousSibling,d&&d.nodeType==3?p.setStart(d,d.nodeValue.length):(p.setStartBefore(l),p.setEndBefore(l)),u.remove(l),a.setRng(p),a.onSetContent.dispatch(a,w),s.addVisual()},mceInsertRawHTML:function(e,t,n){a.setContent("tiny_mce_marker"),s.setContent(s.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceSetContent:function(e,t,n){s.setContent(n)},"Indent,Outdent":function(e){var t,r=l.indentation,i=/[a-z%]+$/i.exec(r);r=parseInt(r),!p("InsertUnorderedList")&&!p("InsertOrderedList")?n(a.getSelectedBlocks(),function(n){e=="outdent"?(t=Math.max(0,parseInt(n.style.paddingLeft||0)-r),u.setStyle(n,"paddingLeft",t?t+i:"")):u.setStyle(n,"paddingLeft",parseInt(n.style.paddingLeft||0)+r+i)}):m(e)},mceRepaint:function(){if(e.isGecko)try{b(r),a.getSel()&&a.getSel().selectAllChildren(s.getBody()),a.collapse(r),w()}catch(t){}},mceToggleFormat:function(e,t,n){c.toggle(n)},InsertHorizontalRule:function(){s.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){s.hasVisual=!s.hasVisual,s.addVisual()},mceReplaceContent:function(e,t,n){s.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,a.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;typeof n=="string"&&(n={href:n}),r=u.getParent(a.getNode(),"a"),n.href=n.href.replace(" ","%20"),(!r||!n.href)&&c.remove("link"),n.href&&c.apply("link",n,r)},selectAll:function(){var e=u.getRoot(),t=u.createRng();t.setStart(e,0),t.setEnd(e,e.childNodes.length),s.selection.setRng(t)}}),v({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var n="align"+t.substring(7),i=a.isCollapsed()?[a.getNode()]:a.getSelectedBlocks(),s=e.map(i,function(e){return!!c.matchNode(e,n)});return e.inArray(s,r)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return g(e)},mceBlockQuote:function(){return g("blockquote")},Outdent:function(){var e;if(l.inline_styles){if((e=u.getParent(a.getStart(),u.isBlock))&&parseInt(e.style.paddingLeft)>0)return r;if((e=u.getParent(a.getEnd(),u.isBlock))&&parseInt(e.style.paddingLeft)>0)return r}return p("InsertUnorderedList")||p("InsertOrderedList")||!l.inline_styles&&!!u.getParent(a.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){return u.getParent(a.getNode(),e=="insertunorderedlist"?"UL":"OL")}},"state"),v({"FontSize,FontName":function(e){var t,n=0;if(t=u.getParent(a.getNode(),"span"))e=="fontsize"?n=t.style.fontSize:n=t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return n}},"value"),l.custom_undo_redo&&v({Undo:function(){s.undoManager.undo()},Redo:function(){s.undoManager.redo()}})}}(tinymce),function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){function u(){return e.trim(n.getContent({format:"raw",no_events:1}))}var r,i,s=0,o=[];return r={typing:!1,onAdd:new t(r),onUndo:new t(r),onRedo:new t(r),beforeChange:function(){i=n.selection.getBookmark(2,!0)},add:function(e){var t,a,f=n.settings;e=e||{},e.content=u(),a=o[s];if(a&&a.content==e.content)return null;o[s]&&(o[s].beforeBookmark=i);if(f.custom_undo_redo_levels&&o.length>f.custom_undo_redo_levels){for(t=0;t<o.length-1;t++)o[t]=o[t+1];o.length--,s=o.length}return e.bookmark=n.selection.getBookmark(2,!0),s<o.length-1&&(o.length=s+1),o.push(e),s=o.length-1,r.onAdd.dispatch(r,e),n.isNotDirty=0,e},undo:function(){var e;return r.typing&&(r.add(),r.typing=!1),s>0&&(e=o[--s],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.beforeBookmark),r.onUndo.dispatch(r,e)),e},redo:function(){var e;return s<o.length-1&&(e=o[++s],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),r.onRedo.dispatch(r,e)),e},clear:function(){o=[],s=0,r.typing=!1},hasUndo:function(){return s>0||this.typing},hasRedo:function(){return s<o.length-1&&!this.typing}}}}(tinymce),function(e){function f(e){var t,n,r;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(e.nodeName)&&(t?(n=e.cloneNode(!1),n.appendChild(t),t=n):t=r=e.cloneNode(!1),t.removeAttribute("id"));while(e=e.parentNode);if(t)return{wrapper:t,inner:r}}function l(e,t){var n=t.ownerDocument.createRange();return n.setStart(e.endContainer,e.endOffset),n.setEndAfter(t),n.cloneContents().textContent.length==0}function c(e,t,n){var r,i;return t.isEmpty(n)?(r=t.getParent(n,"ul,ol"),t.getParent(r.parentNode,"ul,ol")||(t.split(r,n),i=t.create("p",0,'<br data-mce-bogus="1" />'),t.replace(i,n),e.select(i,1)),a):u}var t=e.dom.Event,n=e.isIE,r=e.isGecko,i=e.isOpera,s=e.each,o=e.extend,u=!0,a=!1;e.create("tinymce.ForceBlocks",{ForceBlocks:function(e){var t,n=this,r=e.settings;n.editor=e,n.dom=e.dom,t=(r.forced_root_block||"p").toLowerCase(),r.element=t.toUpperCase(),e.onPreInit.add(n.setup,n)},setup:function(){var i=this,s=i.editor,o=s.settings,a=s.dom,l=s.selection,c=s.schema.getBlockElements();if(o.forced_root_block){function h(){var e,t,n,r,i,u,f,h=l.getStart(),p=s.getBody(),d=-16777215;if(!h||h.nodeType!==1)return;while(h!=p){if(c[h.nodeName])return;h=h.parentNode}e=l.getRng(),e.setStart?(t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset):(e.item&&(e=s.getDoc().body.createTextRange(),e.moveToElementText(e.item(0))),tmpRng=e.duplicate(),tmpRng.collapse(!0),n=tmpRng.move("character",d)*-1,tmpRng.collapsed||(tmpRng=e.duplicate(),tmpRng.collapse(!1),i=tmpRng.move("character",d)*-1-n));for(h=p.firstChild;h;h)h.nodeType===3||h.nodeType==1&&!c[h.nodeName]?(u||(u=a.create(o.forced_root_block),h.parentNode.insertBefore(u,h)),f=h,h=h.nextSibling,u.appendChild(f)):(u=null,h=h.nextSibling);if(e.setStart)e.setStart(t,n),e.setEnd(r,i),l.setRng(e);else try{e=s.getDoc().body.createTextRange(),e.moveToElementText(p),e.collapse(!0),e.moveStart("character",n),i>0&&e.moveEnd("character",i),e.select()}catch(v){}s.nodeChanged()}s.onKeyUp.add(h),s.onClick.add(h)}o.force_br_newlines&&n&&s.onKeyPress.add(function(e,n){var r;if(n.keyCode==13&&l.getNode().nodeName!="LI")return l.setContent('<br id="__" /> ',{format:"raw"}),r=a.get("__"),r.removeAttribute("id"),l.select(r),l.collapse(),t.cancel(n)}),o.force_p_newlines&&(n?(e.addUnload(function(){i._previousFormats=0}),s.onKeyPress.add(function(e,t){i._previousFormats=0,t.keyCode==13&&!t.shiftKey&&e.selection.isCollapsed()&&o.keep_styles&&(i._previousFormats=f(e.selection.getStart()))}),s.onKeyUp.add(function(e,t){var n,r;t.keyCode==13&&!t.shiftKey&&(n=e.selection.getStart(),r=i._previousFormats,!n.hasChildNodes()&&r&&(n=a.getParent(n,a.isBlock),n&&n.nodeName!="LI"&&(n.innerHTML="",i._previousFormats?(n.appendChild(r.wrapper),r.inner.innerHTML="﻿"):n.innerHTML="﻿",l.select(n,1),l.collapse(!0),e.getDoc().execCommand("Delete",!1,null),i._previousFormats=0)))})):s.onKeyPress.add(function(e,n){n.keyCode==13&&!n.shiftKey&&!i.insertPara(n)&&t.cancel(n)}),r&&s.onKeyDown.add(function(e,t){(t.keyCode==8||t.keyCode==46)&&!t.shiftKey&&i.backspaceDelete(t,t.keyCode==8)}));if(e.isWebKit){function p(e){var t,n,r=l.getRng(),i=a.create("div",null," "),s=a.getViewPort(e.getWin()).h;r.insertNode(t=a.create("br")),r.setStartAfter(t),r.setEndAfter(t),l.setRng(r),l.getSel().focusNode==t.previousSibling&&(l.select(a.insertAfter(a.doc.createTextNode(" "),t)),l.collapse(u)),a.insertAfter(i,t),n=a.getPos(i).y,a.remove(i),n>s&&e.getWin().scrollTo(0,n)}s.onKeyPress.add(function(e,n){n.keyCode==13&&(n.shiftKey||o.force_br_newlines&&!a.getParent(l.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(p(e),t.cancel(n))})}n&&o.element!="P"&&(s.onKeyPress.add(function(){i.lastElm=l.getNode().nodeName}),s.onKeyUp.add(function(e,t){var n,r=l.getNode(),s=e.getBody();s.childNodes.length===1&&r.nodeName=="P"?(r=a.rename(r,o.element),l.select(r),l.collapse(),e.nodeChanged()):t.keyCode==13&&!t.shiftKey&&i.lastElm!="P"&&(n=a.getParent(r,"p"),n&&(a.rename(n,o.element),e.nodeChanged()))}))},getParentBlock:function(e){var t=this.dom;return t.getParent(e,t.isBlock)},insertPara:function(){function _(e,t){var n,r,s,o=[];e.innerHTML="";if(C.keep_styles){r=t;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(r.nodeName)&&(n=r.cloneNode(a),T.setAttrib(n,"id",""),o.push(n));while(r=r.parentNode)}if(o.length>0){for(s=o.length-1,n=e;s>=0;s--)n=n.appendChild(o[s]);return o[0].innerHTML=i?" ":"<br />",o[0]}e.innerHTML=i?" ":"<br />"}var e,t,n,r,s,o,f,h,p,d,v,m,g,y,b,w,E,S=this,x=S.editor,T=x.dom,N=x.getDoc(),C=x.settings,k=x.selection.getSel(),L=k.getRangeAt(0),A=N.body,O=T.getViewPort(x.getWin());x.undoManager.beforeChange(),e=N.createRange(),e.setStart(k.anchorNode,k.anchorOffset),e.collapse(u),t=N.createRange(),t.setStart(k.focusNode,k.focusOffset),t.collapse(u),n=e.compareBoundaryPoints(e.START_TO_END,t)<0,r=n?k.anchorNode:k.focusNode,s=n?k.anchorOffset:k.focusOffset,o=n?k.focusNode:k.anchorNode,f=n?k.focusOffset:k.anchorOffset;if(r===o&&/^(TD|TH)$/.test(r.nodeName))return r.firstChild.nodeName=="BR"&&T.remove(r.firstChild),r.childNodes.length==0?(x.dom.add(r,C.element,null,"<br />"),m=x.dom.add(r,C.element,null,"<br />")):(b=r.innerHTML,r.innerHTML="",x.dom.add(r,C.element,null,b),m=x.dom.add(r,C.element,null,"<br />")),L=N.createRange(),L.selectNodeContents(m),L.collapse(1),x.selection.setRng(L),a;r==A&&o==A&&A.firstChild&&x.dom.isBlock(A.firstChild)&&(r=o=r.firstChild,s=f=0,e=N.createRange(),e.setStart(r,0),t=N.createRange(),t.setStart(o,0)),N.body.hasChildNodes()||N.body.appendChild(T.create("br")),r=r.nodeName=="HTML"?N.body:r,r=r.nodeName=="BODY"?r.firstChild:r,o=o.nodeName=="HTML"?N.body:o,o=o.nodeName=="BODY"?o.firstChild:o,h=S.getParentBlock(r),p=S.getParentBlock(o),d=h?h.nodeName:C.element;if(b=S.dom.getParent(h,"li,pre"))return b.nodeName=="LI"?c(x.selection,S.dom,b):u;h&&(h.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(T.getStyle(h,"position",1)))&&(d=C.element,h=null),p&&(p.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(T.getStyle(h,"position",1)))&&(d=C.element,p=null);if(/(TD|TABLE|TH|CAPTION)/.test(d)||h&&d=="DIV"&&/left|right/gi.test(T.getStyle(h,"float",1)))d=C.element,h=p=null;v=h&&h.nodeName==d?h.cloneNode(0):x.dom.create(d),m=p&&p.nodeName==d?p.cloneNode(0):x.dom.create(d),m.removeAttribute("id"),/^(H[1-6])$/.test(d)&&l(L,h)&&(m=x.dom.create(C.element)),b=g=r;do{if(b==A||b.nodeType==9||S.dom.isBlock(b)||/(TD|TABLE|TH|CAPTION)/.test(b.nodeName))break;g=b}while(b=b.previousSibling?b.previousSibling:b.parentNode);b=y=o;do{if(b==A||b.nodeType==9||S.dom.isBlock(b)||/(TD|TABLE|TH|CAPTION)/.test(b.nodeName))break;y=b}while(b=b.nextSibling?b.nextSibling:b.parentNode);g.nodeName==d?e.setStart(g,0):e.setStartBefore(g),e.setEnd(r,s),v.appendChild(e.cloneContents()||N.createTextNode(""));try{t.setEndAfter(y)}catch(M){}return t.setStart(o,f),m.appendChild(t.cloneContents()||N.createTextNode("")),L=N.createRange(),!g.previousSibling&&g.parentNode.nodeName==d?L.setStartBefore(g.parentNode):e.startContainer.nodeName==d&&e.startOffset==0?L.setStartBefore(e.startContainer):L.setStart(e.startContainer,e.startOffset),!y.nextSibling&&y.parentNode.nodeName==d?L.setEndAfter(y.parentNode):L.setEnd(t.endContainer,t.endOffset),L.deleteContents(),i&&x.getWin().scrollTo(0,O.y),v.firstChild&&v.firstChild.nodeName==d&&(v.innerHTML=v.firstChild.innerHTML),m.firstChild&&m.firstChild.nodeName==d&&(m.innerHTML=m.firstChild.innerHTML),T.isEmpty(v)&&_(v,r),T.isEmpty(m)&&(E=_(m,o)),i&&parseFloat(opera.version())<9.5?(L.insertNode(v),L.insertNode(m)):(L.insertNode(m),L.insertNode(v)),m.normalize(),v.normalize(),x.selection.select(m,!0),x.selection.collapse(!0),w=x.dom.getPos(m).y,(w<O.y||w+25>O.y+O.h)&&x.getWin().scrollTo(0,w<O.y?w:w-O.h+25),x.undoManager.add(),a},backspaceDelete:function(n,r){var i,s,o,u,f=this,l=f.editor,c=l.getBody(),h=l.dom,p=l.selection,d=p.getRng(),v=d.startContainer;if(!r&&d.collapsed&&v.nodeType==1&&d.startOffset==v.childNodes.length){u=new e.dom.TreeWalker(v.lastChild,v);for(i=v.lastChild;i;i=u.prev())if(i.nodeType==3){d.setStart(i,i.nodeValue.length),d.collapse(!0),p.setRng(d);return}}if(v&&l.dom.isBlock(v)&&!/^(TD|TH)$/.test(v.nodeName)&&r)if(v.childNodes.length==0||v.childNodes.length==1&&v.firstChild.nodeName=="BR"){i=v;while((i=i.previousSibling)&&!l.dom.isBlock(i));if(i){if(v!=c.firstChild){s=l.dom.doc.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,a);while(o=s.nextNode())i=o;d=l.getDoc().createRange(),d.setStart(i,i.nodeValue?i.nodeValue.length:0),d.setEnd(i,i.nodeValue?i.nodeValue.length:0),p.setRng(d),l.dom.remove(v)}return t.cancel(n)}}}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,n){var i=this;n=n||{},i.editor=t,i.controls={},i.onAdd=new e.util.Dispatcher(i),i.onPostRender=new e.util.Dispatcher(i),i.prefix=n.prefix||t.id+"_",i._cls={},i.onPostRender.add(function(){r(i.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var t,n=this,i=n.editor;r(i.plugins,function(r){if(r.createControl){t=r.createControl(e,n);if(t)return!1}});switch(e){case"|":case"separator":return n.createSeparator()}return!t&&i.buttons&&(t=i.buttons[e])?n.createButton(e,t):n.add(t)},createDropMenu:function(t,n,r){var s,o,u,a,f=this,l=f.editor;n=i({"class":"mceDropDown",constrain:l.settings.constrain_menus},n),n["class"]=n["class"]+" "+l.getParam("skin")+"Skin";if(u=l.getParam("skin_variant"))n["class"]+=" "+l.getParam("skin")+"Skin"+u.substring(0,1).toUpperCase()+u.substring(1);return t=f.prefix+t,a=r||f._cls.dropmenu||e.ui.DropMenu,s=f.controls[t]=new a(t,n),s.onAddItem.add(function(e,t){var n=t.settings;n.title=l.getLang(n.title,n.title),n.onclick||(n.onclick=function(){n.cmd&&l.execCommand(n.cmd,n.ui||!1,n.value)})}),l.onRemove.add(function(){s.destroy()}),e.isIE&&(s.onShowMenu.add(function(){l.focus(),o=l.selection.getBookmark(1)}),s.onHideMenu.add(function(){o&&(l.selection.moveToBookmark(o),o=0)})),f.add(s)},createListBox:function(t,r,s){function l(t){return t.settings.use_accessible_selects&&!e.isGecko}var o,u,a=this,f=a.editor;return a.get(t)?null:(r.title=f.translate(r.title),r.scope=r.scope||f,r.onselect||(r.onselect=function(e){f.execCommand(r.cmd,r.ui||!1,e||r.value)}),r=i({title:r.title,"class":"mce_"+t,scope:r.scope,control_manager:a},r),t=a.prefix+t,f.settings.use_native_selects||l(f)?o=new e.ui.NativeListBox(t,r):(u=s||a._cls.listbox||e.ui.ListBox,o=new u(t,r,f)),a.controls[t]=o,e.isWebKit&&o.onPostRender.add(function(e,t){n.add(t,"mousedown",function(){f.bookmark=f.selection.getBookmark(1)}),n.add(t,"focus",function(){f.selection.moveToBookmark(f.bookmark),f.bookmark=null})}),o.hideMenu&&f.onMouseDown.add(o.hideMenu,o),a.add(o))},createButton:function(t,n,r){var s,o,u=this,a=u.editor;return u.get(t)?null:(n.title=a.translate(n.title),n.label=a.translate(n.label),n.scope=n.scope||a,!n.onclick&&!n.menu_button&&(n.onclick=function(){a.execCommand(n.cmd,n.ui||!1,n.value)}),n=i({title:n.title,"class":"mce_"+t,unavailable_prefix:a.getLang("unavailable",""),scope:n.scope,control_manager:u},n),t=u.prefix+t,n.menu_button?(o=r||u._cls.menubutton||e.ui.MenuButton,s=new o(t,n,a),a.onMouseDown.add(s.hideMenu,s)):(o=u._cls.button||e.ui.Button,s=new o(t,n,a)),u.add(s))},createMenuButton:function(e,t,n){return t=t||{},t.menu_button=1,this.createButton(e,t,n)},createSplitButton:function(t,n,r){var s,o,u=this,a=u.editor;return u.get(t)?null:(n.title=a.translate(n.title),n.scope=n.scope||a,n.onclick||(n.onclick=function(e){a.execCommand(n.cmd,n.ui||!1,e||n.value)}),n.onselect||(n.onselect=function(e){a.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=i({title:n.title,"class":"mce_"+t,scope:n.scope,control_manager:u},n),t=u.prefix+t,o=r||u._cls.splitbutton||e.ui.SplitButton,s=u.add(new o(t,n,a)),a.onMouseDown.add(s.hideMenu,s),s)},createColorSplitButton:function(t,n,r){var s,o,u,a=this,f=a.editor;return a.get(t)?null:(n.title=f.translate(n.title),n.scope=n.scope||f,n.onclick||(n.onclick=function(t){e.isIE&&(u=f.selection.getBookmark(1)),f.execCommand(n.cmd,n.ui||!1,t||n.value)}),n.onselect||(n.onselect=function(e){f.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=i({title:n.title,"class":"mce_"+t,menu_class:f.getParam("skin")+"Skin",scope:n.scope,more_colors_title:f.getLang("more_colors")},n),t=a.prefix+t,o=r||a._cls.colorsplitbutton||e.ui.ColorSplitButton,s=new o(t,n,f),f.onMouseDown.add(s.hideMenu,s),f.onRemove.add(function(){s.destroy()}),e.isIE&&(s.onShowMenu.add(function(){f.focus(),u=f.selection.getBookmark(1)}),s.onHideMenu.add(function(){u&&(f.selection.moveToBookmark(u),u=0)})),a.add(s))},createToolbar:function(t,n,r){var i,s,o=this;return t=o.prefix+t,s=r||o._cls.toolbar||e.ui.Toolbar,i=new s(t,n,o.editor),o.get(t)?null:o.add(i)},createToolbarGroup:function(t,n,r){var i,s,o=this;return t=o.prefix+t,s=r||this._cls.toolbarGroup||e.ui.ToolbarGroup,i=new s(t,n,o.editor),o.get(t)?null:o.add(i)},createSeparator:function(t){var n=t||this._cls.separator||e.ui.Separator;return new n},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){r(this.controls,function(e){e.destroy()}),this.controls=null}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each,r=e.isIE,i=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e,n.onOpen=new t(n),n.onClose=new t(n),n.params={},n.features={}},open:function(t,s){var o,u,a,f,l=this,c="",h=l.editor.settings.dialog_type=="modal",p=e.DOM.getViewPort();t=t||{},s=s||{},u=i?p.w:screen.width,a=i?p.h:screen.height,t.name=t.name||"mc_"+(new Date).getTime(),t.width=parseInt(t.width||320),t.height=parseInt(t.height||240),t.resizable=!0,t.left=t.left||parseInt(u/2)-t.width/2,t.top=t.top||parseInt(a/2)-t.height/2,s.inline=!1,s.mce_width=t.width,s.mce_height=t.height,s.mce_auto_focus=t.auto_focus,h&&r&&(t.center=!0,t.help=!1,t.dialogWidth=t.width+"px",t.dialogHeight=t.height+"px",t.scroll=t.scrollbars||!1),n(t,function(t,n){e.is(t,"boolean")&&(t=t?"yes":"no"),/^(name|url)$/.test(n)||(r&&h?c+=(c?";":"")+n+":"+t:c+=(c?",":"")+n+"="+t)}),l.features=t,l.params=s,l.onOpen.dispatch(l,t,s),f=t.url||t.file,f=e._addVer(f);try{r&&h?(o=1,window.showModalDialog(f,window,c)):o=window.open(f,t.name,c)}catch(d){}o||alert(l.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(t,n,r,i,s,o){var u=e.resolve(t);return new u(n,r,i,s,o)},confirm:function(e,t,n,r){r=r||window,t.call(n||this,r.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,r){var i=this;r=r||window,r.alert(i._decode(i.editor.getLang(e,e))),t&&t.call(n||i)},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})}(tinymce),function(e){e.Formatter=function(t){function b(e,t){return u.getParents(e,t,u.getRoot())}function w(e){return e.nodeType===1&&e.id==="_mce_caret"}function E(e){return e?s[e]:s}function S(e,t){e&&(typeof e!="string"?o(e,function(e,t){S(t,e)}):(t=t.length?t:[t],o(t,function(e){e.deep===n&&(e.deep=!e.selector),e.split===n&&(e.split=!e.selector||e.inline),e.remove===n&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),typeof e.classes=="string"&&(e.classes=e.classes.split(/\s+/))}),s[e]=t))}function x(n,r,s){function x(e,t){t=t||b,e&&(t.onformat&&t.onformat(e,t,r,s),o(t.styles,function(t,n){u.setStyle(e,n,D(t,r))}),o(t.attributes,function(t,n){u.setAttrib(e,n,D(t,r))}),o(t.classes,function(t){t=D(t,r),u.hasClass(e,t)||u.addClass(e,t)}))}function T(){function u(e,t){var n=new f(t);for(s=n.current();s;s=n.prev())if(s.childNodes.length>1||s==e)return s}var e,n,r,i,o;return e=t.selection.getRng(),n=e.startContainer,r=e.endContainer,n!=r&&e.endOffset==0&&(i=u(n,r),o=i.nodeType==3?i.length:i.childNodes.length,e.setEnd(i,o)),e}function N(t,n,r,i,s){var a,f,l=[],c=-1,h=-1,p=-1;return o(t.childNodes,function(e,t){if(e.nodeName==="UL"||e.nodeName==="OL")return c=t,a=e,!1}),o(t.childNodes,function(e,t){e.nodeName==="SPAN"&&u.getAttrib(e,"data-mce-type")=="bookmark"&&(e.id==n.id+"_start"?h=t:e.id==n.id+"_end"&&(p=t))}),c<=0||h<c&&p>c?(o(e.grep(t.childNodes),s),0):(f=r.cloneNode(g),o(e.grep(t.childNodes),function(e,t){if(h<c&&t<c||h>c&&t>c)l.push(e),e.parentNode.removeChild(e)}),h<c?t.insertBefore(f,a):h>c&&t.insertBefore(f,a.nextSibling),i.push(f),o(l,function(e){f.appendChild(e)}),f)}function k(t,i,s){var a=[],f=b.inline||b.block,p=u.create(f);x(p),l.walk(t,function(t){function h(t){var d,v=t.nodeName.toLowerCase(),y=t.parentNode.nodeName.toLowerCase();if(M(v,"br")){l=0,b.block&&u.remove(t);return}if(b.wrapper&&C(t,n,r)){l=0;return}if(b.block&&!b.wrapper&&U(v)){t=u.rename(t,f),x(t),a.push(t),l=0;return}if(b.selector){o(m,function(e){if("collapsed"in e&&e.collapsed!==S)return;u.is(t,e.selector)&&!w(t)&&(x(t,e),d=!0)});if(!b.inline||d){l=0;return}}c(f,v)&&c(y,f)&&(!!s||t.nodeType!==3||t.nodeValue.length!==1||t.nodeValue.charCodeAt(0)!==65279)&&!w(t)?(l||(l=p.cloneNode(g),t.parentNode.insertBefore(l,t),a.push(l)),l.appendChild(t)):v=="li"&&i?l=N(t,i,p,a,h):(l=0,o(e.grep(t.childNodes),h),l=0)}var l;o(t,h)}),b.wrap_links===!1&&o(a,function(t){function n(t){var r,i,s;if(t.nodeName==="A"){i=p.cloneNode(g),a.push(i),s=e.grep(t.childNodes);for(r=0;r<s.length;r++)i.appendChild(s[r]);t.appendChild(i)}o(e.grep(t.childNodes),n)}n(t)}),o(a,function(e){function i(e){var t=0;return o(e.childNodes,function(e){!P(e)&&!q(e)&&t++}),t}function s(e){var t,n;return o(e.childNodes,function(e){if(e.nodeType==1&&!q(e)&&!w(e))return t=e,g}),t&&O(t,b)&&(n=t.cloneNode(g),x(n),u.replace(n,e,y),u.remove(t,1)),n||e}var t;t=i(e);if((a.length>1||!h(e))&&t===0){u.remove(e,1);return}if(b.inline||b.wrapper){!b.exact&&t===1&&(e=s(e)),o(m,function(t){o(u.select(t.inline,e),function(e){var n;if(t.wrap_links===!1){n=e.parentNode;do if(n.nodeName==="A")return;while(n=n.parentNode)}j(t,r,e,t.exact?e:null)})});if(C(e.parentNode,n,r))return u.remove(e,1),e=0,y;b.merge_with_parents&&u.getParent(e.parentNode,function(t){if(C(t,n,r))return u.remove(e,1),e=0,y}),e&&b.merge_siblings!==!1&&(e=R(I(e),e),e=R(e,I(e,y)))}})}var p,d,v,m=E(n),b=m[0],S=a.isCollapsed();b&&(s?s.nodeType?(d=u.createRng(),d.setStartBefore(s),d.setEndAfter(s),k(B(d,m),null,!0)):k(s,null,!0):!S||!b.inline||u.select("td.mceSelected,th.mceSelected").length?(v=t.selection.getNode(),t.selection.setRng(T()),p=a.getBookmark(),k(B(a.getRng(y),m),p),b.styles&&(b.styles.color||b.styles.textDecoration)&&(e.walk(v,i,"childNodes"),i(v)),a.moveToBookmark(p),X(a.getRng(y)),t.nodeChanged()):W("apply",n,r))}function T(n,i,s){function m(t){var n,r,s=e.grep(t.childNodes);for(n=0,r=p.length;n<r;n++)if(j(p[n],i,t,t))break;if(v.deep)for(n=0,r=s.length;n<r;n++)m(s[n])}function w(e){var t;return o(b(e.parentNode).reverse(),function(e){var r;!t&&e.id!="_start"&&e.id!="_end"&&(r=C(e,n,i),r&&r.split!==!1&&(t=e))}),t}function S(e,t,n,r){var s,o,a,f,l,c;if(e){c=e.parentNode;for(s=t.parentNode;s&&s!=c;s=s.parentNode){o=s.cloneNode(g);for(l=0;l<p.length;l++)if(j(p[l],i,o,o)){o=0;break}o&&(a&&o.appendChild(a),f||(f=o),a=o)}r&&(!v.mixed||!h(e))&&(t=u.split(e,t)),a&&(n.parentNode.insertBefore(a,n),f.appendChild(n))}return t}function x(e){return S(w(e),e,e,!0)}function T(e){var t=u.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return q(n)&&(n=n[e?"firstChild":"lastChild"]),u.remove(t,!0),n}function N(e){var n,i;e=B(e,p,y),v.split&&(n=z(e,y),i=z(e),n!=i?(n=H(n,"span",{id:"_start","data-mce-type":"bookmark"}),i=H(i,"span",{id:"_end","data-mce-type":"bookmark"}),x(n),x(i),n=T(y),i=T()):n=i=x(n),e.startContainer=n.parentNode,e.startOffset=d(n),e.endContainer=i.parentNode,e.endOffset=d(i)+1),l.walk(e,function(e){o(e,function(e){m(e),e.nodeType===1&&t.dom.getStyle(e,"text-decoration")==="underline"&&e.parentNode&&r(e.parentNode)==="underline"&&j({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var f,c,p=E(n),v=p[0];if(s){s.nodeType?(c=u.createRng(),c.setStartBefore(s),c.setEndAfter(s),N(c)):N(s);return}!a.isCollapsed()||!v.inline||u.select("td.mceSelected,th.mceSelected").length?(f=a.getBookmark(),N(a.getRng(y)),a.moveToBookmark(f),v.inline&&k(n,i,a.getStart())&&X(a.getRng(!0)),t.nodeChanged()):W("remove",n,i),e.isWebKit&&t.execCommand("mceCleanup")}function N(e,t,n){var r=E(e);!k(e,t,n)||"toggle"in r[0]&&!r[0].toggle?x(e,t,n):T(e,t,n)}function C(e,t,r,i){function l(e,t,s){var o,a,f,l=t[s];if(t.onmatch)return t.onmatch(e,t,s);if(l)if(l.length===n){for(o in l)if(l.hasOwnProperty(o)){s==="attributes"?a=u.getAttrib(e,o):a=_(e,o);if(i&&!a&&!t.exact)return;if((!i||t.exact)&&!M(a,D(l[o],r)))return}}else for(f=0;f<l.length;f++)if(s==="attributes"?u.getAttrib(e,l[f]):_(e,l[f]))return t;return t}var s,o,a,f=E(t);if(f&&e)for(o=0;o<f.length;o++){s=f[o];if(O(e,s)&&l(e,s,"attributes")&&l(e,s,"styles")){if(a=s.classes)for(o=0;o<a.length;o++)if(!u.hasClass(e,a[o]))return;return s}}}function k(e,t,n){function i(n){return n=u.getParent(n,function(n){return!!C(n,e,t,!0)}),C(n,e,t)}var r;return n?i(n):(n=a.getNode(),i(n)?y:(r=a.getStart(),r!=n&&i(r)?y:g))}function L(e,t){var n=[],r={},i=a.getStart();return u.getParent(i,function(i){var s,o;for(s=0;s<e.length;s++)o=e[s],!r[o]&&C(i,o,t)&&(r[o]=!0,n.push(o))}),n}function A(e){var t,n,r,i,s,o=E(e);if(o){t=a.getStart(),n=b(t);for(i=o.length-1;i>=0;i--){s=o[i].selector;if(!s)return y;for(r=n.length-1;r>=0;r--)if(u.is(n[r],s))return y}}return g}function O(e,t){if(M(e,t.inline))return y;if(M(e,t.block))return y;if(t.selector)return u.is(e,t.selector)}function M(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function _(e,t){var n=u.getStyle(e,t);if(t=="color"||t=="backgroundColor")n=u.toHex(n);return t=="fontWeight"&&n==700&&(n="bold"),""+n}function D(e,t){return typeof e!="string"?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function P(e){return e&&e.nodeType===3&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function H(e,t,n){var r=u.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function B(e,r,i){function m(e){var t,n,i=t=e?l:p,s=e?"previousSibling":"nextSibling";root=u.getRoot();if(i.nodeType==3&&!P(i))if(e?c>0:v<i.nodeValue.length)return i;for(;;){if(!r[0].block_expand&&h(t))return t;for(n=t[s];n;n=n[s])if(!q(n)&&!P(n))return t;if(t.parentNode==root){i=t;break}t=t.parentNode}return i}function y(e,t){t===n&&(t=e.nodeType===3?e.length:e.childNodes.length);while(e&&e.hasChildNodes())e=e.childNodes[t],e&&(t=e.nodeType===3?e.length:e.childNodes.length);return{node:e,offset:t}}var s,o,a,l=e.startContainer,c=e.startOffset,p=e.endContainer,v=e.endOffset;l.nodeType==1&&l.hasChildNodes()&&(s=l.childNodes.length-1,l=l.childNodes[c>s?s:c],l.nodeType==3&&(c=0)),p.nodeType==1&&p.hasChildNodes()&&(s=p.childNodes.length-1,p=p.childNodes[v>s?s:v-1],p.nodeType==3&&(v=p.nodeValue.length));if(q(l.parentNode)||q(l))l=q(l)?l:l.parentNode,l=l.nextSibling||l,l.nodeType==3&&(c=0);if(q(p.parentNode)||q(p))p=q(p)?p:p.parentNode,p=p.previousSibling||p,p.nodeType==3&&(v=p.length);if(r[0].inline){if(e.collapsed){function w(e,n,r){function c(e,t){var n,s,o=e.nodeValue;return typeof t=="undefined"&&(t=r?o.length:0),r?(n=o.lastIndexOf(" ",t),s=o.lastIndexOf(" ",t),n=n>s?n:s,n!==-1&&!i&&n++):(n=o.indexOf(" ",t),s=o.indexOf(" ",t),n=n===-1||s!==-1&&n>=s?s:n),n}var s,o,a,l;if(e.nodeType===3){a=c(e,n);if(a!==-1)return{container:e,offset:a};l=e}s=new f(e,u.getParent(e,h)||t.getBody());while(o=s[r?"prev":"next"]())if(o.nodeType===3){l=o,a=c(o);if(a!==-1)return{container:o,offset:a}}else if(h(o))break;if(l)return r?n=0:n=l.length,{container:l,offset:n}}a=w(l,c,!0),a&&(l=a.container,c=a.offset),a=w(p,v),a&&(p=a.container,v=a.offset)}o=y(p,v);if(o.node){while(o.node&&o.offset===0&&o.node.previousSibling)o=y(o.node.previousSibling);o.node&&o.offset>0&&o.node.nodeType===3&&o.node.nodeValue.charAt(o.offset-1)===" "&&(o.offset>1?(p=o.node,p.splitText(o.offset-1)):o.node.previousSibling)}}if(r[0].inline||r[0].block_expand){if(!r[0].inline||l.nodeType!=3||c===0)l=m(!0);if(!r[0].inline||p.nodeType!=3||v===p.nodeValue.length)p=m()}if(r[0].selector&&r[0].expand!==g&&!r[0].inline){function E(t,n){var i,s,o,a;t.nodeType==3&&t.nodeValue.length==0&&t[n]&&(t=t[n]),i=b(t);for(s=0;s<i.length;s++)for(o=0;o<r.length;o++){a=r[o];if("collapsed"in a&&a.collapsed!==e.collapsed)continue;if(u.is(i[s],a.selector))return i[s]}return t}l=E(l,"previousSibling"),p=E(p,"nextSibling")}if(r[0].block||r[0].selector){function S(e,t){var n;r[0].wrapper||(n=u.getParent(e,r[0].block)),n||(n=u.getParent(e.nodeType==3?e.parentNode:e,h)),n&&r[0].wrapper&&(n=b(n,"ul,ol").reverse()[0]||n);if(!n){n=e;while(n[t]&&!h(n[
t])){n=n[t];if(M(n,"br"))break}}return n||e}l=S(l,"previousSibling"),p=S(p,"nextSibling"),r[0].block&&(h(l)||(l=m(!0)),h(p)||(p=m()))}return l.nodeType==1&&(c=d(l),l=l.parentNode),p.nodeType==1&&(v=d(p)+1,p=p.parentNode),{startContainer:l,startOffset:c,endContainer:p,endOffset:v}}function j(e,t,n,r){var i,s,a;if(!O(n,e))return g;if(e.remove!="all"){o(e.styles,function(e,i){e=D(e,t),typeof i=="number"&&(i=e,r=0),(!r||M(_(r,i),e))&&u.setStyle(n,i,""),a=1}),a&&u.getAttrib(n,"style")==""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),o(e.attributes,function(e,i){var s;e=D(e,t),typeof i=="number"&&(i=e,r=0);if(!r||M(u.getAttrib(r,i),e)){if(i=="class"){e=u.getAttrib(n,i);if(e){s="",o(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(s+=(s?" ":"")+e)});if(s){u.setAttrib(n,i,s);return}}}i=="class"&&n.removeAttribute("className"),m.test(i)&&n.removeAttribute("data-mce-"+i),n.removeAttribute(i)}}),o(e.classes,function(e){e=D(e,t),(!r||u.hasClass(r,e))&&u.removeClass(n,e)}),s=u.getAttribs(n);for(i=0;i<s.length;i++)if(s[i].nodeName.indexOf("_")!==0)return g}if(e.remove!="none")return F(n,e),y}function F(t,n){var r,i=t.parentNode;if(n.block)if(!p){function s(e,t,n){return e=I(e,t,n),!e||e.nodeName=="BR"||h(e)}h(t)&&!h(i)&&(!s(t,g)&&!s(t.firstChild,y,1)&&t.insertBefore(u.create("br"),t.firstChild),!s(t,y)&&!s(t.lastChild,g,1)&&t.appendChild(u.create("br")))}else i==u.getRoot()&&(!n.list_block||!M(t,n.list_block))&&o(e.grep(t.childNodes),function(e){c(p,e.nodeName.toLowerCase())?r?r.appendChild(e):r=H(e,p):r=0});if(n.selector&&n.inline&&!M(n.inline,t))return;u.remove(t,1)}function I(e,t,n){if(e){t=t?"nextSibling":"previousSibling";for(e=n?e:e[t];e;e=e[t])if(e.nodeType==1||!P(e))return e}}function q(e){return e&&e.nodeType==1&&e.getAttribute("data-mce-type")=="bookmark"}function R(t,r){function a(e,t){function r(e){var t={};return o(u.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();r.indexOf("_")!==0&&r!=="style"&&(t[r]=u.getAttrib(e,r))}),t}function i(e,t){var r,i;for(i in e)if(e.hasOwnProperty(i)){r=t[i];if(r===n)return g;if(e[i]!=r)return g;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return g;return y}return e.nodeName!=t.nodeName?g:i(r(e),r(t))?i(u.parseStyle(u.getAttrib(e,"style")),u.parseStyle(u.getAttrib(t,"style")))?y:g:g}var i,s;if(t&&r){function f(e,t){for(i=e;i;i=i[t]){if(i.nodeType==3&&i.nodeValue.length!==0)return e;if(i.nodeType==1&&!q(i))return i}return e}t=f(t,"previousSibling"),r=f(r,"nextSibling");if(a(t,r)){for(i=t.nextSibling;i&&i!=r;)s=i,i=i.nextSibling,t.appendChild(s);return u.remove(r),o(e.grep(r.childNodes),function(e){t.appendChild(e)}),t}}return r}function U(e){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(e)}function z(e,n){var r,i=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"];return i.nodeType==1&&(r=i.childNodes.length-1,!n&&s&&s--,i=i.childNodes[s>r?r:s]),i.nodeType===3&&n&&s>=i.nodeValue.length&&(i=(new f(i,t.getBody())).next()||i),i.nodeType===3&&!n&&s==0&&(i=(new f(i,t.getBody())).prev()||i),i}function W(n,r,i){function h(e){var n=u.create("span",{id:s,"data-mce-bogus":!0,style:o?"color:red":""});return e&&n.appendChild(t.getDoc().createTextNode(c)),n}function p(e,t){while(e){if(e.nodeType===3&&e.nodeValue!==c||e.childNodes.length>1)return!1;t&&e.nodeType===1&&t.push(e),e=e.firstChild}return!0}function d(e){while(e){if(e.id===s)return e;e=e.parentNode}}function m(e){var t;if(e){t=new f(e,e);for(e=t.current();e;e=t.next())if(e.nodeType===3)return e}}function g(e,t){var n,r;if(!e){e=d(a.getStart());if(!e)while(e=u.get(s))g(e,!1)}else r=a.getRng(!0),p(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),u.remove(e)):(n=m(e),n.nodeValue.charAt(0)===v&&(n=n.deleteData(0,1)),u.remove(e,1)),a.setRng(r)}function y(){var e,t,n=a.getRng(!0),s=n.startOffset,o=n.startContainer,u=o.nodeValue,f=d(a.getStart());f&&(e=m(f)),u&&s>0&&s<u.length&&/\w/.test(u.charAt(s))&&/\w/.test(u.charAt(s-1))?(t=a.getBookmark(),n.collapse(!0),n=B(n,E(r)),n=l.split(n),x(r,i,n),a.moveToBookmark(t)):(!f||e.nodeValue!==c?(f=h(!0),e=f.firstChild,n.insertNode(f),s=1,x(r,i,f)):x(r,i,f),a.setCursorLocation(e,s))}function b(){var e,t,n,s,o,f=a.getRng(!0),p=[],d=f.startContainer,v=f.startOffset,m=d;if(d.nodeType==3){if(v!=d.nodeValue.length||d.nodeValue===c)t=!0;m=m.parentNode}while(m){if(C(m,r,i)){n=m;break}m.nextSibling&&(t=!0),p.push(m),m=m.parentNode}if(!n)return;if(t)e=a.getBookmark(),f.collapse(!0),f=B(f,E(r),!0),f=l.split(f),T(r,i,f),a.moveToBookmark(e);else{o=h(),m=o;for(s=p.length-1;s>=0;s--)m.appendChild(p[s].cloneNode(!1)),m=m.firstChild;m.appendChild(u.doc.createTextNode(c)),m=m.firstChild,u.insertAfter(o,n),a.setCursorLocation(m,1)}}var s="_mce_caret",o=t.settings.caret_debug,c=e.isGecko?"​":v;self._hasCaretEvents||(t.onBeforeGetContent.addToTop(function(){var e,t=[];if(p(d(a.getStart()),t)){e=t.length;while(e--)u.setAttrib(t[e],"data-mce-bogus","1")}}),e.each("onMouseUp onKeyUp".split(" "),function(e){t[e].addToTop(function(){g()})}),t.onKeyDown.addToTop(function(e,t){var n=t.keyCode;(n==8||n==37||n==39)&&g(d(a.getStart()))}),self._hasCaretEvents=!0),n=="apply"?y():b()}function X(e){var t,n,r,i,s=e.startContainer,o=e.startOffset;s.nodeType==3&&o>=s.nodeValue.length-1&&(s=s.parentNode,o=d(s)+1);if(s.nodeType==1){r=s.childNodes,s=r[Math.min(o,r.length-1)],t=new f(s),o>r.length-1&&t.next();for(n=t.current();n;n=t.next())if(n.nodeType==3&&!P(n)){i=u.create("a",null,v),n.parentNode.insertBefore(i,n),e.setStart(n,0),a.setRng(e),u.remove(i);return}}}var n,r,i,s={},o=e.each,u=t.dom,a=t.selection,f=e.dom.TreeWalker,l=new e.dom.RangeUtils(u),c=t.schema.isValidChild,h=u.isBlock,p=t.settings.forced_root_block,d=u.nodeIndex,v="﻿",m=/^(src|href|style)$/,g=!1,y=!0;r=function(e){var n;return t.dom.getParent(e,function(e){return n=t.dom.getStyle(e,"text-decoration"),n&&n!=="none"}),n},i=function(e){var n;e.nodeType===1&&e.parentNode&&e.parentNode.nodeType===1&&(n=r(e.parentNode),t.dom.getStyle(e,"color")&&n?t.dom.setStyle(e,"text-decoration",n):t.dom.getStyle(e,"textdecoration")===n&&t.dom.setStyle(e,"text-decoration",null))},e.extend(this,{get:E,register:S,apply:x,remove:T,toggle:N,match:k,matchAll:L,matchNode:C,canApply:A})}}(tinymce),tinymce.onAddEditor.add(function(e,t){var n,r,i,s=t.settings;if(s.inline_styles){r=e.explode(s.font_size_legacy_values);function o(t,n){e.each(n,function(e,n){e&&i.setStyle(t,n,e)}),i.rename(t,"span")}n={font:function(e,t){o(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:r[parseInt(t.size)-1]})},u:function(e,t){o(t,{textDecoration:"underline"})},strike:function(e,t){o(t,{textDecoration:"line-through"})}};function u(r,o){i=r.dom,s.convert_fonts_to_spans&&e.each(i.select("font,u,strike",o.node),function(e){n[e.nodeName.toLowerCase()](t.dom,e)})}t.onPreProcess.add(u),t.onSetContent.add(u),t.onInit.add(function(){t.selection.onSetContent.add(u)})}});